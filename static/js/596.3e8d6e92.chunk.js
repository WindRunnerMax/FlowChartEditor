"use strict";(self.webpackChunkembed_drawio=self.webpackChunkembed_drawio||[]).push([[596],{596:(e,t,i)=>{i.r(t),i.d(t,{DiagramEditor:()=>D});var n=i(9475),l=i(5370),r=(i(6566),i(9925));const o="data:image/gif;base64,R0lGODlhDAAMAIAAAP///0RERCH5BAAAAAAALAAAAAAMAAwAAAIdjI8Hy23w2JtR1bQiVDlIvnVIt3llqKFm4yRuUAAAOw==";var a=i(7102),s=i(758),d=i(6256),h=i(80);function c(e){this.editorUi=e,this.actions=new Object,this.init()}function u(e,t,i,n,l){r.tM.call(this),this.label=e,this.funct=this.createFunction(t),this.enabled=null==i||i,this.iconCls=n,this.shortcut=l,this.visible=!0}c.prototype.init=function(){var e=this.editorUi,t=e.editor,i=t.graph,n=function(){return u.prototype.isEnabled.apply(this,arguments)&&i.isEnabled()};function l(e){i.escape();var t=i.deleteCells(i.getDeletableCells(i.getSelectionCells()),e);null!=t&&i.setSelectionCells(t)}this.addAction("undo",(function(){e.undo()}),null,"sprite-undo",h.qS.CTRL_KEY+"+Z"),this.addAction("redo",(function(){e.redo()}),null,"sprite-redo",r.HY.IS_WIN?h.qS.CTRL_KEY+"+Y":h.qS.CTRL_KEY+"+Shift+Z"),this.addAction("cut",(function(){r.cC.cut(i)}),null,"sprite-cut",h.qS.CTRL_KEY+"+X"),this.addAction("copy",(function(){try{r.cC.copy(i)}catch(t){e.handleError(t)}}),null,"sprite-copy",h.qS.CTRL_KEY+"+C"),this.addAction("paste",(function(){i.isEnabled()&&!i.isCellLocked(i.getDefaultParent())&&r.cC.paste(i)}),!1,"sprite-paste",h.qS.CTRL_KEY+"+V"),this.addAction("pasteHere",(function(){if(i.isEnabled()&&!i.isCellLocked(i.getDefaultParent())){i.getModel().beginUpdate();try{var e=r.cC.paste(i);if(null!=e){for(var t=!0,n=0;n<e.length&&t;n++)t=t&&i.model.isEdge(e[n]);var l=i.view.translate,o=i.view.scale,a=l.x,s=l.y,d=null;if(1==e.length&&t){var h=i.getCellGeometry(e[0]);null!=h&&(d=h.getTerminalPoint(!0))}if(null!=(d=null!=d?d:i.getBoundingBoxFromGeometry(e,t))){var c=Math.round(i.snap(i.popupMenuHandler.triggerX/o-a)),u=Math.round(i.snap(i.popupMenuHandler.triggerY/o-s));i.cellsMoved(e,c-d.x,u-d.y)}}}finally{i.getModel().endUpdate()}}})),this.addAction("copySize",(function(){var t=i.getSelectionCell();if(i.isEnabled()&&null!=t&&i.getModel().isVertex(t)){var n=i.getCellGeometry(t);null!=n&&(e.copiedSize=new r.P5(n.x,n.y,n.width,n.height))}}),null,null,"Alt+Shift+X"),this.addAction("pasteSize",(function(){if(i.isEnabled()&&!i.isSelectionEmpty()&&null!=e.copiedSize){i.getModel().beginUpdate();try{for(var t=i.getSelectionCells(),n=0;n<t.length;n++)if(i.getModel().isVertex(t[n])){var l=i.getCellGeometry(t[n]);null!=l&&((l=l.clone()).width=e.copiedSize.width,l.height=e.copiedSize.height,i.getModel().setGeometry(t[n],l))}}finally{i.getModel().endUpdate()}}}),null,null,"Alt+Shift+V"),this.addAction("delete",(function(e){l(null!=e&&r.G8.isShiftDown(e))}),null,null,"Delete"),this.addAction("deleteAll",(function(){l(!0)}),null,null,h.qS.CTRL_KEY+"+Delete"),this.addAction("duplicate",(function(){try{i.setSelectionCells(i.duplicateCells())}catch(t){e.handleError(t)}}),null,null,h.qS.CTRL_KEY+"+D"),this.put("turn",new u(r.xK.get("turn")+" / "+r.xK.get("reverse"),(function(e){i.turnShapes(i.getSelectionCells(),null!=e&&r.G8.isShiftDown(e))}),null,null,h.qS.CTRL_KEY+"+R")),this.addAction("selectVertices",(function(){i.selectVertices(null,!0)}),null,null,h.qS.CTRL_KEY+"+Shift+I"),this.addAction("selectEdges",(function(){i.selectEdges()}),null,null,h.qS.CTRL_KEY+"+Shift+E"),this.addAction("selectAll",(function(){i.selectAll(null,!0)}),null,null,h.qS.CTRL_KEY+"+A"),this.addAction("selectNone",(function(){i.clearSelection()}),null,null,h.qS.CTRL_KEY+"+Shift+A"),this.addAction("lockUnlock",(function(){if(!i.isSelectionEmpty()){i.getModel().beginUpdate();try{var e=i.isCellMovable(i.getSelectionCell())?1:0;i.toggleCellStyles(r.fV.STYLE_MOVABLE,e),i.toggleCellStyles(r.fV.STYLE_RESIZABLE,e),i.toggleCellStyles(r.fV.STYLE_ROTATABLE,e),i.toggleCellStyles(r.fV.STYLE_DELETABLE,e),i.toggleCellStyles(r.fV.STYLE_EDITABLE,e),i.toggleCellStyles("connectable",e)}finally{i.getModel().endUpdate()}}}),null,null,h.qS.CTRL_KEY+"+L"),this.addAction("home",(function(){i.home()}),null,null,"Shift+Home"),this.addAction("exitGroup",(function(){i.exitGroup()}),null,null,h.qS.CTRL_KEY+"+Shift+Home"),this.addAction("enterGroup",(function(){i.enterGroup()}),null,null,h.qS.CTRL_KEY+"+Shift+End"),this.addAction("collapse",(function(){i.foldCells(!0)}),null,null,h.qS.CTRL_KEY+"+Home"),this.addAction("expand",(function(){i.foldCells(!1)}),null,null,h.qS.CTRL_KEY+"+End"),this.addAction("toFront",(function(){i.orderCells(!1)}),null,null,h.qS.CTRL_KEY+"+Shift+F"),this.addAction("toBack",(function(){i.orderCells(!0)}),null,null,h.qS.CTRL_KEY+"+Shift+B"),this.addAction("group",(function(){1==i.getSelectionCount()?i.setCellStyles("container","1"):i.setSelectionCell(i.groupCells(null,0))}),null,null,h.qS.CTRL_KEY+"+G"),this.addAction("ungroup",(function(){1==i.getSelectionCount()&&0==i.getModel().getChildCount(i.getSelectionCell())?i.setCellStyles("container","0"):i.setSelectionCells(i.ungroupCells())}),null,null,h.qS.CTRL_KEY+"+Shift+U"),this.addAction("removeFromGroup",(function(){i.removeCellsFromParent()})),this.addAction("edit",(function(){i.isEnabled()&&i.startEditingAtCell()}),null,null,"F2/Enter"),this.addAction("autosize",(function(){var e=i.getSelectionCells();if(null!=e){i.getModel().beginUpdate();try{for(var t=0;t<e.length;t++){var n=e[t];if(i.getModel().getChildCount(n))i.updateGroupBounds([n],20);else{var l=i.view.getState(n),r=i.getCellGeometry(n);i.getModel().isVertex(n)&&null!=l&&null!=l.text&&null!=r&&i.isWrapping(n)?((r=r.clone()).height=l.text.boundingBox.height/i.view.scale,i.getModel().setGeometry(n,r)):i.updateCellSize(n)}}}finally{i.getModel().endUpdate()}}}),null,null,h.qS.CTRL_KEY+"+Shift+Y"),this.addAction("formattedText",(function(){var t=i.getView().getState(i.getSelectionCell());if(null!=t){i.stopEditing();var n="1"==t.style.html?null:"1";i.getModel().beginUpdate();try{for(var l=i.getSelectionCells(),o=0;o<l.length;o++){var a=i.getView().getState(l[o]);if(null!=a){var s=r.vJ.getValue(a.style,"html","0");if("1"==s&&null==n){var d=i.convertValueToString(a.cell);"0"!=r.vJ.getValue(a.style,"nl2Br","1")&&(d=d.replace(/\n/g,"").replace(/<br\s*.?>/g,"\n"));var h=document.createElement("div");h.innerHTML=i.sanitizeHtml(d),d=r.vJ.extractTextWithWhitespace(h.childNodes),i.cellLabelChanged(a.cell,d),i.setCellStyles("html",n,[l[o]])}else if("0"==s&&"1"==n){d=r.vJ.htmlEntities(i.convertValueToString(a.cell),!1);"0"!=r.vJ.getValue(a.style,"nl2Br","1")&&(d=d.replace(/\n/g,"<br/>")),i.cellLabelChanged(a.cell,i.sanitizeHtml(d)),i.setCellStyles("html",n,[l[o]])}}}e.fireEvent(new r.vC("styleChanged","keys",["html"],"values",[null!=n?n:"0"],"cells",l))}finally{i.getModel().endUpdate()}}})),this.addAction("wordWrap",(function(){var e=i.getView().getState(i.getSelectionCell()),t="wrap";i.stopEditing(),null!=e&&"wrap"==e.style[r.fV.STYLE_WHITE_SPACE]&&(t=null),i.setCellStyles(r.fV.STYLE_WHITE_SPACE,t)})),this.addAction("rotation",(function(){var t="0",n=i.getView().getState(i.getSelectionCell());null!=n&&(t=n.style[r.fV.STYLE_ROTATION]||t);var l=new d.kn(e,t,r.xK.get("apply"),(function(e){null!=e&&e.length>0&&i.setCellStyles(r.fV.STYLE_ROTATION,e)}),r.xK.get("enterValue")+" ("+r.xK.get("rotation")+" 0-360)");e.showDialog(l.container,375,80,!0,!0),l.init()})),this.addAction("resetView",(function(){i.zoomTo(1),e.resetScrollbars()}),null,null,"Home"),this.addAction("zoomIn",(function(){i.isFastZoomEnabled()?i.lazyZoom(!0,!0,e.buttonZoomDelay):i.zoomIn()}),null,null,h.qS.CTRL_KEY+" + (Numpad) / Alt+Mousewheel"),this.addAction("zoomOut",(function(){i.isFastZoomEnabled()?i.lazyZoom(!1,!0,e.buttonZoomDelay):i.zoomOut()}),null,null,h.qS.CTRL_KEY+" - (Numpad) / Alt+Mousewheel"),this.addAction("fitWindow",(function(){var e=i.isSelectionEmpty()?i.getGraphBounds():i.getBoundingBox(i.getSelectionCells()),t=i.view.translate,n=i.view.scale;e.width/=n,e.height/=n,e.x=e.x/n-t.x,e.y=e.y/n-t.y;var l=i.container.clientWidth-10,o=i.container.clientHeight-10,a=Math.floor(20*Math.min(l/e.width,o/e.height))/20;i.zoomTo(a),r.vJ.hasScrollbars(i.container)&&(i.container.scrollTop=(e.y+t.y)*a-Math.max((o-e.height*a)/2+5,0),i.container.scrollLeft=(e.x+t.x)*a-Math.max((l-e.width*a)/2+5,0))}),null,null,h.qS.CTRL_KEY+"+Shift+H"),this.addAction("fitPage",r.vJ.bind(this,(function(){i.pageVisible||this.get("pageView").funct();var e=i.pageFormat,t=i.pageScale,n=i.container.clientWidth-10,l=i.container.clientHeight-10,o=Math.floor(20*Math.min(n/e.width/t,l/e.height/t))/20;if(i.zoomTo(o),r.vJ.hasScrollbars(i.container)){var a=i.getPagePadding();i.container.scrollTop=a.y*i.view.scale-1,i.container.scrollLeft=Math.min(a.x*i.view.scale,(i.container.scrollWidth-i.container.clientWidth)/2)-1}})),null,null,h.qS.CTRL_KEY+"+J"),this.addAction("fitTwoPages",r.vJ.bind(this,(function(){i.pageVisible||this.get("pageView").funct();var e=i.pageFormat,t=i.pageScale,n=i.container.clientWidth-10,l=i.container.clientHeight-10,o=Math.floor(20*Math.min(n/(2*e.width)/t,l/e.height/t))/20;if(i.zoomTo(o),r.vJ.hasScrollbars(i.container)){var a=i.getPagePadding();i.container.scrollTop=Math.min(a.y,(i.container.scrollHeight-i.container.clientHeight)/2),i.container.scrollLeft=Math.min(a.x,(i.container.scrollWidth-i.container.clientWidth)/2)}})),null,null,h.qS.CTRL_KEY+"+Shift+J"),this.addAction("fitPageWidth",r.vJ.bind(this,(function(){i.pageVisible||this.get("pageView").funct();var e=i.pageFormat,t=i.pageScale,n=i.container.clientWidth-10,l=Math.floor(20*n/e.width/t)/20;if(i.zoomTo(l),r.vJ.hasScrollbars(i.container)){var o=i.getPagePadding();i.container.scrollLeft=Math.min(o.x*i.view.scale,(i.container.scrollWidth-i.container.clientWidth)/2)}}))),this.put("customZoom",new u(r.xK.get("custom")+"...",r.vJ.bind(this,(function(){var e=new d.kn(this.editorUi,parseInt(100*i.getView().getScale()),r.xK.get("apply"),r.vJ.bind(this,(function(e){var t=parseInt(e);!isNaN(t)&&t>0&&i.zoomTo(t/100)})),r.xK.get("zoom")+" (%)");this.editorUi.showDialog(e.container,300,80,!0,!0),e.init()})),null,null,h.qS.CTRL_KEY+"+0")),this.addAction("pageScale...",r.vJ.bind(this,(function(){var t=new d.kn(this.editorUi,parseInt(100*i.pageScale),r.xK.get("apply"),r.vJ.bind(this,(function(t){var n=parseInt(t);if(!isNaN(n)&&n>0){var l=new s.f(e,null,null,null,n/100);l.ignoreColor=!0,l.ignoreImage=!0,i.model.execute(l)}})),r.xK.get("pageScale")+" (%)");this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()})));var o=null;(o=this.addAction("grid",(function(){i.setGridEnabled(!i.isGridEnabled()),e.fireEvent(new r.vC("gridEnabledChanged"))}),null,null,h.qS.CTRL_KEY+"+Shift+G")).setToggleAction(!0),o.setSelectedCallback((function(){return i.isGridEnabled()})),o.setEnabled(!1),(o=this.addAction("guides",(function(){i.graphHandler.guidesEnabled=!i.graphHandler.guidesEnabled,e.fireEvent(new r.vC("guidesEnabledChanged"))}))).setToggleAction(!0),o.setSelectedCallback((function(){return i.graphHandler.guidesEnabled})),o.setEnabled(!1),(o=this.addAction("tooltips",(function(){i.tooltipHandler.setEnabled(!i.tooltipHandler.isEnabled())}))).setToggleAction(!0),o.setSelectedCallback((function(){return i.tooltipHandler.isEnabled()})),(o=this.addAction("collapseExpand",(function(){var t=new s.f(e);t.ignoreColor=!0,t.ignoreImage=!0,t.foldingEnabled=!i.foldingEnabled,i.model.execute(t)}))).setToggleAction(!0),o.setSelectedCallback((function(){return i.foldingEnabled})),o.isEnabled=n,(o=this.addAction("scrollbars",(function(){e.setScrollbars(!e.hasScrollbars())}))).setToggleAction(!0),o.setSelectedCallback((function(){return i.scrollbars})),(o=this.addAction("pageView",r.vJ.bind(this,(function(){e.setPageVisible(!i.pageVisible)})))).setToggleAction(!0),o.setSelectedCallback((function(){return i.pageVisible})),(o=this.addAction("connectionArrows",(function(){i.connectionArrowsEnabled=!i.connectionArrowsEnabled,e.fireEvent(new r.vC("connectionArrowsChanged"))}),null,null,"Alt+Shift+A")).setToggleAction(!0),o.setSelectedCallback((function(){return i.connectionArrowsEnabled})),(o=this.addAction("connectionPoints",(function(){i.setConnectable(!i.connectionHandler.isEnabled()),e.fireEvent(new r.vC("connectionPointsChanged"))}),null,null,"Alt+Shift+P")).setToggleAction(!0),o.setSelectedCallback((function(){return i.connectionHandler.isEnabled()})),(o=this.addAction("copyConnect",(function(){i.connectionHandler.setCreateTarget(!i.connectionHandler.isCreateTarget()),e.fireEvent(new r.vC("copyConnectChanged"))}))).setToggleAction(!0),o.setSelectedCallback((function(){return i.connectionHandler.isCreateTarget()})),o.isEnabled=n;var a=r.vJ.bind(this,(function(e,t,n,l){return this.addAction(e,(function(){if(null!=n&&i.cellEditor.isContentEditing())n();else{i.stopEditing(!1),i.getModel().beginUpdate();try{var e=i.getSelectionCells();i.toggleCellStyleFlags(r.fV.STYLE_FONTSTYLE,t,e),(t&r.fV.FONT_BOLD)==r.fV.FONT_BOLD?i.updateLabelElements(i.getSelectionCells(),(function(e){e.style.fontWeight=null,"B"==e.nodeName&&i.replaceElement(e)})):(t&r.fV.FONT_ITALIC)==r.fV.FONT_ITALIC?i.updateLabelElements(i.getSelectionCells(),(function(e){e.style.fontStyle=null,"I"==e.nodeName&&i.replaceElement(e)})):(t&r.fV.FONT_UNDERLINE)==r.fV.FONT_UNDERLINE&&i.updateLabelElements(i.getSelectionCells(),(function(e){e.style.textDecoration=null,"U"==e.nodeName&&i.replaceElement(e)}));for(var l=0;l<e.length;l++)0==i.model.getChildCount(e[l])&&i.autoSizeCell(e[l],!1)}finally{i.getModel().endUpdate()}}}),null,null,l)}));a("bold",r.fV.FONT_BOLD,(function(){document.execCommand("bold",!1,null)}),h.qS.CTRL_KEY+"+B"),a("italic",r.fV.FONT_ITALIC,(function(){document.execCommand("italic",!1,null)}),h.qS.CTRL_KEY+"+I"),a("underline",r.fV.FONT_UNDERLINE,(function(){document.execCommand("underline",!1,null)}),h.qS.CTRL_KEY+"+U"),this.addAction("fontColor...",(function(){e.menus.pickColor(r.fV.STYLE_FONTCOLOR,"forecolor","000000")})),this.addAction("strokeColor...",(function(){e.menus.pickColor(r.fV.STYLE_STROKECOLOR)})),this.addAction("fillColor...",(function(){e.menus.pickColor(r.fV.STYLE_FILLCOLOR)})),this.addAction("gradientColor...",(function(){e.menus.pickColor(r.fV.STYLE_GRADIENTCOLOR)})),this.addAction("backgroundColor...",(function(){e.menus.pickColor(r.fV.STYLE_LABEL_BACKGROUNDCOLOR,"backcolor")})),this.addAction("borderColor...",(function(){e.menus.pickColor(r.fV.STYLE_LABEL_BORDERCOLOR)})),this.addAction("vertical",(function(){e.menus.toggleStyle(r.fV.STYLE_HORIZONTAL,!0)})),this.addAction("shadow",(function(){e.menus.toggleStyle(r.fV.STYLE_SHADOW)})),this.addAction("solid",(function(){i.getModel().beginUpdate();try{i.setCellStyles(r.fV.STYLE_DASHED,null),i.setCellStyles(r.fV.STYLE_DASH_PATTERN,null),e.fireEvent(new r.vC("styleChanged","keys",[r.fV.STYLE_DASHED,r.fV.STYLE_DASH_PATTERN],"values",[null,null],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}})),this.addAction("dashed",(function(){i.getModel().beginUpdate();try{i.setCellStyles(r.fV.STYLE_DASHED,"1"),i.setCellStyles(r.fV.STYLE_DASH_PATTERN,null),e.fireEvent(new r.vC("styleChanged","keys",[r.fV.STYLE_DASHED,r.fV.STYLE_DASH_PATTERN],"values",["1",null],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}})),this.addAction("dotted",(function(){i.getModel().beginUpdate();try{i.setCellStyles(r.fV.STYLE_DASHED,"1"),i.setCellStyles(r.fV.STYLE_DASH_PATTERN,"1 4"),e.fireEvent(new r.vC("styleChanged","keys",[r.fV.STYLE_DASHED,r.fV.STYLE_DASH_PATTERN],"values",["1","1 4"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}})),this.addAction("sharp",(function(){i.getModel().beginUpdate();try{i.setCellStyles(r.fV.STYLE_ROUNDED,"0"),i.setCellStyles(r.fV.STYLE_CURVED,"0"),e.fireEvent(new r.vC("styleChanged","keys",[r.fV.STYLE_ROUNDED,r.fV.STYLE_CURVED],"values",["0","0"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}})),this.addAction("rounded",(function(){i.getModel().beginUpdate();try{i.setCellStyles(r.fV.STYLE_ROUNDED,"1"),i.setCellStyles(r.fV.STYLE_CURVED,"0"),e.fireEvent(new r.vC("styleChanged","keys",[r.fV.STYLE_ROUNDED,r.fV.STYLE_CURVED],"values",["1","0"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}})),this.addAction("toggleRounded",(function(){if(!i.isSelectionEmpty()&&i.isEnabled()){i.getModel().beginUpdate();try{var t=i.getSelectionCells(),n=i.getCurrentCellStyle(t[0]),l="1"==r.vJ.getValue(n,r.fV.STYLE_ROUNDED,"0")?"0":"1";i.setCellStyles(r.fV.STYLE_ROUNDED,l),i.setCellStyles(r.fV.STYLE_CURVED,null),e.fireEvent(new r.vC("styleChanged","keys",[r.fV.STYLE_ROUNDED,r.fV.STYLE_CURVED],"values",[l,"0"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}})),this.addAction("curved",(function(){i.getModel().beginUpdate();try{i.setCellStyles(r.fV.STYLE_ROUNDED,"0"),i.setCellStyles(r.fV.STYLE_CURVED,"1"),e.fireEvent(new r.vC("styleChanged","keys",[r.fV.STYLE_ROUNDED,r.fV.STYLE_CURVED],"values",["0","1"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}})),this.addAction("collapsible",(function(){var t=i.view.getState(i.getSelectionCell()),n="1";null!=t&&null!=i.getFoldingImage(t)&&(n="0"),i.setCellStyles("collapsible",n),e.fireEvent(new r.vC("styleChanged","keys",["collapsible"],"values",[n],"cells",i.getSelectionCells()))})),this.addAction("setAsDefaultStyle",(function(){i.isEnabled()&&!i.isSelectionEmpty()&&e.setDefaultStyle(i.getSelectionCell())}),null,null,h.qS.CTRL_KEY+"+Shift+D"),this.addAction("clearDefaultStyle",(function(){i.isEnabled()&&e.clearDefaultStyle()}),null,null,h.qS.CTRL_KEY+"+Shift+R"),this.addAction("addWaypoint",(function(){var e=i.getSelectionCell();if(null!=e&&i.getModel().isEdge(e)){var n=t.graph.selectionCellsHandler.getHandler(e);if(n instanceof r.L2){for(var l=i.view.translate,o=i.view.scale,a=l.x,s=l.y,d=i.getModel().getParent(e),h=i.getCellGeometry(d);i.getModel().isVertex(d)&&null!=h;)a+=h.x,s+=h.y,d=i.getModel().getParent(d),h=i.getCellGeometry(d);var c=Math.round(i.snap(i.popupMenuHandler.triggerX/o-a)),u=Math.round(i.snap(i.popupMenuHandler.triggerY/o-s));n.addPointAt(n.state,c,u)}}})),this.addAction("removeWaypoint",(function(){var t=e.actions.get("removeWaypoint");null!=t.handler&&t.handler.removePoint(t.handler.state,t.index)})),this.addAction("clearWaypoints",(function(){var e=i.getSelectionCells();if(null!=e){e=i.addAllEdges(e),i.getModel().beginUpdate();try{for(var t=0;t<e.length;t++){var n=e[t];if(i.getModel().isEdge(n)){var l=i.getCellGeometry(n);null!=l&&((l=l.clone()).points=null,i.getModel().setGeometry(n,l))}}}finally{i.getModel().endUpdate()}}}),null,null,"Alt+Shift+C"),o=this.addAction("subscript",r.vJ.bind(this,(function(){i.cellEditor.isContentEditing()&&document.execCommand("subscript",!1,null)})),null,null,h.qS.CTRL_KEY+"+,"),o=this.addAction("superscript",r.vJ.bind(this,(function(){i.cellEditor.isContentEditing()&&document.execCommand("superscript",!1,null)})),null,null,h.qS.CTRL_KEY+"+."),o=this.addAction("indent",r.vJ.bind(this,(function(){i.cellEditor.isContentEditing()&&document.execCommand("indent",!1,null)})),null,null,"Shift+Tab"),(o=this.addAction("layers",r.vJ.bind(this,(function(){null==this.layersWindow?(this.layersWindow=new d.Vv(e,document.body.offsetWidth-280,120,220,196),this.layersWindow.window.addListener("show",(function(){e.fireEvent(new r.vC("layers"))})),this.layersWindow.window.addListener("hide",(function(){e.fireEvent(new r.vC("layers"))})),this.layersWindow.window.setVisible(!0),e.fireEvent(new r.vC("layers")),this.layersWindow.init()):this.layersWindow.window.setVisible(!this.layersWindow.window.isVisible())})),null,null,h.qS.CTRL_KEY+"+Shift+L")).setToggleAction(!0),o.setSelectedCallback(r.vJ.bind(this,(function(){return null!=this.layersWindow&&this.layersWindow.window.isVisible()}))),(o=this.addAction("formatPanel",r.vJ.bind(this,(function(){e.toggleFormatPanel()})),null,null,h.qS.CTRL_KEY+"+Shift+P")).setToggleAction(!0),o.setSelectedCallback(r.vJ.bind(this,(function(){return e.formatWidth>0}))),(o=this.addAction("outline",r.vJ.bind(this,(function(){null==this.outlineWindow?(this.outlineWindow=new d.xK(e,document.body.offsetWidth-260,100,180,180),this.outlineWindow.window.addListener("show",(function(){e.fireEvent(new r.vC("outline"))})),this.outlineWindow.window.addListener("hide",(function(){e.fireEvent(new r.vC("outline"))})),this.outlineWindow.window.setVisible(!0),e.fireEvent(new r.vC("outline"))):this.outlineWindow.window.setVisible(!this.outlineWindow.window.isVisible())})),null,null,h.qS.CTRL_KEY+"+Shift+O")).setToggleAction(!0),o.setSelectedCallback(r.vJ.bind(this,(function(){return null!=this.outlineWindow&&this.outlineWindow.window.isVisible()})))},c.prototype.addAction=function(e,t,i,n,l){var o;return"..."==e.substring(e.length-3)?(e=e.substring(0,e.length-3),o=r.xK.get(e)+"..."):o=r.xK.get(e),this.put(e,new u(o,t,i,n,l))},c.prototype.put=function(e,t){return this.actions[e]=t,t},c.prototype.get=function(e){return this.actions[e]},r.vJ.extend(u,r.tM),u.prototype.createFunction=function(e){return e},u.prototype.setEnabled=function(e){this.enabled!=e&&(this.enabled=e,this.fireEvent(new r.vC("stateChanged")))},u.prototype.isEnabled=function(){return this.enabled},u.prototype.setToggleAction=function(e){this.toggleAction=e},u.prototype.setSelectedCallback=function(e){this.selectedCallback=e},u.prototype.isSelected=function(){return this.selectedCallback()};var p=i(2762),g=i(4721),A=i(9922),m=i(5404),f=function(e,t,i,n,l){var o=n&&l?'viewBox="0 0 '.concat(n," ").concat(l,'"'):"",a=unescape(encodeURIComponent("".concat('<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="').concat(e,'px" height="').concat(t,'px" ').concat(o,' version="1.1">').concat(i,"</svg>")));return new r.xq("data:image/svg+xml;base64,".concat(btoa(a)),e,t)},y=f(18,28,'<path d="m 6 26 L 12 26 L 12 12 L 18 12 L 9 1 L 1 12 L 6 12 z" stroke="#fff" fill="'.concat(h.bo.ARROW_FILL,'"/>')),v=f(26,18,'<path d="m 1 6 L 14 6 L 14 1 L 26 9 L 14 18 L 14 12 L 1 12 z" stroke="#fff" fill="'.concat(h.bo.ARROW_FILL,'"/>')),w=f(18,26,'<path d="m 6 1 L 6 14 L 1 14 L 9 26 L 18 14 L 12 14 L 12 1 z" stroke="#fff" fill="'.concat(h.bo.ARROW_FILL,'"/>')),b=f(28,18,'<path d="m 1 9 L 12 1 L 12 6 L 26 6 L 26 12 L 12 12 L 12 18 z" stroke="#fff" fill="'.concat(h.bo.ARROW_FILL,'"/>')),S=new r.xq(m.MT,38,38),E=f(26,26,'<circle cx="13" cy="13" r="12" stroke="#fff" fill="'.concat(h.bo.ARROW_FILL,'"/>'));function C(e,t){var i=this;this.editorUi=e,this.container=t,this.palettes=new Object,this.taglist=new Object,this.showTooltips=!0,this.graph=e.createTemporaryGraph(this.editorUi.editor.graph.getStylesheet()),this.graph.cellRenderer.minSvgStrokeWidth=this.minThumbStrokeWidth,this.graph.cellRenderer.antiAlias=this.thumbAntiAlias,this.graph.container.style.visibility="hidden",this.graph.foldingEnabled=!1,document.body.appendChild(this.graph.container),this.pointerUpHandler=r.vJ.bind(this,(function(){i.showTooltips=!0})),r.G8.addListener(document,r.HY.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerDownHandler=r.vJ.bind(this,(function(){i.showTooltips=!1,i.hideTooltip()})),r.G8.addListener(document,r.HY.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerMoveHandler=r.vJ.bind(this,(function(e){for(var t=r.G8.getSource(e);null!=t;){if(t==this.currentElt)return;t=t.parentNode}this.hideTooltip()})),r.G8.addListener(document,r.HY.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerOutHandler=r.vJ.bind(this,(function(e){null==e.toElement&&null==e.relatedTarget&&this.hideTooltip()})),r.G8.addListener(document,r.HY.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),r.G8.addListener(t,"scroll",r.vJ.bind(this,(function(){this.showTooltips=!0,this.hideTooltip()}))),this.init()}C.prototype.triangleUp=y,C.prototype.triangleRight=v,C.prototype.triangleDown=w,C.prototype.triangleLeft=b,C.prototype.refreshTarget=S,C.prototype.roundDrop=E,C.prototype.init=function(){this.addSearchPalette(!0),this.addGeneralPalette(!0),this.addStencilPalette("flowchart",r.xK.get("flowchart"),(0,g.p)("flowchart.xml"),";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,null,!0),this.addMiscPalette(!1),this.addAdvancedPalette(!1),this.addBasicPalette(""),this.addStencilPalette("arrows",r.xK.get("arrows"),(0,g.p)("arrows.xml"),";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.addUmlPalette(!1),this.addBpmnPalette("",!1),this.addImagePalette("clipart",r.xK.get("clipart"),"","_128x128.png",["Earth_globe","Empty_Folder","Full_Folder","Gear","Lock","Software","Virus","Email","Database","Router_Icon","iPad","iMac","Laptop","MacBook","Monitor_Tower","Printer","Server_Tower","Workstation","Firewall_02","Wireless_Router_N","Credit_Card","Piggy_Bank","Graph","Safe","Shopping_Cart","Suit1","Suit2","Suit3","Pilot1","Worker1","Soldier1","Doctor1","Tech1","Security1","Telesales1"],null,{Wireless_Router_N:"wireless router switch wap wifi access point wlan",Router_Icon:"router switch"})},C.prototype.collapsedImage=m.ln,C.prototype.expandedImage=m.Rg,C.prototype.searchImage=m.yZ,C.prototype.dragPreviewBorder="1px dashed black",C.prototype.enableTooltips=!0,C.prototype.tooltipBorder=16,C.prototype.tooltipDelay=300,C.prototype.dropTargetDelay=200,C.prototype.gearImage=A.A,C.prototype.thumbWidth=42,C.prototype.thumbHeight=42,C.prototype.minThumbStrokeWidth=1,C.prototype.thumbAntiAlias=!1,C.prototype.thumbPadding=document.documentMode>=5?2:3,C.prototype.thumbBorder=2,C.prototype.thumbPadding=document.documentMode>=5?0:1,C.prototype.thumbBorder=1,C.prototype.thumbWidth=32,C.prototype.thumbHeight=30,C.prototype.minThumbStrokeWidth=1.3,C.prototype.thumbAntiAlias=!0,C.prototype.sidebarTitleSize=9,C.prototype.sidebarTitles=!1,C.prototype.tooltipTitles=!0,C.prototype.maxTooltipWidth=400,C.prototype.maxTooltipHeight=400,C.prototype.addStencilsToIndex=!0,C.prototype.defaultImageWidth=80,C.prototype.defaultImageHeight=80,C.prototype.getTooltipOffset=function(){return new r.IO(0,0)},C.prototype.showTooltip=function(e,t,i,n,l,o){if(this.enableTooltips&&this.showTooltips&&this.currentElt!=e){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null);var s=r.vJ.bind(this,(function(){null==this.tooltip&&(this.tooltip=document.createElement("div"),this.tooltip.className="geSidebarTooltip",this.tooltip.style.zIndex=r.jH.prototype.zIndex-1,document.body.appendChild(this.tooltip),this.graph2=new p.TS(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet()),this.graph2.resetViewOnRootChange=!1,this.graph2.foldingEnabled=!1,this.graph2.gridEnabled=!1,this.graph2.autoScroll=!1,this.graph2.setTooltips(!1),this.graph2.setConnectable(!1),this.graph2.setEnabled(!1)),this.graph2.model.clear(),this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder),i>this.maxTooltipWidth||n>this.maxTooltipHeight?this.graph2.view.scale=Math.round(100*Math.min(this.maxTooltipWidth/i,this.maxTooltipHeight/n))/100:this.graph2.view.scale=1,this.tooltip.style.display="block",this.graph2.labelsVisible=null==o||o;var s=r.HY.NO_FO;r.HY.NO_FO=a.KE.prototype.originalNoForeignObject,this.graph2.addCells(t),r.HY.NO_FO=s;var d=this.graph2.getGraphBounds(),h=d.width+2*this.tooltipBorder+4,c=d.height+2*this.tooltipBorder;r.HY.IS_QUIRKS?(c+=4,this.tooltip.style.overflow="hidden"):this.tooltip.style.overflow="visible",this.tooltip.style.width=h+"px";var u=h;if(this.tooltipTitles&&null!=l&&l.length>0){null==this.tooltipTitle?(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.style.borderTop="1px solid gray",this.tooltipTitle.style.textAlign="center",this.tooltipTitle.style.width="100%",this.tooltipTitle.style.overflow="hidden",this.tooltipTitle.style.position="absolute",this.tooltipTitle.style.paddingTop="6px",this.tooltipTitle.style.bottom="6px",this.tooltip.appendChild(this.tooltipTitle)):this.tooltipTitle.innerHTML="",this.tooltipTitle.style.display="",r.vJ.write(this.tooltipTitle,l),u=Math.min(this.maxTooltipWidth,Math.max(h,this.tooltipTitle.scrollWidth+4));var g=this.tooltipTitle.offsetHeight+10;c+=g,this.tooltipTitle.style.marginTop=2-g+"px"}else null!=this.tooltipTitle&&null!=this.tooltipTitle.parentNode&&(this.tooltipTitle.style.display="none");u>h&&(this.tooltip.style.width=u+"px"),this.tooltip.style.height=c+"px";var A=-Math.round(d.x-this.tooltipBorder)+(u>h?(u-h)/2:0),m=-Math.round(d.y-this.tooltipBorder),f=document.body,y=document.documentElement,v=this.getTooltipOffset(),w=Math.max(f.clientHeight||0,y.clientHeight),b=this.container.clientWidth+this.editorUi.splitSize+3+this.editorUi.container.offsetLeft+v.x,S=Math.min(w-c-20,Math.max(0,this.editorUi.container.offsetTop+this.container.offsetTop+e.offsetTop-this.container.scrollTop-c/2+16))+v.y;0!=A||0!=m?this.graph2.view.canvas.setAttribute("transform","translate("+A+","+m+")"):this.graph2.view.canvas.removeAttribute("transform"),this.tooltip.style.position="absolute",this.tooltip.style.left=b+"px",this.tooltip.style.top=S+"px"}));null!=this.tooltip&&"none"!=this.tooltip.style.display?s():this.thread=window.setTimeout(s,this.tooltipDelay),this.currentElt=e}},C.prototype.hideTooltip=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),null!=this.tooltip&&(this.tooltip.style.display="none",this.currentElt=null)},C.prototype.addDataEntry=function(e,t,i,n,l){return this.addEntry(e,r.vJ.bind(this,(function(){return this.createVertexTemplateFromData(l,t,i,n)})))},C.prototype.addEntries=function(e){for(var t=0;t<e.length;t++)r.vJ.bind(this,(function(e){var t=e.data,i=null!=e.title?e.title:"";null!=e.tags&&(i+=" "+e.tags),null!=t&&i.length>0?this.addEntry(i,r.vJ.bind(this,(function(){t=this.editorUi.convertDataUri(t);var i="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";return"fixed"==e.aspect&&(i+="aspect=fixed;"),this.createVertexTemplate(i+"image="+t,e.w,e.h,"",e.title||"",!1,!1,!0)}))):null!=e.xml&&i.length>0&&this.addEntry(i,r.vJ.bind(this,(function(){var t=this.editorUi.stringToCells(p.TS.decompress(e.xml));return this.createVertexTemplateFromCells(t,e.w,e.h,e.title||"",!0,!1,!0)})))}))(e[t])},C.prototype.addEntry=function(e,t){if(null!=this.taglist&&null!=e&&e.length>0)for(var i=e.toLowerCase().replace(/[\/\,\(\)]/g," ").split(" "),n=r.vJ.bind(this,(function(e){if(null!=e&&e.length>1){var i=this.taglist[e];"object"!==typeof i&&(i={entries:[],dict:new r.kB},this.taglist[e]=i),null==i.dict.get(t)&&(i.dict.put(t,t),i.entries.push(t))}})),l=0;l<i.length;l++){n(i[l]);var o=i[l].replace(/\.*\d*$/,"");o!=i[l]&&n(o)}return t},C.prototype.searchEntries=function(e,t,i,n){if(null!=this.taglist&&null!=e){for(var l=e.toLowerCase().split(" "),o=new r.kB,a=(i+1)*t,s=[],d=0,h=0;h<l.length;h++)if(l[h].length>0){var c=this.taglist[l[h]],u=new r.kB;if(null!=c){var p=c.entries;s=[];for(var g=0;g<p.length;g++){c=p[g];if(0==d==(null==o.get(c))&&(u.put(c,c),s.push(c),h==l.length-1&&s.length==a))return void n(s.slice(i*t,a),a,!0,l)}}else s=[];o=u,d++}var A=s.length;n(s.slice(i*t,(i+1)*t),A,!1,l)}else n([],null,null,l)},C.prototype.filterTags=function(e){if(null!=e){for(var t=e.split(" "),i=[],n={},l=0;l<t.length;l++)null==n[t[l]]&&(n[t[l]]="1",i.push(t[l]));return i.join(" ")}return null},C.prototype.cloneCell=function(e,t){var i=e.clone();return null!=t&&(i.value=t),i},C.prototype.addSearchPalette=function(e){var t=document.createElement("div");t.style.visibility="hidden",this.container.appendChild(t);var i=document.createElement("div");i.className="geSidebar",i.style.boxSizing="border-box",i.style.overflow="hidden",i.style.width="100%",i.style.padding="8px",i.style.paddingTop="14px",i.style.paddingBottom="0px",e||(i.style.display="none");var n=document.createElement("div");n.style.whiteSpace="nowrap",n.style.textOverflow="clip",n.style.paddingBottom="8px",n.style.cursor="default";var l=document.createElement("input");l.setAttribute("placeholder",r.xK.get("searchShapes")),l.setAttribute("type","text"),l.style.fontSize="12px",l.style.overflow="hidden",l.style.boxSizing="border-box",l.style.border="solid 1px #d5d5d5",l.style.borderRadius="4px",l.style.width="100%",l.style.outline="none",l.style.padding="6px",l.style.paddingRight="20px",n.appendChild(l);var o,s=document.createElement("img");s.setAttribute("src",C.prototype.searchImage),s.setAttribute("title",r.xK.get("search")),s.style.position="relative",s.style.left="-18px",r.HY.IS_QUIRKS?(l.style.height="28px",s.style.top="-4px"):s.style.top="1px",s.style.background="url('"+this.editorUi.editor.transparentImage+"')",n.appendChild(s),i.appendChild(n);var d=document.createElement("center"),h=r.vJ.button(r.xK.get("moreResults"),(function(){o()}));h.style.display="none",h.style.lineHeight="normal",h.style.marginTop="4px",h.style.marginBottom="8px",d.style.paddingTop="4px",d.style.paddingBottom="4px",d.appendChild(h),i.appendChild(d);var c="",u=!1,p=!1,g=0,A=new Object,m=12,f=r.vJ.bind(this,(function(){u=!1,this.currentSearch=null;for(var e=i.firstChild;null!=e;){var t=e.nextSibling;e!=n&&e!=d&&e.parentNode.removeChild(e),e=t}}));r.G8.addListener(s,"click",(function(){s.getAttribute("src")==a.lG.prototype.closeImage&&(s.setAttribute("src",C.prototype.searchImage),s.setAttribute("title",r.xK.get("search")),h.style.display="none",l.value="",c="",f()),l.focus()})),o=r.vJ.bind(this,(function(){if(m=4*Math.max(1,Math.floor(this.container.clientWidth/(this.thumbWidth+10))),this.hideTooltip(),""!=l.value){if(null!=d.parentNode&&(c!=l.value&&(f(),c=l.value,A=new Object,p=!1,g=0),!u&&!p)){h.setAttribute("disabled","true"),h.style.display="",h.style.cursor="wait",h.innerHTML=r.xK.get("loading")+"...",u=!0;var e=new Object;this.currentSearch=e,this.searchEntries(c,m,g,r.vJ.bind(this,(function(t,n,l,o){if(this.currentSearch==e){t=null!=t?t:[],u=!1,g++,this.insertSearchHint(i,c,m,g,t,n,l,o),0==t.length&&1==g&&(c=""),null!=d.parentNode&&d.parentNode.removeChild(d);for(var a=0;a<t.length;a++)try{var s=t[a]();null==A[s.innerHTML]&&(A[s.innerHTML]="1",i.appendChild(s))}catch(f){}l?(h.removeAttribute("disabled"),h.innerHTML=r.xK.get("moreResults")):(h.innerHTML=r.xK.get("reset"),h.style.display="none",p=!0),h.style.cursor="",i.appendChild(d)}})),r.vJ.bind(this,(function(){h.style.cursor=""})))}}else f(),l.value="",c="",A=new Object,h.style.display="none",p=!1,l.focus()})),r.G8.addListener(l,"keydown",r.vJ.bind(this,(function(e){13==e.keyCode&&(o(),r.G8.consume(e))}))),r.G8.addListener(l,"keyup",r.vJ.bind(this,(function(){""==l.value?(s.setAttribute("src",C.prototype.searchImage),s.setAttribute("title",r.xK.get("search"))):(s.setAttribute("src",a.lG.prototype.closeImage),s.setAttribute("title",r.xK.get("reset"))),""==l.value?(p=!0,h.style.display="none"):l.value!=c?(h.style.display="none",p=!1):u||(h.style.display=p?"none":"")}))),r.G8.addListener(l,"mousedown",(function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0})),r.G8.addListener(l,"selectstart",(function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}));var y=document.createElement("div");y.appendChild(i),this.container.appendChild(y),this.palettes.search=[t,y]},C.prototype.insertSearchHint=function(e,t,i,n,l){if(0==l.length&&1==n){var o=document.createElement("div");o.className="geTitle",o.style.cssText="background-color:transparent;border-color:transparent;color:gray;padding:6px 0px 0px 0px !important;margin:4px 8px 4px 8px;text-align:center;cursor:default !important",r.vJ.write(o,r.xK.get("noResultsFor",[t])),e.appendChild(o)}},C.prototype.addGeneralPalette=function(e){var t="line lines connector connectors connection connections arrow arrows ",i=[this.createVertexTemplateEntry("rounded=0;whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;",40,20,"Text","Text",null,null,"text textbox textarea label"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;",190,120,"<h1>Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>","Textbox",null,null,"text textbox textarea"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state"),this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;",120,60,"","Process",null,null,"process task"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;",120,60,"","Parallelogram"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;",120,80,"","Hexagon",null,null,"hexagon preparation"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer"),this.createVertexTemplateEntry("shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;",60,80,"","Cylinder",null,null,"cylinder data database"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80,"","Document"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Internal Storage"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80,"","Cube"),this.createVertexTemplateEntry("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Step"),this.createVertexTemplateEntry("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;",120,60,"","Trapezoid"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100,"","Note"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card"),this.createVertexTemplateEntry("shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80,"","Callout",null,null,"bubble chat thought speech message"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;",30,60,"Actor","Actor",!1,null,"user person human stickman"),this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;",100,80,"","Data Storage"),this.addEntry("curve",r.vJ.bind(this,(function(){var e=new r.QF("",new r.ym(0,0,50,50),"curved=1;endArrow=classic;html=1;");return e.geometry.setTerminalPoint(new r.IO(0,50),!0),e.geometry.setTerminalPoint(new r.IO(50,0),!1),e.geometry.points=[new r.IO(50,50),new r.IO(0,0)],e.geometry.relative=!0,e.edge=!0,this.createEdgeTemplateFromCells([e],e.geometry.width,e.geometry.height,"Curve")}))),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Arrow",null,t+"bidirectional"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;",50,50,"","Arrow",null,t+"directional directed"),this.createEdgeTemplateEntry("shape=link;html=1;",50,50,"","Link",null,t+"link"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line",null,t+"dashed undirected no"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line",null,t+"simple undirected plain blank no"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Connector",null,t+"bidirectional"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Directional Connector",null,t+"directional directed")];this.addPaletteFunctions("general",r.xK.get("general"),null==e||e,i)},C.prototype.addBasicPalette=function(){this.addStencilPalette("basic",r.xK.get("basic"),(0,g.p)("basic.xml"),";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")])},C.prototype.addMiscPalette=function(e){var t=this,i="line lines connector connectors connection connections arrow arrows ",n=[this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;",100,40,"Title","Title",null,null,"text heading title"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ul><li>Value 1</li><li>Value 2</li><li>Value 3</li></ul>","Unordered List"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ol><li>Value 1</li><li>Value 2</li><li>Value 3</li></ol>","Ordered List"),this.addDataEntry("table",180,120,"Table 1","7ZjJTsMwEIafJleUhZZybVgucAFewDTT2pLjiewpaXl6xolLVQFqWBJArZRKns2xv5H7y4myvFxdW1HJWyxAR9lllOUWkdpRucpB6yiNVRFlF1GaxvyL0qsPokkTjSthwVCXgrQteBJ6Ca2ndTha6+BwUlR+SOLRu6aSSl7mRcLDWiqC+0rMfLzmTbDPkbB0r569K2Z7hoaEMmBDzQy1FpVTzWRthlS6uBFrXNLmNRtrGpYHlmD14RYbV9jfNWAJZNecUquCZMiYtBhiCWohN2WBTSxc61i81m6J8SBAex9g1h0gL5mU0HcwI2EWXVi+ZVVYrB6EXQAFR4XKENjLJ6bhgm+utM5Ro0du0PgXEVYhqGG+qX1EIiyDYQOY10kbKKMpP4wpj09G0Yh3k7OdbG1+fLqlHI0jy432c4BwVIPr3MD0aw08/YH+nfbbP2N89rZ/324NMsq5xppNqYoCTFfG2V7G454Qjw4c8WoX7wDEx0fiO3/wAyA/O+pAbzqw3m3TELIwOZQTdPZrsnB+4IiHl4UkPiIfWheS5CgMfQvDZEBhSD5xY/7fZyjZf63u7dD0fKv++5B/QRwO5ia8h3mP6sDm9tNeE9v58vcC"),this.addDataEntry("table",180,120,"Table 2","7ZjBbqMwEIafhmuFISTptbTbS/eyrfbuBie2ZDzITEqyT79jMMlGWVTUBlqVSkTyjGeM+SbDLxPEab67t7yQPyETOojvgji1ANiM8l0qtA6iUGVBfBtEUUi/IPrRMcvq2bDgVhjskxA1CS9cb0XjaRwl7rV3lJIXboj82bluJOa0zVtGw0oqFI8FX7n5ih6CfCVyi4/qj3OFZK/AIFdGWJ+zAq15Uap6sSZCKp098D1ssb1Na7nobW4eKL/00Raqf02/f2FR7DoZ1C4P4F5ALtDuKaRSGUofsWw4hVKojWzTPLyQl41jc8g9IqWBp/p/wnF/wrRlVFz/EivkZtMH9jnMzELxxO1GoHcUoAwKe/dCNFpoa6V1ChpcTQwYdyOEwk9qsW5znwER8ha8B3NYtIaS3NBFmNLwKgkSepqUbHa06XLhFlMwJVr6J7g1BC+xEiX2LWD0tgLOLlC/2Vn9ftfDKGQXLaQxLvpYyHfXCIjpWkNFplRZJkxf2PGrsOcDsU46WV+2aT49690p5xHQzzvRx5NEf3j3j8B+8S0Rg0nE/rRMYyjGsrOVZl+0lRYfphjXnayTabEeXzFY2Ml+Pkn2Y0oGY9+aMbRmLEfUDHZ+EG+bafFFm4m9fiofrHvOD+Ut7eXEaH+AbnSfqK+nCX9A4SDz+DGxnjv51vgX"),this.addDataEntry("table title",180,120,"Table with Title 1","7ZhRb6MwDMc/Da8nAmPdvZbu9nJ7WfcFMnAhUohR4o12n34OpKumrmqlDXa6VqJS/Lcdkp8bWSFK82Z9Z2Vb32MJOkpvozS3iDSMmnUOWkdJrMooXURJEvMvSv4c8IreG7fSgqFTEpIh4UXqZxiUR/mkYVAdbXRQXS1bP6Tem85ranitC8HDrlYEy1YW3t/xTlhzJC0t1auX0piFAg1JZcCGpAK1lq1T/WyLPqJWuvwrN/hM2/dsrfmKs5dhMT5balUZHhe8Sz/lPOwCLMH6IIleChjuABsgu+GQTpVUh4ibgVZcg6rqbVoWROkGoXrP3YHlQWD7Oed0j/NBxLxkUlI/QEHSVKfQ3odZWmwfpa2AgtCi8qhuX5iGC9pKaZ2jRl8Tg8a/iLANTg2rbe4TEmETDBvAvE/aQ8nm/DCmPP6VRRnvJmdb7Gx+fLilHI0jy/8EPwdIRx04OrWAyecF3ATEoUzH6nn1DeW8GrecxvjoXTm/XClksiuNHZu1KkswpyJPj56Z65EQZ2eOeP0R7wTEry/E+4RkOuSzS1sYuy3MJmwLN+dygmY/1hZ+nzni6duCiC/Ip+4LQlwaw9iNQYgJO4PYv2j/p4dIHL9mj3ZqRr5l//uQf6A7nM1V+AjzEdsDm7svgr3vwwfDNw=="),this.addDataEntry("table title",180,150,"Table with Title 2","7Zhdb5swFIZ/DbcTHyVrbiFdb7Kbptq9Cw5YMj7IPi1kv37HYJK1FDWbQoOmSUSyz4dt3id+L/CitGrvNavL75Bz6UV3XpRqAOxHVZtyKb3QF7kXbbww9Onnhd8mskGX9WumucJzGsK+4YXJZ95HHtmT5H3U4EG6qClZbYfYZaOkxIrOuglo2JQC+a5mmc039CYUM8g07sRPG4p8CmSgkAnFtWvKQEpWG9GttukqSiHzLTvAMw77DLNkL1qeP0BjXLeGZkuLGde6p8V37qw2zaQoFI0zEsHumLiX5Bp5OylUF3Iq3XOoOOoDlTQix9JV3PZi+iUXRTm0xS7ITB8ojr0n3WngpH8fQzTCMEmAjoyCyQeeIVPFOTDGWuca6kemC44uUIOwUt29kBpHVYWUKUiwyBQouxFC7ZKS74feJ0CEaiDjhDku2okSJ/SQTKn/JfZiepuU5sFpTo8t15iCMqjpj2LX4Mxgww2eCzB8H+DBSewwfcQzugDOmxHO4KI8lbLVJ55/jMp/gwpI2r2EhqalyHOuztU8+vDS3MykcTzS+Ec3DP2Faz24U1+bGNpQqGLbd65mgNG+BvH7BZgLzupf8LO34JblZ6tP9LOvI5yX5bkcP1tdzc9uJ/1s4VrP52cTMK7gZ+v/fja3n60/0c8Cf8QzWvYl++s7tL6aoQXBpKMtXOz5HG2CxvyORtPTR4Uu9+qbwy8="),this.addDataEntry("crossfunctional cross-functional cross functional flowchart swimlane table",400,400,"Cross-Functional Flowchart","7ZhRb5swEMc/DY+bMCRt97jQpi+tVC2fwINbbMnYyD4C6aefjaHpBrTRlNCoTALJPp9t+P25O5kgTvL6XtOCPaoMRBDfBXGilULfyusEhAiikGdBfBtEUWjvIFqPjJJmNCyoBonHTIj8hB0VJXiL3dyYL+tSpsiVpM55LVSVMqrROxvci9bZMFq4JtKfzrRKGRfZA92rEjtr11tpVT1wCcYOhM5ViTKXry0G7RYb/uwWXDgDw9wCuSW2WTGOsClo6gYri8uvIGhheLN1s4KGtNSG7+AHGL+Os0JdUJm1nUJxiaDvdhZQt/EvJXHTvpTbjAq+lbadgnO1hhYSaIR6FHRjainfg8oB9d66VDxD5j0WoRcjZMC3DP8yUuMN25e5B91so5VuWMa4J+P3FJW2JtLXrOK5oNLJxZTmz/blqXhNp3mO5cpe9smS8OsyWNp5ie2TQ99ezl1joqRBTXmDAajBCgxejprHKBcNK7fvBPIz3hOSRCcQctET8olRA+8JmSopIW2j8GOD6Sji8TDxepT4C9yTE1+OEo/mQ5xcTYn8ahR5PB/k0c2UyK9HC8SbX/mnLBAnqAlD8XK+onDTE+/fw+TiQF9fTin4Nl/O0xYAEs6X9LR5n5Ae6S7xv1lr/yf+4cQ/pN75Ej/pH88/UZyQkRPzR6R+0j9Bz4f0xMm/f8adD+qzZn/bPfw5bMb++LH4Gw=="),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=#ffffff;overflow=fill;rounded=0;",280,160,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr style="background-color:#A7C942;color:#ffffff;border:1px solid #98bf21;"><th align="left">Title 1</th><th align="left">Title 2</th><th align="left">Title 3</th></tr><tr style="border:1px solid #98bf21;"><td>Value 1</td><td>Value 2</td><td>Value 3</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 4</td><td>Value 5</td><td>Value 6</td></tr><tr style="border:1px solid #98bf21;"><td>Value 7</td><td>Value 8</td><td>Value 9</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 10</td><td>Value 11</td><td>Value 12</td></tr></table>',"HTML Table 1"),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=none;overflow=fill;",180,140,'<table border="0" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 2"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",180,140,'<table border="1" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 3"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",160,140,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr><th align="center"><b>Title</b></th></tr><tr><td align="center">Section 1.1\nSection 1.2\nSection 1.3</td></tr><tr><td align="center">Section 2.1\nSection 2.2\nSection 2.3</td></tr></table>',"HTML Table 4"),this.addEntry("link hyperlink",r.vJ.bind(this,(function(){var e=new r.QF("Link",new r.ym(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return e.vertex=!0,this.graph.setLinkForCell(e,"https://www.draw.io"),this.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Link")}))),this.addEntry("timestamp date time text label",r.vJ.bind(this,(function(){var e=new r.QF("%date{ddd mmm dd yyyy HH:MM:ss}%",new r.ym(0,0,160,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return e.vertex=!0,this.graph.setAttributeForCell(e,"placeholders","1"),this.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Timestamp")}))),this.addEntry("variable placeholder metadata hello world text label",r.vJ.bind(this,(function(){var e=new r.QF("%name% Text",new r.ym(0,0,80,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return e.vertex=!0,this.graph.setAttributeForCell(e,"placeholders","1"),this.graph.setAttributeForCell(e,"name","Variable"),this.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Variable")}))),this.createVertexTemplateEntry("shape=ext;double=1;rounded=0;whiteSpace=wrap;html=1;",120,80,"","Double Rectangle",null,null,"rect rectangle box double"),this.createVertexTemplateEntry("shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;",120,80,"","Double Rounded Rectangle",null,null,"rounded rect rectangle box double"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;",100,60,"","Double Ellipse",null,null,"oval ellipse start end state double"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Square",null,null,"double square"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Circle",null,null,"double circle"),this.createEdgeTemplateEntry("rounded=0;comic=1;strokeWidth=2;endArrow=blockThin;html=1;fontFamily=Comic Sans MS;fontStyle=1;",50,50,"","Comic Arrow"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;comic=1;strokeWidth=2;fontFamily=Comic Sans MS;fontStyle=1;",120,60,"RECTANGLE","Comic Rectangle",!0,null,"comic rectangle rect box text retro"),this.createVertexTemplateEntry("rhombus;html=1;align=center;whiteSpace=wrap;comic=1;strokeWidth=2;fontFamily=Comic Sans MS;fontStyle=1;",100,100,"DIAMOND","Comic Diamond",!0,null,"comic diamond rhombus if condition decision conditional question test retro"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoRectangle;",150,90,"","Isometric Square",!0,null,"rectangle rect box iso isometric"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoCube;backgroundOutline=1;",90,100,"","Isometric Cube",!0,null,"cube box iso isometric"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;",50,100,"","Isometric Edge 1"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;elbow=vertical;",50,100,"","Isometric Edge 2"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;",20,120,"","Curly Bracket"),this.createVertexTemplateEntry("line;strokeWidth=2;html=1;",160,10,"","Horizontal Line"),this.createVertexTemplateEntry("line;strokeWidth=2;direction=south;html=1;",10,160,"","Vertical Line"),this.createVertexTemplateEntry("line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",160,10,"","Horizontal Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("line;strokeWidth=4;direction=south;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",10,160,"","Vertical Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;",120,20,"","Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;imageAspect=1;aspect=fixed;image="+A.A,52,61,"","Image (Fixed Aspect)",!1,null,"fixed image icon symbol"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;imageAspect=0;image="+A.A,50,60,"","Image (Variable Aspect)",!1,null,"strechted image icon symbol"),this.createVertexTemplateEntry("icon;html=1;image="+A.A,60,60,"Icon","Icon",!1,null,"icon image symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;image="+A.A,140,60,"Label","Label 1",null,null,"label image icon symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;align=center;verticalAlign=bottom;spacingLeft=0;spacingBottom=4;imageAlign=center;imageVerticalAlign=top;image="+A.A,120,80,"Label","Label 2",null,null,"label image icon symbol"),this.addEntry("shape group container",(function(){var e=new r.QF("Label",new r.ym(0,0,160,70),"html=1;whiteSpace=wrap;container=1;recursiveResize=0;collapsible=0;");e.vertex=!0;var i=new r.QF("",new r.ym(20,20,20,30),"triangle;html=1;whiteSpace=wrap;");return i.vertex=!0,e.insert(i),t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Shape Group")})),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;left=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;",50,50,"","Manual Line",null,i+"manual"),this.createEdgeTemplateEntry("shape=filledEdge;rounded=0;fixDash=1;endArrow=none;strokeWidth=10;fillColor=#ffffff;edgeStyle=orthogonalEdgeStyle;",60,40,"","Filled Edge"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=classic;html=1;",50,50,"","Horizontal Elbow",null,i+"elbow horizontal"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;",50,50,"","Vertical Elbow",null,i+"elbow vertical")];this.addPaletteFunctions("misc",r.xK.get("misc"),null==e||e,n)},C.prototype.addAdvancedPalette=function(e){this.addPaletteFunctions("advanced",r.xK.get("advanced"),null!=e&&e,this.createAdvancedShapes())},C.prototype.createAdvancedShapes=function(){var e=this,t=new r.QF("List Item",new r.ym(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return t.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",(function(){return e.createVertexTemplateFromData("zZXRaoMwFIafJpcDjbNrb2233rRQ8AkyPdPQaCRJV+3T7yTG2rUVBoOtgpDzn/xJzncCIdGyateKNeVW5iBI9EqipZLS9KOqXYIQhAY8J9GKUBrgT+jbRDZ02aBhCmrzEwPtDZ9MHKBXdkpmoDWKCVN9VptO+Kw+8kqwGqMkK7nIN6yTB7uTNizbD1FSSsVPsjYMC1qFKHxwIZZSSIVxLZ1/nJNar5+oQPMT7IYCrqUta1ENzuqGaeOFTArBGs3f3Vmtoo2Se7ja1h00kSoHK4bBIKUNy3hdoPYU0mF91i9mT8EEL2ocZ3gKa00ayWujLZY4IfHKFonVDLsRGgXuQ90zBmWgneyTk3yT1iArMKrDKUeem9L3ajHrbSXwohxsQd/ggOleKM7ese048J2/fwuim1uQGmhQCW8vQMkacP3GCQgBFMftHEsr7cYYe95CnmKTPMFbYD8CQ++DGQy+/M5X4ku5wHYmdIktfvk9tecpavThqS3m/0YtnqIWPTy1cD77K2wYjo+Ay317I74A",296,100,"Process Bar")})),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",(function(){var i=new r.QF("List",new r.ym(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return i.vertex=!0,i.insert(e.cloneCell(t,"Item 1")),i.insert(e.cloneCell(t,"Item 2")),i.insert(e.cloneCell(t,"Item 3")),e.createVertexTemplateFromCells([i],i.geometry.width,i.geometry.height,"List")})),this.addEntry("list item entry value group erd table",(function(){return e.createVertexTemplateFromCells([e.cloneCell(t,"List Item")],t.geometry.width,t.geometry.height,"List Item")}))]},C.prototype.addUmlPalette=function(e){var t=this,i=new r.QF("+ field: type",new r.ym(0,0,100,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");i.vertex=!0;var n=new r.QF("",new r.ym(0,0,40,8),"line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");n.vertex=!0;var l="uml static class ",o=[this.createVertexTemplateEntry("html=1;",110,50,"Object","Object",null,null,l+"object instance"),this.createVertexTemplateEntry("html=1;",110,50,"&laquo;interface&raquo;<br><b>Name</b>","Interface",null,null,l+"interface object instance annotated annotation"),this.addEntry(l+"object instance",(function(){var e=new r.QF("Classname",new r.ym(0,0,160,90),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return e.vertex=!0,e.insert(i.clone()),e.insert(n.clone()),e.insert(t.cloneCell(i,"+ method(type): type")),t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Class")})),this.addEntry(l+"section subsection",(function(){var e=new r.QF("Classname",new r.ym(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return e.vertex=!0,e.insert(i.clone()),e.insert(i.clone()),e.insert(i.clone()),t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Class 2")})),this.addEntry(l+"item member method function variable field attribute label",(function(){return t.createVertexTemplateFromCells([t.cloneCell(i,"+ item: attribute")],i.geometry.width,i.geometry.height,"Item 1")})),this.addEntry(l+"item member method function variable field attribute label",(function(){var e=new r.QF("item: attribute",new r.ym(0,0,120,i.geometry.height),"label;fontStyle=0;strokeColor=none;fillColor=none;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;image="+t.gearImage);return e.vertex=!0,t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Item 2")})),this.addEntry(l+"divider hline line separator",(function(){return t.createVertexTemplateFromCells([n.clone()],n.geometry.width,n.geometry.height,"Divider")})),this.addEntry(l+"spacer space gap separator",(function(){var e=new r.QF("",new r.ym(0,0,20,14),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=4;spacingRight=4;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");return e.vertex=!0,t.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Spacer")})),this.createVertexTemplateEntry("text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",80,26,"Title","Title",null,null,l+"title label"),this.addEntry(l+"component",(function(){var e=new r.QF("&laquo;Annotation&raquo;<br/><b>Component</b>",new r.ym(0,0,180,90),"html=1;dropTarget=0;");e.vertex=!0;var i=new r.QF("",new r.ym(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;");return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new r.IO(-27,7),e.insert(i),t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Component")})),this.addEntry(l+"component",(function(){var e=new r.QF('<p style="margin:0px;margin-top:6px;text-align:center;"><b>Component</b></p><hr/><p style="margin:0px;margin-left:8px;">+ Attribute1: Type<br/>+ Attribute2: Type</p>',new r.ym(0,0,180,90),"align=left;overflow=fill;html=1;dropTarget=0;");e.vertex=!0;var i=new r.QF("",new r.ym(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;");return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new r.IO(-24,4),e.insert(i),t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Component with Attributes")})),this.createVertexTemplateEntry("verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;",180,120,"Block","Block",null,null,l+"block"),this.createVertexTemplateEntry("shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;",100,50,"Module","Module",null,null,l+"module component"),this.createVertexTemplateEntry("shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;",70,50,"package","Package",null,null,l+"package"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;",160,90,'<p style="margin:0px;margin-top:4px;text-align:center;text-decoration:underline;"><b>Object:Type</b></p><hr/><p style="margin:0px;margin-left:8px;">field1 = value1<br/>field2 = value2<br>field3 = value3</p>',"Object",null,null,l+"object instance"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;",180,90,'<div style="box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;">Tablename</div><table style="width:100%;font-size:1em;" cellpadding="2" cellspacing="0"><tr><td>PK</td><td>uniqueId</td></tr><tr><td>FK1</td><td>foreignKey</td></tr><tr><td></td><td>fieldname</td></tr></table>',"Entity",null,null,"er entity table"),this.addEntry(l+"object instance",(function(){var e=new r.QF('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div>',new r.ym(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return e.vertex=!0,t.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Class 3")})),this.addEntry(l+"object instance",(function(){var e=new r.QF('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div><hr size="1"/><div style="height:2px;"></div>',new r.ym(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return e.vertex=!0,t.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Class 4")})),this.addEntry(l+"object instance",(function(){var e=new r.QF('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method(): Type</p>',new r.ym(0,0,160,90),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return e.vertex=!0,t.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Class 5")})),this.addEntry(l+"object instance",(function(){var e=new r.QF('<p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interface</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field1: Type<br/>+ field2: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method1(Type): Type<br/>+ method2(Type, Type): Type</p>',new r.ym(0,0,190,140),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return e.vertex=!0,t.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Interface 2")})),this.createVertexTemplateEntry("shape=providedRequiredInterface;html=1;verticalLabelPosition=bottom;",20,20,"","Provided/Required Interface",null,null,"uml provided required interface lollipop notation"),this.createVertexTemplateEntry("shape=requiredInterface;html=1;verticalLabelPosition=bottom;",10,20,"","Required Interface",null,null,"uml required interface lollipop notation"),this.addEntry("uml lollipop notation provided required interface",(function(){return t.createVertexTemplateFromData("zVTBrptADPyavVYEkt4b0uQd3pMq5dD2uAUD27dgZJwE8vX1spsQlETtpVWRIjFjex3PmFVJWvc70m31hjlYlXxWSUqI7N/qPgVrVRyZXCUbFceR/FS8fRJdjNGo1QQN/0lB7AuO2h7AM57oeLCBIDw0Obj8SCVrJK6wxEbbV8RWyIWQP4F52Juzq9AHRqEqrm2IQpN/IsKTwAYb8MzWWBuO9B0hL2E2BGsqIQyxvJ9rzApD7QBrYBokhcBqNsf5UbrzsLzmXUu/oJET42jwGat5QYcHyiDkTDLKy03TiRrFfSx08m+FrrQtUkOZvZdbFKThmwMfVhf4fQ43/W3uZriiPPT+KKhjwnf4anKuQv//wsg+NPJ7/9d9Xf7eVykwbeeMOFWGYd/qzEVO8tHP/Suw4a2ujXV/+gXsEdhkOgSC8os44BQt0tggicZHeG1N2QiXibhAV48epRayEDd8MT7Ct06TUaXVWq027tCuhcx5VZjebeeaoDNn/WMcb/p+j0AM/dNr6InLl4Lgzylsk6OCgRWYsuI592gNZh5OhgmcblPv7+1l+ws=",40,10,"Lollipop Notation")})),this.createVertexTemplateEntry("shape=umlBoundary;whiteSpace=wrap;html=1;",100,80,"Boundary Object","Boundary Object",null,null,"uml boundary object"),this.createVertexTemplateEntry("ellipse;shape=umlEntity;whiteSpace=wrap;html=1;",80,80,"Entity Object","Entity Object",null,null,"uml entity object"),this.createVertexTemplateEntry("ellipse;shape=umlControl;whiteSpace=wrap;html=1;",70,80,"Control Object","Control Object",null,null,"uml control object"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;",30,60,"Actor","Actor",!1,null,"uml actor"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",140,70,"Use Case","Use Case",null,null,"uml use case usecase"),this.addEntry("uml activity state start",(function(){var e=new r.QF("",new r.ym(0,0,30,30),"ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;");e.vertex=!0;var i=new r.QF("",new r.ym(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return i.geometry.setTerminalPoint(new r.IO(15,90),!1),i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!0),t.createVertexTemplateFromCells([e,i],30,90,"Start")})),this.addEntry("uml activity state",(function(){var e=new r.QF("Activity",new r.ym(0,0,120,40),"rounded=1;whiteSpace=wrap;html=1;arcSize=40;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;");e.vertex=!0;var i=new r.QF("",new r.ym(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return i.geometry.setTerminalPoint(new r.IO(60,100),!1),i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!0),t.createVertexTemplateFromCells([e,i],120,100,"Activity")})),this.addEntry("uml activity composite state",(function(){var e=new r.QF("Composite State",new r.ym(0,0,160,60),"swimlane;html=1;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=0;resizeLast=1;container=0;fontColor=#000000;collapsible=0;rounded=1;arcSize=30;strokeColor=#ff0000;fillColor=#ffffc0;swimlaneFillColor=#ffffc0;dropTarget=0;");e.vertex=!0;var i=new r.QF("Subtitle",new r.ym(0,0,200,26),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;fontColor=#000000;");i.vertex=!0,e.insert(i);var n=new r.QF("",new r.ym(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return n.geometry.setTerminalPoint(new r.IO(80,120),!1),n.geometry.relative=!0,n.edge=!0,e.insertEdge(n,!0),t.createVertexTemplateFromCells([e,n],160,120,"Composite State")})),this.addEntry("uml activity condition",(function(){var e=new r.QF("Condition",new r.ym(0,0,80,40),"rhombus;whiteSpace=wrap;html=1;fillColor=#ffffc0;strokeColor=#ff0000;");e.vertex=!0;var i=new r.QF("no",new r.ym(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");i.geometry.setTerminalPoint(new r.IO(180,20),!1),i.geometry.relative=!0,i.geometry.x=-1,i.edge=!0,e.insertEdge(i,!0);var n=new r.QF("yes",new r.ym(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;");return n.geometry.setTerminalPoint(new r.IO(40,100),!1),n.geometry.relative=!0,n.geometry.x=-1,n.edge=!0,e.insertEdge(n,!0),t.createVertexTemplateFromCells([e,i,n],180,100,"Condition")})),this.addEntry("uml activity fork join",(function(){var e=new r.QF("",new r.ym(0,0,200,10),"shape=line;html=1;strokeWidth=6;strokeColor=#ff0000;");e.vertex=!0;var i=new r.QF("",new r.ym(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return i.geometry.setTerminalPoint(new r.IO(100,80),!1),i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!0),t.createVertexTemplateFromCells([e,i],200,80,"Fork/Join")})),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;",30,30,"","End",null,null,"uml activity state end"),this.createVertexTemplateEntry("shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;",100,300,":Object","Lifeline",null,null,"uml sequence participant lifeline"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlActor;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",20,300,"","Actor Lifeline",null,null,"uml sequence participant lifeline actor"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlBoundary;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",50,300,"","Boundary Lifeline",null,null,"uml sequence participant lifeline boundary"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlEntity;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",40,300,"","Entity Lifeline",null,null,"uml sequence participant lifeline entity"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlControl;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",40,300,"","Control Lifeline",null,null,"uml sequence participant lifeline control"),this.createVertexTemplateEntry("shape=umlFrame;whiteSpace=wrap;html=1;",300,200,"frame","Frame",null,null,"uml sequence frame"),this.createVertexTemplateEntry("shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;",30,30,"","Destruction",null,null,"uml sequence destruction destroy"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;",100,70,"Note","Note",null,null,"uml note"),this.addEntry("uml sequence invoke invocation call activation",(function(){var e=new r.QF("",new r.ym(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");e.vertex=!0;var i=new r.QF("dispatch",new r.ym(0,0,0,0),"html=1;verticalAlign=bottom;startArrow=oval;endArrow=block;startSize=8;");return i.geometry.setTerminalPoint(new r.IO(-60,0),!0),i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!1),t.createVertexTemplateFromCells([e,i],10,80,"Found Message")})),this.addEntry("uml sequence invoke call delegation synchronous invocation activation",(function(){var e=new r.QF("",new r.ym(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");e.vertex=!0;var i=new r.QF("dispatch",new r.ym(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;");i.geometry.setTerminalPoint(new r.IO(-70,0),!0),i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!1);var n=new r.QF("return",new r.ym(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;");return n.geometry.setTerminalPoint(new r.IO(-70,76),!1),n.geometry.relative=!0,n.edge=!0,e.insertEdge(n,!0),t.createVertexTemplateFromCells([e,i,n],10,80,"Synchronous Invocation")})),this.addEntry("uml sequence self call recursion delegation activation",(function(){var e=new r.QF("",new r.ym(0,20,10,40),"html=1;points=[];perimeter=orthogonalPerimeter;");e.vertex=!0;var i=new r.QF("self call",new r.ym(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;");return i.geometry.setTerminalPoint(new r.IO(5,0),!0),i.geometry.points=[new r.IO(30,0)],i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!1),t.createVertexTemplateFromCells([e,i],10,60,"Self Call")})),this.addEntry("uml sequence invoke call delegation callback activation",(function(){return t.createVertexTemplateFromData("xZRNT8MwDIZ/Ta6oaymD47rBTkiTuMAxW6wmIm0q19s6fj1OE3V0Y2iCA4dK8euP2I+riGxedUuUjX52CqzIHkU2R+conKpuDtaKNDFKZAuRpgl/In264J303qSRCDVdk5CGhJ20WwhKEFo62ChoqritxURkReNMTa2X80LkC68AmgoIkEWHpF3pamlXR7WIFwASdBeb7KXY4RIc5+KBQ/ZGkY4RYY5Egyl1zLqLmmyDXQ6Zx4n5EIf+HkB2BmAjrV3LzftPIPw4hgNn1pQ1a2tH5Cp2QK1miG7vNeu4iJe4pdeY2BtvbCQDGlAljMCQxBJotJ8rWCFYSWY3LvUdmZi68rvkkLiU6QnL1m1xAzHoBOdw61WEb88II9AW67/ydQ2wq1Cy1aAGvOrFfPh6997qDA3g+dxzv3nIL6MPU/8T+kMw8+m4QPgdfrEJNo8PSQj/+s58Ag==",10,60,"Callback")})),this.createVertexTemplateEntry("html=1;points=[];perimeter=orthogonalPerimeter;",10,80,"","Activation",null,null,"uml sequence activation"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;",60,0,"dispatch","Found Message 1",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;",80,0,"dispatch","Found Message 2",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;endArrow=block;",80,0,"dispatch","Message",null,"uml sequence message call invoke dispatch"),this.addEntry("uml sequence return message",(function(){var e=new r.QF("return",new r.ym(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;");return e.geometry.setTerminalPoint(new r.IO(80,0),!0),e.geometry.setTerminalPoint(new r.IO(0,0),!1),e.geometry.relative=!0,e.edge=!0,t.createEdgeTemplateFromCells([e],80,0,"Return")})),this.addEntry("uml relation",(function(){var e=new r.QF("name",new r.ym(0,0,0,0),"endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;");e.geometry.setTerminalPoint(new r.IO(0,0),!0),e.geometry.setTerminalPoint(new r.IO(160,0),!1),e.geometry.relative=!0,e.geometry.x=-1,e.edge=!0;var i=new r.QF("1",new r.ym(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;");return i.geometry.relative=!0,i.setConnectable(!1),i.vertex=!0,e.insert(i),t.createEdgeTemplateFromCells([e],160,0,"Relation 1")})),this.addEntry("uml association",(function(){var e=new r.QF("",new r.ym(0,0,0,0),"endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;");e.geometry.setTerminalPoint(new r.IO(0,0),!0),e.geometry.setTerminalPoint(new r.IO(160,0),!1),e.geometry.relative=!0,e.edge=!0;var i=new r.QF("parent",new r.ym(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;");i.geometry.relative=!0,i.setConnectable(!1),i.vertex=!0,e.insert(i);var n=new r.QF("child",new r.ym(1,0,0,0),"resizable=0;html=1;align=right;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;");return n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,e.insert(n),t.createEdgeTemplateFromCells([e],160,0,"Association 1")})),this.addEntry("uml aggregation",(function(){var e=new r.QF("1",new r.ym(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return e.geometry.setTerminalPoint(new r.IO(0,0),!0),e.geometry.setTerminalPoint(new r.IO(160,0),!1),e.geometry.relative=!0,e.geometry.x=-1,e.geometry.y=3,e.edge=!0,t.createEdgeTemplateFromCells([e],160,0,"Aggregation 1")})),this.addEntry("uml composition",(function(){var e=new r.QF("1",new r.ym(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return e.geometry.setTerminalPoint(new r.IO(0,0),!0),e.geometry.setTerminalPoint(new r.IO(160,0),!1),e.geometry.relative=!0,e.geometry.x=-1,e.geometry.y=3,e.edge=!0,t.createEdgeTemplateFromCells([e],160,0,"Composition 1")})),this.addEntry("uml relation",(function(){var e=new r.QF("Relation",new r.ym(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;");e.geometry.setTerminalPoint(new r.IO(0,0),!0),e.geometry.setTerminalPoint(new r.IO(160,0),!1),e.geometry.relative=!0,e.edge=!0;var i=new r.QF("0..n",new r.ym(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=top;labelBackgroundColor=#ffffff;fontSize=10;");i.geometry.relative=!0,i.setConnectable(!1),i.vertex=!0,e.insert(i);var n=new r.QF("1",new r.ym(1,0,0,0),"resizable=0;html=1;align=right;verticalAlign=top;labelBackgroundColor=#ffffff;fontSize=10;");return n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,e.insert(n),t.createEdgeTemplateFromCells([e],160,0,"Relation 2")})),this.createEdgeTemplateEntry("endArrow=open;endSize=12;dashed=1;html=1;",160,0,"Use","Dependency",null,"uml dependency use"),this.createEdgeTemplateEntry("endArrow=block;endSize=16;endFill=0;html=1;",160,0,"Extends","Generalization",null,"uml generalization extend"),this.createEdgeTemplateEntry("endArrow=block;startArrow=block;endFill=1;startFill=1;html=1;",160,0,"","Association 2",null,"uml association"),this.createEdgeTemplateEntry("endArrow=open;startArrow=circlePlus;endFill=0;startFill=0;endSize=8;html=1;",160,0,"","Inner Class",null,"uml inner class"),this.createEdgeTemplateEntry("endArrow=open;startArrow=cross;endFill=0;startFill=0;endSize=8;startSize=10;html=1;",160,0,"","Terminate",null,"uml terminate"),this.createEdgeTemplateEntry("endArrow=block;dashed=1;endFill=0;endSize=12;html=1;",160,0,"","Implementation",null,"uml realization implementation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=0;endSize=24;html=1;",160,0,"","Aggregation 2",null,"uml aggregation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=1;endSize=24;html=1;",160,0,"","Composition 2",null,"uml composition"),this.createEdgeTemplateEntry("endArrow=open;endFill=1;endSize=12;html=1;",160,0,"","Association 3",null,"uml association")];this.addPaletteFunctions("uml",r.xK.get("uml"),e||!1,o)},C.prototype.addBpmnPalette=function(){var e=this,t=[this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;",120,80,"Task","Process",null,null,"bpmn task process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;",120,80,"Transaction","Transaction",null,null,"bpmn transaction"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;dashed=1;dashPattern=1 4;",120,80,"Event\nSub-Process","Event Sub-Process",null,null,"bpmn event subprocess sub process sub-process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;strokeWidth=3;",120,80,"Call Activity","Call Activity",null,null,"bpmn call activity"),this.addEntry("bpmn subprocess sub process sub-process",(function(){var t=new r.QF("Sub-Process",new r.ym(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");t.vertex=!0;var i=new r.QF("",new r.ym(.5,1,14,14),"html=1;shape=plus;outlineConnect=0;");return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new r.IO(-7,-14),t.insert(i),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Sub-Process")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","loop","subprocess sub process sub-process looped").join(" "),(function(){var t=new r.QF("Looped\nSub-Process",new r.ym(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");t.vertex=!0;var i=new r.QF("",new r.ym(.5,1,14,14),"html=1;shape=mxgraph.bpmn.loop;outlineConnect=0;");i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new r.IO(-15,-14),t.insert(i);var n=new r.QF("",new r.ym(.5,1,14,14),"html=1;shape=plus;");return n.vertex=!0,n.geometry.relative=!0,n.geometry.offset=new r.IO(1,-14),t.insert(n),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Looped Sub-Process")})),this.addEntry("bpmn receive task",(function(){var t=new r.QF("Receive",new r.ym(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");t.vertex=!0;var i=new r.QF("",new r.ym(0,0,20,14),"html=1;shape=message;outlineConnect=0;");return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new r.IO(7,7),t.insert(i),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Receive Task")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","user_task").join(" "),(function(){var t=new r.QF("User",new r.ym(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");t.vertex=!0;var i=new r.QF("",new r.ym(0,0,14,14),"html=1;shape=mxgraph.bpmn.user_task;outlineConnect=0;");i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new r.IO(7,7),t.insert(i);var n=new r.QF("",new r.ym(.5,1,14,14),"html=1;shape=plus;outlineConnect=0;");return n.vertex=!0,n.geometry.relative=!0,n.geometry.offset=new r.IO(-7,-14),t.insert(n),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"User Task")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),(function(){var t=new r.QF("Process",new r.ym(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");t.vertex=!0;var i=new r.QF("",new r.ym(1,1,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;outlineConnect=0;");return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new r.IO(-40,-15),t.insert(i),e.createVertexTemplateFromCells([t],120,95,"Attached Timer Event 1")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),(function(){var t=new r.QF("Process",new r.ym(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");t.vertex=!0;var i=new r.QF("",new r.ym(1,0,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;labelPosition=right;labelBackgroundColor=#ffffff;align=left;outlineConnect=0;");return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new r.IO(-15,10),t.insert(i),e.createVertexTemplateFromCells([t],135,80,"Attached Timer Event 2")})),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;startSize=20;",320,240,"Pool","Pool",null,null,"bpmn pool"),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;swimlaneLine=0;",300,120,"Lane","Lane",null,null,"bpmn lane"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;rounded=0;",60,50,"","Conversation",null,null,"bpmn conversation"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;strokeWidth=4;rounded=0;",60,50,"","Call Conversation",null,null,"bpmn call conversation"),this.addEntry("bpmn subconversation sub conversation sub-conversation",(function(){var t=new r.QF("",new r.ym(0,0,60,50),"shape=hexagon;whiteSpace=wrap;html=1;perimeter=hexagonPerimeter;rounded=0;dropTarget=0;");t.vertex=!0;var i=new r.QF("",new r.ym(.5,1,14,14),"html=1;shape=plus;");return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new r.IO(-7,-14),t.insert(i),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Sub-Conversation")})),this.addEntry("bpmn data object",(function(){var t=new r.QF("",new r.ym(0,0,40,60),"shape=note;whiteSpace=wrap;size=16;html=1;dropTarget=0;");t.vertex=!0;var i=new r.QF("",new r.ym(0,0,14,14),"html=1;shape=singleArrow;arrowWidth=0.4;arrowSize=0.4;outlineConnect=0;");i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new r.IO(2,2),t.insert(i);var n=new r.QF("",new r.ym(.5,1,14,14),"html=1;whiteSpace=wrap;shape=parallelMarker;outlineConnect=0;");return n.vertex=!0,n.geometry.relative=!0,n.geometry.offset=new r.IO(-7,-14),t.insert(n),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Data Object")})),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"bpmn data store"),this.createVertexTemplateEntry("shape=plus;html=1;outlineConnect=0;",14,14,"","Sub-Process Marker",null,null,"bpmn subprocess sub process sub-process marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.loop;html=1;outlineConnect=0;",14,14,"","Loop Marker",null,null,"bpmn loop marker"),this.createVertexTemplateEntry("shape=parallelMarker;html=1;outlineConnect=0;",14,14,"","Parallel MI Marker",null,null,"bpmn parallel mi marker"),this.createVertexTemplateEntry("shape=parallelMarker;direction=south;html=1;outlineConnect=0;",14,14,"","Sequential MI Marker",null,null,"bpmn sequential mi marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.ad_hoc;fillColor=#000000;html=1;outlineConnect=0;",14,14,"","Ad Hoc Marker",null,null,"bpmn ad hoc marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.compensation;html=1;outlineConnect=0;",14,14,"","Compensation Marker",null,null,"bpmn compensation marker"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;outlineConnect=0;fillColor=#000000;strokeColor=#ffffff;strokeWidth=2;",40,30,"","Send Task",null,null,"bpmn send task"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;outlineConnect=0;",40,30,"","Receive Task",null,null,"bpmn receive task"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.user_task;html=1;outlineConnect=0;",14,14,"","User Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.manual_task;html=1;outlineConnect=0;",14,14,"","Manual Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.business_rule_task;html=1;outlineConnect=0;",14,14,"","Business Rule Task",null,null,this.getTagsForStencil("mxgraph.bpmn","business_rule_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.service_task;html=1;outlineConnect=0;",14,14,"","Service Task",null,null,this.getTagsForStencil("mxgraph.bpmn","service_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.script_task;html=1;outlineConnect=0;",14,14,"","Script Task",null,null,this.getTagsForStencil("mxgraph.bpmn","script_task").join(" ")),this.createVertexTemplateEntry("html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;",50,100,"","Annotation",null,null,this.getTagsForStencil("bpmn","annotation_1","bpmn business process model ").join(" ")),this.addDataEntry("container swimlane pool horizontal",480,380,"Horizontal Pool 1","zZRLbsIwEIZP4709TlHXhJYNSEicwCIjbNWJkWNKwumZxA6IlrRUaisWlmb+eX8LM5mXzdyrnV66Ai2TL0zm3rkQrbLJ0VoG3BRMzhgAp8fgdSQq+ijfKY9VuKcAYsG7snuMyso5G8U6tDaJ9cGUVlXkTXUoacuZIHOjjS0WqnX7blYd1OZt8KYea3PE1bCI+CAtVUMq7/o5b46uCmroSn18WFMm+XCdse5GpLq0OPqAzejxvZQun6MrMfiWUg6mCDpmZM8RENdotjqVyUFUdRS259oLSzISztto5Se0i44gcHEn3i9A/IQB3GbQpmi69DskAn4BSTaGBB4Jicj+k8nTGBP5SExg8odMyL38eH3s6kM8AQ=="),this.addDataEntry("container swimlane pool horizontal",480,360,"Horizontal Pool 2","zZTBbsIwDIafJvfU6dDOlI0LSEg8QUQtEi1tUBJGy9PPbcJQWTsxaZs4VLJ//07sT1WYKKpm6eRBrW2JhokXJgpnbYhR1RRoDAOuSyYWDIDTx+B1opr1VX6QDutwTwPEhndpjhiVjbUmij60Jon+pCsja8rmKlQ05SKjcKe0KVeytcfuLh/k7u2SzR16fcbNZZDsRlrLhlTenWedPts6SJMEOseFLTkph6Fj212RbGlwdAGbyeV7KW2+RFthcC1ZTroMKjry5wiIK9R7ldrELInSR2H/2XtlSUHCOY5WfEG76ggCz+7E+w2InzCAcQapIf0fAySzESQZ/AKSfAoJPCKS9mbzf0H0NIVIPDAiyP8QEaXX97CvDZ7LDw=="),this.createVertexTemplateEntry("swimlane;startSize=20;horizontal=0;",320,120,"Lane","Horizontal Swimlane",null,null,"swimlane lane pool"),this.addDataEntry("container swimlane pool horizontal",360,480,"Vertical Pool 1","xZRBbsIwEEVP4709ThFrQssGJKSewCIjbNXGyDEl4fSdxKa0NJFQVTULSzP/e+T5b2EmS9esgjrqja/QMvnMZBm8j6lyTYnWMuCmYnLJADgdBi8jruhdflQBD/GRAUgD78qeMClb720S69jaLNZn46w6ULfQ0dGWS0HlThtbrVXrT91bdVS7t2u3CFibC26vi4g7aaMaUjmpNBbiKxnUQyfkjTBEbEZT9VKOtELvMIaWrpxNFXW6IWcpOddo9jqPFfMsqjoJ+8/ZGyQqMqdhZvIHs3WHBrh4kNvvIsNw5Da7OdgXAgKGCMz+gEAxRgCmINDcxZ2CyNMYETkhESj+jwi1t1+r9759ah8="),this.addDataEntry("container swimlane pool vertical",380,480,"Vertical Pool 2","xZTPbsIwDMafJvf86dDOlI0LSEg8QUQtEi1pUBJGy9PPbdJ1G1TqhXGoZH/219g/RSGitM3ay5PaugoMEW9ElN65mCLblGAM4VRXRKwI5xQ/wt8nqqyv0pP0UMc5Bp4Mn9KcISk750wSQ2xNFsNFWyNrzJYqWpxyxTA8KG2qjWzduTsrRHn4GLKlh6CvsBsGYX+krWxQpaiizcc9FjDnnaCc11dXR2lyxyjsuyPy3/Lg4CM0k8v3Ut58Dc5C9C22XHQVVeoQrwkQVaCPKtuKQZQhCcdv78gSg4zzPlpxg3bTEeSUzcR7Q2bWyvz+ytmQr8NPAow/ikAxRYA/kQAr/hPByxQC8cxLsHggAkzH56uv/XrdvgA="),this.createVertexTemplateEntry("swimlane;startSize=20;",120,320,"Lane","Vertical Swimlane",null,null,"swimlane lane pool"),this.createVertexTemplateEntry("rounded=1;arcSize=10;dashed=1;strokeColor=#000000;fillColor=none;gradientColor=none;dashPattern=8 3 1 3;strokeWidth=2;",200,200,"","Group",null,null,this.getTagsForStencil("bpmn","group","bpmn business process model ").join(" ")),this.createEdgeTemplateEntry("endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Sequence Flow",null,"bpmn sequence flow"),this.createEdgeTemplateEntry("startArrow=dash;startSize=8;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Default Flow",null,"bpmn default flow"),this.createEdgeTemplateEntry("startArrow=diamondThin;startFill=0;startSize=14;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Conditional Flow",null,"bpmn conditional flow"),this.createEdgeTemplateEntry("startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;",100,0,"","Message Flow 1",null,"bpmn message flow"),this.addEntry("bpmn message flow",(function(){var t=new r.QF("",new r.ym(0,0,0,0),"startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;");t.geometry.setTerminalPoint(new r.IO(0,0),!0),t.geometry.setTerminalPoint(new r.IO(100,0),!1),t.geometry.relative=!0,t.edge=!0;var i=new r.QF("",new r.ym(0,0,20,14),"shape=message;html=1;outlineConnect=0;");return i.geometry.relative=!0,i.vertex=!0,i.geometry.offset=new r.IO(-10,-7),t.insert(i),e.createEdgeTemplateFromCells([t],100,0,"Message Flow 2")})),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,"bpmn link")];this.addPaletteFunctions("bpmn","BPMN "+r.xK.get("general"),!1,t)},C.prototype.createTitle=function(e){var t=document.createElement("a");return t.setAttribute("title",r.xK.get("sidebarTooltip")),t.className="geTitle",r.vJ.write(t,e),t},C.prototype.createThumb=function(e,t,i,n,l,o,s){this.graph.labelsVisible=null==o||o;var d=r.HY.NO_FO;r.HY.NO_FO=a.KE.prototype.originalNoForeignObject,this.graph.view.scaleAndTranslate(1,0,0),this.graph.addCells(e);var h=this.graph.getGraphBounds(),c=Math.floor(100*Math.min((t-2*this.thumbBorder)/h.width,(i-2*this.thumbBorder)/h.height))/100;this.graph.view.scaleAndTranslate(c,Math.floor((t-h.width*c)/2/c-h.x),Math.floor((i-h.height*c)/2/c-h.y));var u=null;if(this.graph.dialect!=r.fV.DIALECT_SVG||r.HY.NO_FO||null==this.graph.view.getCanvas().ownerSVGElement?((u=this.graph.container.cloneNode(!1)).innerHTML=this.graph.container.innerHTML,(r.HY.IS_QUIRKS||8==document.documentMode)&&(u.firstChild.style.overflow="visible")):u=this.graph.view.getCanvas().ownerSVGElement.cloneNode(!0),this.graph.getModel().clear(),r.HY.NO_FO=d,r.HY.IS_IE6&&(n.style.backgroundImage="url("+this.editorUi.editor.transparentImage+")"),u.style.position="relative",u.style.overflow="hidden",u.style.left=this.thumbBorder+"px",u.style.top=this.thumbBorder+"px",u.style.width=t+"px",u.style.height=i+"px",u.style.visibility="",u.style.minWidth="",u.style.minHeight="",n.appendChild(u),this.sidebarTitles&&null!=l&&0!=s){var p=r.HY.IS_QUIRKS?2*this.thumbPadding+2:0;n.style.height=this.thumbHeight+p+this.sidebarTitleSize+8+"px";var g=document.createElement("div");g.style.fontSize=this.sidebarTitleSize+"px",g.style.color="#303030",g.style.textAlign="center",g.style.whiteSpace="nowrap",r.HY.IS_IE&&(g.style.height=this.sidebarTitleSize+12+"px"),g.style.paddingTop="4px",r.vJ.write(g,l),n.appendChild(g)}return h},C.prototype.createItem=function(e,t,i,n,l,o,a){var s=document.createElement("a");s.className="geItem",s.style.overflow="hidden";var d=r.HY.IS_QUIRKS?8+2*this.thumbPadding:2*this.thumbBorder;s.style.width=this.thumbWidth+d+"px",s.style.height=this.thumbHeight+d+"px",s.style.padding=this.thumbPadding+"px",r.G8.addListener(s,"click",(function(e){r.G8.consume(e)})),this.createThumb(e,this.thumbWidth,this.thumbHeight,s,t,i,n,l,o);var h=new r.P5(0,0,l,o);if(e.length>1||e[0].vertex){var c=this.createDragSource(s,this.createDropHandler(e,!0,a,h),this.createDragPreview(l,o),e,h);this.addClickHandler(s,c,e),c.isGuidesEnabled=r.vJ.bind(this,(function(){return this.editorUi.editor.graph.graphHandler.guidesEnabled}))}else if(null!=e[0]&&e[0].edge){c=this.createDragSource(s,this.createDropHandler(e,!1,a,h),this.createDragPreview(l,o),e,h);this.addClickHandler(s,c,e)}return r.HY.IS_IOS||r.G8.addGestureListeners(s,null,r.vJ.bind(this,(function(n){r.G8.isMouseEvent(n)&&this.showTooltip(s,e,h.width,h.height,t,i)}))),s},C.prototype.updateShapes=function(e,t){var i=this.editorUi.editor.graph,n=i.getCellStyle(e),l=[];i.model.beginUpdate();try{for(var o=i.getModel().getStyle(e),a=["shadow","dashed","dashPattern","fontFamily","fontSize","fontColor","align","startFill","startSize","endFill","endSize","strokeColor","strokeWidth","fillColor","gradientColor","html","part","noEdgeStyle","edgeStyle","elbow","childLayout","recursiveResize","container","collapsible","connectable"],s=0;s<t.length;s++){var d=t[s];if(i.getModel().isVertex(d)==i.getModel().isVertex(e)||i.getModel().isEdge(d)==i.getModel().isEdge(e)){var h=i.getCurrentCellStyle(t[s]);if(i.getModel().setStyle(d,o),"1"==r.vJ.getValue(h,"composite","0"))for(var c=i.model.getChildCount(d);c>=0;c--)i.model.remove(i.model.getChildAt(d,c));"umlLifeline"==h[r.fV.STYLE_SHAPE]&&"umlLifeline"!=n[r.fV.STYLE_SHAPE]&&(i.setCellStyles(r.fV.STYLE_SHAPE,"umlLifeline",[d]),i.setCellStyles("participant",n[r.fV.STYLE_SHAPE],[d]));for(c=0;c<a.length;c++){var u=h[a[c]];null!=u&&i.setCellStyles(a[c],u,[d])}l.push(d)}}}finally{i.model.endUpdate()}return l},C.prototype.createDropHandler=function(e,t,i,n){return i=null==i||i,r.vJ.bind(this,(function(l,o,a,s,d,h){for(var c=h?null:r.G8.isTouchEvent(o)||r.G8.isPenEvent(o)?document.elementFromPoint(r.G8.getClientX(o),r.G8.getClientY(o)):r.G8.getSource(o);null!=c&&c!=this.container;)c=c.parentNode;if(null==c&&l.isEnabled()){if((e=l.getImportableCells(e)).length>0){l.stopEditing();var u=null!=a&&!r.G8.isAltDown(o)&&l.isValidDropTarget(a,e,o),p=null;if(null==a||u||(a=null),!l.isCellLocked(a||l.getDefaultParent())){l.model.beginUpdate();try{if(s=Math.round(s),d=Math.round(d),t&&l.isSplitTarget(a,e,o)){var g=l.view.scale,A=(s+(v=l.view.translate).x)*g,m=(d+v.y)*g,f=l.cloneCells(e);l.splitEdge(a,f,null,s-n.width/2,d-n.height/2,A,m),p=f}else e.length>0&&(p=l.importCells(e,s,d,a));if(null!=l.layoutManager){var y=l.layoutManager.getLayout(a);if(null!=y){g=l.view.scale,A=(s+(v=l.view.translate).x)*g,m=(d+v.y)*g;for(var v,w=0;w<p.length;w++)y.moveCell(p[w],A,m)}}!i||null!=o&&r.G8.isShiftDown(o)||l.fireEvent(new r.vC("cellsInserted","cells",p))}catch(b){this.editorUi.handleError(b)}finally{l.model.endUpdate()}null!=p&&p.length>0&&(l.scrollCellToVisible(p[0]),l.setSelectionCells(p)),l.editAfterInsert&&null!=o&&r.G8.isMouseEvent(o)&&null!=p&&1==p.length&&window.setTimeout((function(){l.startEditing(p[0])}),0)}}r.G8.consume(o)}}))},C.prototype.createDragPreview=function(e,t){var i=document.createElement("div");return i.style.border=this.dragPreviewBorder,i.style.width=e+"px",i.style.height=t+"px",i},C.prototype.dropAndConnect=function(e,t,i,n,l){var o=this.getDropAndConnectGeometry(e,t[n],i,t),a=[];if(null!=o){var s=this.editorUi.editor.graph,d=null;s.model.beginUpdate();try{var h=s.getCellGeometry(e),c=s.getCellGeometry(t[n]),u=s.model.getParent(e),p=!0;if(null!=s.layoutManager){var g=s.layoutManager.getLayout(u);if(null!=g&&g.constructor==r.KX)if(p=!1,null!=(a=s.view.getState(u))){var A=new r.IO(a.x/s.view.scale-s.view.translate.x,a.y/s.view.scale-s.view.translate.y);o.x+=A.x,o.y+=A.y;var m=o.getTerminalPoint(!1);null!=m&&(m.x+=A.x,m.y+=A.y)}}var f=c.x,y=c.y;s.model.isEdge(t[n])&&(f=0,y=0);var v=s.model.isEdge(e)||null!=h&&!h.relative&&p;if(a=t=s.importCells(t,o.x-(v?f:0),o.y-(v?y:0),v?u:null),s.model.isEdge(e))s.model.setTerminal(e,t[n],i==r.fV.DIRECTION_NORTH);else if(s.model.isEdge(t[n])){s.model.setTerminal(t[n],e,!0);var w=s.getCellGeometry(t[n]);if(w.points=null,null!=w.getTerminalPoint(!1))w.setTerminalPoint(o.getTerminalPoint(!1),!1);else if(v&&s.model.isVertex(u)){var b=s.view.getState(u);A=b.cell!=s.view.currentRoot?new r.IO(b.x/s.view.scale-s.view.translate.x,b.y/s.view.scale-s.view.translate.y):new r.IO(0,0);s.cellsMoved(t,A.x,A.y,null,null,!0)}}else c=s.getCellGeometry(t[n]),f=o.x-Math.round(c.x),y=o.y-Math.round(c.y),o.x=Math.round(c.x),o.y=Math.round(c.y),s.model.setGeometry(t[n],o),s.cellsMoved(t,f,y,null,null,!0),a=t.slice(),d=1==a.length?a[0]:null,t.push(s.insertEdge(null,null,"",e,t[n],s.createCurrentEdgeStyle()));null!=l&&r.G8.isShiftDown(l)||s.fireEvent(new r.vC("cellsInserted","cells",t))}catch(S){this.editorUi.handleError(S)}finally{s.model.endUpdate()}s.editAfterInsert&&null!=l&&r.G8.isMouseEvent(l)&&null!=d&&window.setTimeout((function(){s.startEditing(d)}),0)}return a},C.prototype.getDropAndConnectGeometry=function(e,t,i,n){var l=this.editorUi.editor.graph,o=l.view,a=n.length>1,s=l.getCellGeometry(e),d=l.getCellGeometry(t);if(null!=s&&null!=d)if(d=d.clone(),l.model.isEdge(e)){var h=(p=l.view.getState(e)).absolutePoints,c=h[0],u=h[h.length-1];i==r.fV.DIRECTION_NORTH?(d.x=c.x/o.scale-o.translate.x-d.width/2,d.y=c.y/o.scale-o.translate.y-d.height/2):(d.x=u.x/o.scale-o.translate.x-d.width/2,d.y=u.y/o.scale-o.translate.y-d.height/2)}else{if(s.relative){var p=l.view.getState(e);(s=s.clone()).x=(p.x-o.translate.x)/o.scale,s.y=(p.y-o.translate.y)/o.scale}var g=l.defaultEdgeLength;if(l.model.isEdge(t)&&null!=d.getTerminalPoint(!0)&&null!=d.getTerminalPoint(!1)){c=d.getTerminalPoint(!0);var A=(u=d.getTerminalPoint(!1)).x-c.x,m=u.y-c.y;g=Math.sqrt(A*A+m*m),d.x=s.getCenterX(),d.y=s.getCenterY(),d.width=1,d.height=1,i==r.fV.DIRECTION_NORTH?(d.height=g,d.y=s.y-g,d.setTerminalPoint(new r.IO(d.x,d.y),!1)):i==r.fV.DIRECTION_EAST?(d.width=g,d.x=s.x+s.width,d.setTerminalPoint(new r.IO(d.x+d.width,d.y),!1)):i==r.fV.DIRECTION_SOUTH?(d.height=g,d.y=s.y+s.height,d.setTerminalPoint(new r.IO(d.x,d.y+d.height),!1)):i==r.fV.DIRECTION_WEST&&(d.width=g,d.x=s.x-g,d.setTerminalPoint(new r.IO(d.x,d.y),!1))}else if(!a&&d.width>45&&d.height>45&&s.width>45&&s.height>45&&(d.width=d.width*(s.height/d.height),d.height=s.height),d.x=s.x+s.width/2-d.width/2,d.y=s.y+s.height/2-d.height/2,i==r.fV.DIRECTION_NORTH?d.y=d.y-s.height/2-d.height/2-g:i==r.fV.DIRECTION_EAST?d.x=d.x+s.width/2+d.width/2+g:i==r.fV.DIRECTION_SOUTH?d.y=d.y+s.height/2+d.height/2+g:i==r.fV.DIRECTION_WEST&&(d.x=d.x-s.width/2-d.width/2-g),l.model.isEdge(t)&&null!=d.getTerminalPoint(!0)&&null!=t.getTerminal(!1)){var f=l.getCellGeometry(t.getTerminal(!1));null!=f&&(i==r.fV.DIRECTION_NORTH?(d.x-=f.getCenterX(),d.y-=f.getCenterY()+f.height/2):i==r.fV.DIRECTION_EAST?(d.x-=f.getCenterX()-f.width/2,d.y-=f.getCenterY()):i==r.fV.DIRECTION_SOUTH?(d.x-=f.getCenterX(),d.y-=f.getCenterY()-f.height/2):i==r.fV.DIRECTION_WEST&&(d.x-=f.getCenterX()+f.width/2,d.y-=f.getCenterY()))}}return d},C.prototype.isDropStyleEnabled=function(e,t){var i=!0;if(null!=t&&1==e.length){var n=this.graph.getCellStyle(e[t]);null!=n&&(i=r.vJ.getValue(n,r.fV.STYLE_STROKECOLOR,r.fV.NONE)!=r.fV.NONE||r.vJ.getValue(n,r.fV.STYLE_FILLCOLOR,r.fV.NONE)!=r.fV.NONE)}return i},C.prototype.isDropStyleTargetIgnored=function(e){return this.graph.isSwimlane(e.cell)},C.prototype.createDragSource=function(e,t,i,n,l){for(var o=this.editorUi,a=o.editor.graph,s=null,d=null,c=this,u=0;u<n.length&&(null==d&&this.editorUi.editor.graph.model.isVertex(n[u])?d=u:null==s&&this.editorUi.editor.graph.model.isEdge(n[u])&&null==this.editorUi.editor.graph.model.getTerminal(n[u],!0)&&(s=u),null==d||null==s);u++);var p=this.isDropStyleEnabled(n,d),g=r.vJ.makeDraggable(e,this.editorUi.editor.graph,r.vJ.bind(this,(function(e,i){if(null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=n&&null!=v&&D==T){var l=e.isCellSelected(v.cell)?e.getSelectionCells():[v.cell],r=this.updateShapes(e.model.isEdge(v.cell)?n[0]:n[d],l);e.setSelectionCells(r)}else if(null!=n&&null!=D&&null!=f&&D!=T){var o=e.model.isEdge(f.cell)||null==s?d:s;e.setSelectionCells(this.dropAndConnect(f.cell,n,M,o,i))}else t.apply(this,arguments);null!=this.editorUi.hoverIcons&&this.editorUi.hoverIcons.update(e.view.getState(e.getSelectionCell()))})),i,0,0,a.autoscroll,!0,!0);a.addListener(r.G8.ESCAPE,(function(){g.isActive()&&g.reset()}));var A=g.mouseDown;function m(e,t){var i=null;return(i=r.vJ.createImage(e.src)).style.width=e.width+"px",i.style.height=e.height+"px",null!=t&&i.setAttribute("title",t),r.vJ.setOpacity(i,e==S?30:20),i.style.position="absolute",i.style.cursor="crosshair",i}g.mouseDown=function(e){r.G8.isPopupTrigger(e)||r.G8.isMultiTouchEvent(e)||(a.stopEditing(),A.apply(this,arguments))};var f=null,y=null,v=null,w=!1,b=m(this.triangleUp,r.xK.get("connect")),E=m(this.triangleRight,r.xK.get("connect")),C=m(this.triangleDown,r.xK.get("connect")),x=m(this.triangleLeft,r.xK.get("connect")),T=m(this.refreshTarget,r.xK.get("replace")),I=null,L=m(this.roundDrop),V=m(this.roundDrop),M=r.fV.DIRECTION_NORTH,D=null;function k(e,t,i,n){return null!=n.parentNode&&(r.vJ.contains(i,e,t)?(r.vJ.setOpacity(n,100),D=n):r.vJ.setOpacity(n,n==T?30:20)),i}var P=g.createPreviewElement;g.createPreviewElement=function(){var e=P.apply(this,arguments);return e.style.pointerEvents="none",this.previewElementWidth=e.style.width,this.previewElementHeight=e.style.height,e};var F=g.dragEnter;g.dragEnter=function(){null!=o.hoverIcons&&o.hoverIcons.setDisplay("none"),F.apply(this,arguments)};var O=g.dragExit;g.dragExit=function(){null!=o.hoverIcons&&o.hoverIcons.setDisplay(""),O.apply(this,arguments)},g.dragOver=function(e){if(r.r6.prototype.dragOver.apply(this,arguments),null!=this.currentGuide&&null!=D&&this.currentGuide.hide(),null!=this.previewElement){var t=e.view;if(null!=v&&D==T)this.previewElement.style.display=e.model.isEdge(v.cell)?"none":"",this.previewElement.style.left=v.x+"px",this.previewElement.style.top=v.y+"px",this.previewElement.style.width=v.width+"px",this.previewElement.style.height=v.height+"px";else if(null!=f&&null!=D){var i=e.model.isEdge(f.cell)||null==s?d:s,o=c.getDropAndConnectGeometry(f.cell,n[i],M,n),a=e.model.isEdge(f.cell)?null:e.getCellGeometry(f.cell),h=e.getCellGeometry(n[i]),u=e.model.getParent(f.cell),p=t.translate.x*t.scale,A=t.translate.y*t.scale;if(null!=a&&!a.relative&&e.model.isVertex(u)&&u!=t.currentRoot){var m=t.getState(u);p=m.x,A=m.y}var y=h.x,w=h.y;e.model.isEdge(n[i])&&(y=0,w=0),this.previewElement.style.left=(o.x-y)*t.scale+p+"px",this.previewElement.style.top=(o.y-w)*t.scale+A+"px",1==n.length&&(this.previewElement.style.width=o.width*t.scale+"px",this.previewElement.style.height=o.height*t.scale+"px"),this.previewElement.style.display=""}else null!=g.currentHighlight.state&&e.model.isEdge(g.currentHighlight.state.cell)?(this.previewElement.style.left=Math.round(parseInt(this.previewElement.style.left)-l.width*t.scale/2)+"px",this.previewElement.style.top=Math.round(parseInt(this.previewElement.style.top)-l.height*t.scale/2)+"px"):(this.previewElement.style.width=this.previewElementWidth,this.previewElement.style.height=this.previewElementHeight,this.previewElement.style.display="")}};var H=(new Date).getTime(),R=0,G=null,N=this.editorUi.editor.graph.getCellStyle(n[0]);return g.getDropTarget=r.vJ.bind(this,(function(e,t,i,l){var o=r.G8.isAltDown(l)||null==n?null:e.getCellAt(t,i);if(null!=o&&!this.graph.isCellConnectable(o)){var a=this.graph.getModel().getParent(o);this.graph.getModel().isVertex(a)&&this.graph.isCellConnectable(a)&&(o=a)}e.isCellLocked(o)&&(o=null);var s=e.view.getState(o);D=null;var c=null;if(G!=s?(G=s,H=(new Date).getTime(),R=0,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=s&&(this.updateThread=window.setTimeout((function(){null==D&&(G=s,g.getDropTarget(e,t,i,l))}),this.dropTargetDelay+10))):R=(new Date).getTime()-H,p&&R<2500&&null!=s&&!r.G8.isShiftDown(l)&&(r.vJ.getValue(s.style,r.fV.STYLE_SHAPE)!=r.vJ.getValue(N,r.fV.STYLE_SHAPE)&&(r.vJ.getValue(s.style,r.fV.STYLE_STROKECOLOR,r.fV.NONE)!=r.fV.NONE||r.vJ.getValue(s.style,r.fV.STYLE_FILLCOLOR,r.fV.NONE)!=r.fV.NONE||r.vJ.getValue(s.style,r.fV.STYLE_GRADIENTCOLOR,r.fV.NONE)!=r.fV.NONE)||"image"==r.vJ.getValue(N,r.fV.STYLE_SHAPE)||R>1500||e.model.isEdge(s.cell))&&R>this.dropTargetDelay&&!this.isDropStyleTargetIgnored(s)&&(e.model.isVertex(s.cell)&&null!=d||e.model.isEdge(s.cell)&&e.model.isEdge(n[0]))){v=s;var u=e.model.isEdge(s.cell)?e.view.getPoint(s):new r.IO(s.getCenterX(),s.getCenterY());u=new r.P5(u.x-this.refreshTarget.width/2,u.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),T.style.left=Math.floor(u.x)+"px",T.style.top=Math.floor(u.y)+"px",null==I&&(e.container.appendChild(T),I=T.parentNode),k(t,i,u,T)}else if(null==v||!r.vJ.contains(v,t,i)||R>1500&&!r.G8.isShiftDown(l))v=null,null!=I&&(T.parentNode.removeChild(T),I=null);else if(null!=v&&null!=I){u=e.model.isEdge(v.cell)?e.view.getPoint(v):new r.IO(v.getCenterX(),v.getCenterY());u=new r.P5(u.x-this.refreshTarget.width/2,u.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),k(t,i,u,T)}if(w&&null!=f&&!r.G8.isAltDown(l)&&null==D){if(c=r.P5.fromRectangle(f),e.model.isEdge(f.cell)){var A=f.absolutePoints;if(null!=L.parentNode){var m=A[0];c.add(k(t,i,new r.P5(m.x-this.roundDrop.width/2,m.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),L))}if(null!=V.parentNode){var S=A[A.length-1];c.add(k(t,i,new r.P5(S.x-this.roundDrop.width/2,S.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),V))}}else{var P=r.P5.fromRectangle(f);null!=f.shape&&null!=f.shape.boundingBox&&(P=r.P5.fromRectangle(f.shape.boundingBox)),P.grow(this.graph.tolerance),P.grow(h.bo.ARROW_SPACING),null!=(J=this.graph.selectionCellsHandler.getHandler(f.cell))&&(P.x-=J.horizontalOffset/2,P.y-=J.verticalOffset/2,P.width+=J.horizontalOffset,P.height+=J.verticalOffset,null!=J.rotationShape&&null!=J.rotationShape.node&&"hidden"!=J.rotationShape.node.style.visibility&&"none"!=J.rotationShape.node.style.display&&null!=J.rotationShape.boundingBox&&P.add(J.rotationShape.boundingBox)),c.add(k(t,i,new r.P5(f.getCenterX()-this.triangleUp.width/2,P.y-this.triangleUp.height,this.triangleUp.width,this.triangleUp.height),b)),c.add(k(t,i,new r.P5(P.x+P.width,f.getCenterY()-this.triangleRight.height/2,this.triangleRight.width,this.triangleRight.height),E)),c.add(k(t,i,new r.P5(f.getCenterX()-this.triangleDown.width/2,P.y+P.height,this.triangleDown.width,this.triangleDown.height),C)),c.add(k(t,i,new r.P5(P.x-this.triangleLeft.width,f.getCenterY()-this.triangleLeft.height/2,this.triangleLeft.width,this.triangleLeft.height),x))}null!=c&&c.grow(10)}M=r.fV.DIRECTION_NORTH,D==E?M=r.fV.DIRECTION_EAST:D==C||D==V?M=r.fV.DIRECTION_SOUTH:D==x&&(M=r.fV.DIRECTION_WEST),null!=v&&D==T&&(s=v);var F=(null==d||e.isCellConnectable(n[d]))&&(e.model.isEdge(o)&&null!=d||e.model.isVertex(o)&&e.isCellConnectable(o));if(null!=f&&R>=5e3||f!=s&&(null==c||!r.vJ.contains(c,t,i)||R>500&&null==D&&F))if(w=!1,null!=(f=R<5e3&&R>this.dropTargetDelay||e.model.isEdge(o)?s:null)&&F){for(var O=[L,V,b,E,C,x],z=0;z<O.length;z++)null!=O[z].parentNode&&O[z].parentNode.removeChild(O[z]);if(e.model.isEdge(o)){if(null!=(A=s.absolutePoints)){m=A[0],S=A[A.length-1];L.style.left=Math.floor(m.x-this.roundDrop.width/2)+"px",L.style.top=Math.floor(m.y-this.roundDrop.height/2)+"px",V.style.left=Math.floor(S.x-this.roundDrop.width/2)+"px",V.style.top=Math.floor(S.y-this.roundDrop.height/2)+"px",null==e.model.getTerminal(o,!0)&&e.container.appendChild(L),null==e.model.getTerminal(o,!1)&&e.container.appendChild(V)}}else{var J;P=r.P5.fromRectangle(s);null!=s.shape&&null!=s.shape.boundingBox&&(P=r.P5.fromRectangle(s.shape.boundingBox)),P.grow(this.graph.tolerance),P.grow(h.bo.ARROW_SPACING),null!=(J=this.graph.selectionCellsHandler.getHandler(s.cell))&&(P.x-=J.horizontalOffset/2,P.y-=J.verticalOffset/2,P.width+=J.horizontalOffset,P.height+=J.verticalOffset,null!=J.rotationShape&&null!=J.rotationShape.node&&"hidden"!=J.rotationShape.node.style.visibility&&"none"!=J.rotationShape.node.style.display&&null!=J.rotationShape.boundingBox&&P.add(J.rotationShape.boundingBox)),b.style.left=Math.floor(s.getCenterX()-this.triangleUp.width/2)+"px",b.style.top=Math.floor(P.y-this.triangleUp.height)+"px",E.style.left=Math.floor(P.x+P.width)+"px",E.style.top=Math.floor(s.getCenterY()-this.triangleRight.height/2)+"px",C.style.left=b.style.left,C.style.top=Math.floor(P.y+P.height)+"px",x.style.left=Math.floor(P.x-this.triangleLeft.width)+"px",x.style.top=E.style.top,"eastwest"!=s.style.portConstraint&&(e.container.appendChild(b),e.container.appendChild(C)),e.container.appendChild(E),e.container.appendChild(x)}null!=s&&null!=(y=e.selectionCellsHandler.getHandler(s.cell))&&null!=y.setHandlesVisible&&y.setHandlesVisible(!1),w=!0}else for(O=[L,V,b,E,C,x],z=0;z<O.length;z++)null!=O[z].parentNode&&O[z].parentNode.removeChild(O[z]);w||null==y||y.setHandlesVisible(!0);var U=r.G8.isAltDown(l)&&!r.G8.isShiftDown(l)||null!=v&&D==T?null:r.r6.prototype.getDropTarget.apply(this,arguments),_=e.getModel();if(null!=U&&(null!=D||!e.isSplitTarget(U,n,l))){for(;null!=U&&!e.isValidDropTarget(U,n,l)&&_.isVertex(_.getParent(U));)U=_.getParent(U);null!=U&&(e.view.currentRoot==U||!e.isValidRoot(U)&&0==e.getModel().getChildCount(U)||e.isCellLocked(U)||_.isEdge(U)||!e.isValidDropTarget(U,n,l))&&(U=null)}return U})),g.stopDrag=function(){r.r6.prototype.stopDrag.apply(this,arguments);for(var e=[L,V,T,b,E,C,x],t=0;t<e.length;t++)null!=e[t].parentNode&&e[t].parentNode.removeChild(e[t]);null!=f&&null!=y&&y.reset(),y=null,f=null,v=null,I=null,D=null},g},C.prototype.itemClicked=function(e,t,i){var n=this.editorUi.editor.graph;if(n.container.focus(),r.G8.isAltDown(i)&&1==n.getSelectionCount()&&n.model.isVertex(n.getSelectionCell())){for(var l=null,o=0;o<e.length&&null==l;o++)n.model.isVertex(e[o])&&(l=o);null!=l&&(n.setSelectionCells(this.dropAndConnect(n.getSelectionCell(),e,r.G8.isMetaDown(i)||r.G8.isControlDown(i)?r.G8.isShiftDown(i)?r.fV.DIRECTION_WEST:r.fV.DIRECTION_NORTH:r.G8.isShiftDown(i)?r.fV.DIRECTION_EAST:r.fV.DIRECTION_SOUTH,l,i)),n.scrollCellToVisible(n.getSelectionCell()))}else if(r.G8.isShiftDown(i)&&!n.isSelectionEmpty())this.updateShapes(e[0],n.getSelectionCells()),n.scrollCellToVisible(n.getSelectionCell());else{var a=r.G8.isAltDown(i)?n.getFreeInsertPoint():n.getCenterInsertPoint(n.getBoundingBoxFromGeometry(e,!0));t.drop(n,i,null,a.x,a.y,!0)}},C.prototype.addClickHandler=function(e,t,i){var n=this.editorUi.editor.graph,l=t.mouseDown,o=t.mouseMove,a=t.mouseUp,s=n.tolerance,d=null,h=this;t.mouseDown=function(t){l.apply(this,arguments),d=new r.IO(r.G8.getClientX(t),r.G8.getClientY(t)),null!=this.dragElement&&(this.dragElement.style.display="none",r.vJ.setOpacity(e,50))},t.mouseMove=function(t){null!=this.dragElement&&"none"==this.dragElement.style.display&&null!=d&&(Math.abs(d.x-r.G8.getClientX(t))>s||Math.abs(d.y-r.G8.getClientY(t))>s)&&(this.dragElement.style.display="",r.vJ.setOpacity(e,100)),o.apply(this,arguments)},t.mouseUp=function(n){try{r.G8.isPopupTrigger(n)||null!=this.currentGraph||null==this.dragElement||"none"!=this.dragElement.style.display||h.itemClicked(i,t,n,e),a.apply(t,arguments),r.vJ.setOpacity(e,100),d=null,h.currentElt=e}catch(l){t.reset(),h.editorUi.handleError(l)}}},C.prototype.createVertexTemplateEntry=function(e,t,i,n,l,o,a,s){return s=null!=s&&s.length>0?s:null!=l?l.toLowerCase():"",this.addEntry(s,r.vJ.bind(this,(function(){return this.createVertexTemplate(e,t,i,n,l,o,a)})))},C.prototype.createVertexTemplate=function(e,t,i,n,l,o,a,s){var d=[new r.QF(null!=n?n:"",new r.ym(0,0,t,i),e)];return d[0].vertex=!0,this.createVertexTemplateFromCells(d,t,i,l,o,a,s)},C.prototype.createVertexTemplateFromData=function(e,t,i,n,l,o,a){var s=r.vJ.parseXml(p.TS.decompress(e)),d=new r.cE(s),h=new r.DX;d.decode(s.documentElement,h);var c=this.graph.cloneCells(h.root.getChildAt(0).children);return this.createVertexTemplateFromCells(c,t,i,n,l,o,a)},C.prototype.createVertexTemplateFromCells=function(e,t,i,n,l,r,o){return this.createItem(e,n,l,r,t,i,o)},C.prototype.createEdgeTemplateEntry=function(e,t,i,n,l,o,a,s){return a=null!=a&&a.length>0?a:l.toLowerCase(),this.addEntry(a,r.vJ.bind(this,(function(){return this.createEdgeTemplate(e,t,i,n,l,o,s)})))},C.prototype.createEdgeTemplate=function(e,t,i,n,l,o,a){var s=new r.QF(null!=n?n:"",new r.ym(0,0,t,i),e);return s.geometry.setTerminalPoint(new r.IO(0,i),!0),s.geometry.setTerminalPoint(new r.IO(t,0),!1),s.geometry.relative=!0,s.edge=!0,this.createEdgeTemplateFromCells([s],t,i,l,o,a)},C.prototype.createEdgeTemplateFromCells=function(e,t,i,n,l,r){return this.createItem(e,n,l,!0,t,i,r)},C.prototype.addPaletteFunctions=function(e,t,i,n){this.addPalette(e,t,i,r.vJ.bind(this,(function(e){for(var t=0;t<n.length;t++)e.appendChild(n[t](e))})))},C.prototype.addPalette=function(e,t,i,n){var l=this.createTitle(t);this.container.appendChild(l);var o=document.createElement("div");o.className="geSidebar",r.HY.IS_POINTER&&(o.style.touchAction="none"),i?(n(o),n=null):o.style.display="none",this.addFoldingHandler(l,o,n);var a=document.createElement("div");return a.appendChild(o),this.container.appendChild(a),null!=e&&(this.palettes[e]=[l,a]),o},C.prototype.addFoldingHandler=function(e,t,i){var n=!1;(!r.HY.IS_IE||document.documentMode>=8)&&(e.style.backgroundImage="none"==t.style.display?"url('"+this.collapsedImage+"')":"url('"+this.expandedImage+"')"),e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="0% 50%",r.G8.addListener(e,"click",r.vJ.bind(this,(function(l){if("none"==t.style.display){if(n)t.style.display="block";else if(n=!0,null!=i){e.style.cursor="wait";var o=e.innerHTML;e.innerHTML=r.xK.get("loading")+"...",window.setTimeout((function(){t.style.display="block",e.style.cursor="",e.innerHTML=o;var n=r.HY.NO_FO;r.HY.NO_FO=a.KE.prototype.originalNoForeignObject,i(t,e),r.HY.NO_FO=n}),r.HY.IS_FF?20:0)}else t.style.display="block";e.style.backgroundImage="url('"+this.expandedImage+"')"}else e.style.backgroundImage="url('"+this.collapsedImage+"')",t.style.display="none";r.G8.consume(l)}))),r.HY.IS_QUIRKS||r.G8.addListener(e,r.HY.IS_POINTER?"pointerdown":"mousedown",r.vJ.bind(this,(function(e){e.preventDefault()})))},C.prototype.removePalette=function(e){var t=this.palettes[e];if(null!=t){this.palettes[e]=null;for(var i=0;i<t.length;i++)this.container.removeChild(t[i]);return!0}return!1},C.prototype.addImagePalette=function(e,t,i,n,l,o,a){for(var s=[],d=0;d<l.length;d++)r.vJ.bind(this,(function(e,t,i){if(null==i){var l=e.lastIndexOf("/"),r=e.lastIndexOf(".");i=e.substring(l>=0?l+1:0,r>=0?r:e.length).replace(/[-_]/g," ")}s.push(this.createVertexTemplateEntry("image;html=1;labelBackgroundColor=#ffffff;image="+(0,g.p)(e+n).replace(";base",""),this.defaultImageWidth,this.defaultImageHeight,"",t,null!=t,null,this.filterTags(i)))}))(l[d],null!=o?o[d]:null,null!=a?a[l[d]]:null);this.addPaletteFunctions(e,t,!1,s)},C.prototype.getTagsForStencil=function(e,t,i){for(var n=e.split("."),l=1;l<n.length;l++)n[l]=n[l].replace(/_/g," ");return n.push(t.replace(/_/g," ")),null!=i&&n.push(i),n.slice(1,n.length)},C.prototype.addStencilPalette=function(e,t,i,n,l,o,a,s,d,h){if(void 0===h&&(h=!1),a=null!=a?a:1,this.addStencilsToIndex){var c=[];if(null!=d)for(var u=0;u<d.length;u++)c.push(d[u]);r.Pu.loadStencilSet(i,r.vJ.bind(this,(function(e,t,i,o,d){if(null==l||r.vJ.indexOf(l,t)<0){var h=this.getTagsForStencil(e,t),u=null!=s?s[t]:null;null!=u&&h.push(u),c.push(this.createVertexTemplateEntry("shape="+e+t.toLowerCase()+n,Math.round(o*a),Math.round(d*a),"",t.replace(/_/g," "),null,null,this.filterTags(h.join(" "))))}})),!0,!0),this.addPaletteFunctions(e,t,!!h,c)}else this.addPalette(e,t,!!h,r.vJ.bind(this,(function(e){if(null==n&&(n=""),null!=o&&o.call(this,e),null!=d)for(var t=0;t<d.length;t++)d[t](e);r.Pu.loadStencilSet(i,r.vJ.bind(this,(function(t,i,o,s,d){(null==l||r.vJ.indexOf(l,i)<0)&&e.appendChild(this.createVertexTemplate("shape="+t+i.toLowerCase()+n,Math.round(s*a),Math.round(d*a),"",i.replace(/_/g," "),!0))})),!0)})))},C.prototype.destroy=function(){null!=this.graph&&(null!=this.graph.container&&null!=this.graph.container.parentNode&&this.graph.container.parentNode.removeChild(this.graph.container),this.graph.destroy(),this.graph=null),null!=this.pointerUpHandler&&(r.G8.removeListener(document,r.HY.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerUpHandler=null),null!=this.pointerDownHandler&&(r.G8.removeListener(document,r.HY.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerDownHandler=null),null!=this.pointerMoveHandler&&(r.G8.removeListener(document,r.HY.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerMoveHandler=null),null!=this.pointerOutHandler&&(r.G8.removeListener(document,r.HY.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),this.pointerOutHandler=null)};var x=i(9886);function T(e,t){this.editorUi=e,this.container=t,this.staticElements=[],this.init(),this.gestureHandler=r.vJ.bind(this,(function(e){null!=this.editorUi.currentMenu&&r.G8.getSource(e)!=this.editorUi.currentMenu.div&&this.hideMenu()})),r.G8.addGestureListeners(document,this.gestureHandler)}T.prototype.dropdownImage=m.j5,T.prototype.dropdownImageHtml='<img border="0" style="position:absolute;right:4px;top:8px;" src="'+T.prototype.dropdownImage+'" valign="middle"/>',T.prototype.selectedBackground="#d0d0d0",T.prototype.unselectedBackground="none",T.prototype.staticElements=null,T.prototype.init=function(){var e=screen.width;if((e-=screen.height>740?56:0)>=700){var t=this.addMenu("",r.xK.get("view")+" ("+r.xK.get("panTooltip")+")",!0,"viewPanels",null,!0);this.addDropDownArrow(t,"geSprite-formatpanel",38,50,-4,-3,36,-8),this.addSeparator()}var i,n=this.addMenu("",r.xK.get("zoom")+" (Alt+Mousewheel)",!0,"viewZoom",null,!0);(n.showDisabled=!0,n.style.whiteSpace="nowrap",n.style.position="relative",n.style.overflow="hidden",h.fI.COMPAT_UI?n.style.width=r.HY.IS_QUIRKS?"58px":"50px":n.style.width=r.HY.IS_QUIRKS?"62px":"36px",e>=420)&&(this.addSeparator(),(i=this.addItems(["zoomIn","zoomOut"]))[0].setAttribute("title",r.xK.get("zoomIn")+" ("+this.editorUi.actions.get("zoomIn").shortcut+")"),i[1].setAttribute("title",r.xK.get("zoomOut")+" ("+this.editorUi.actions.get("zoomOut").shortcut+")"));(this.updateZoom=r.vJ.bind(this,(function(){n.innerHTML=Math.round(100*this.editorUi.editor.graph.view.scale)+"%"+this.dropdownImageHtml,h.fI.COMPAT_UI&&(n.getElementsByTagName("img")[0].style.right="1px",n.getElementsByTagName("img")[0].style.top="5px")})),this.editorUi.editor.graph.view.addListener(r.G8.EVENT_SCALE,this.updateZoom),this.editorUi.editor.addListener("resetGraphView",this.updateZoom),(i=this.addItems(["-","undo","redo"]))[1].setAttribute("title",r.xK.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),i[2].setAttribute("title",r.xK.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),e>=320)&&(i=this.addItems(["-","delete"]))[1].setAttribute("title",r.xK.get("delete")+" ("+this.editorUi.actions.get("delete").shortcut+")");e>=550&&this.addItems(["-","toFront","toBack"]),e>=740&&(this.addItems(["-","fillColor"]),e>=780&&(this.addItems(["strokeColor"]),e>=820&&this.addItems(["shadow"]))),e>=400&&(this.addSeparator(),e>=440&&(this.edgeShapeMenu=this.addMenuFunction("",r.xK.get("connection"),!1,r.vJ.bind(this,(function(e){this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_SHAPE,"width"],[null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",r.xK.get("line")),this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_SHAPE,"width"],["link",null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",r.xK.get("link")),this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_SHAPE,"width"],["flexArrow",null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",r.xK.get("arrow")),this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_SHAPE,"width"],["arrow",null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",r.xK.get("simpleArrow"))}))),this.addDropDownArrow(this.edgeShapeMenu,"geSprite-connection",44,50,0,0,22,-4)),this.edgeStyleMenu=this.addMenuFunction("geSprite-orthogonal",r.xK.get("waypoints"),!1,r.vJ.bind(this,(function(e){this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_EDGE,r.fV.STYLE_CURVED,r.fV.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",r.xK.get("straight")),this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_EDGE,r.fV.STYLE_CURVED,r.fV.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",r.xK.get("orthogonal")),this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_EDGE,r.fV.STYLE_ELBOW,r.fV.STYLE_CURVED,r.fV.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",r.xK.get("simple")),this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_EDGE,r.fV.STYLE_ELBOW,r.fV.STYLE_CURVED,r.fV.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",r.xK.get("simple")),this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_EDGE,r.fV.STYLE_ELBOW,r.fV.STYLE_CURVED,r.fV.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",r.xK.get("isometric")),this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_EDGE,r.fV.STYLE_ELBOW,r.fV.STYLE_CURVED,r.fV.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",r.xK.get("isometric")),this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_EDGE,r.fV.STYLE_CURVED,r.fV.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",r.xK.get("curved")),this.editorUi.menus.edgeStyleChange(e,"",[r.fV.STYLE_EDGE,r.fV.STYLE_CURVED,r.fV.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",r.xK.get("entityRelation"))}))),this.addDropDownArrow(this.edgeStyleMenu,"geSprite-orthogonal",44,50,0,0,22,-4)),this.addTableDropDown()},T.prototype.addTableDropDown=function(){this.addSeparator();var e=this.addMenuFunction("geIcon geSprite geSprite-table",r.xK.get("table"),!1,r.vJ.bind(this,(function(t){var i=this.editorUi.editor.graph,n=i.getSelectionCell();i.isTableCell(n)||i.isTableRow(n)||i.isTable(n)?((e=t.addItem("",null,r.vJ.bind(this,(function(){try{i.insertTableColumn(n,!0)}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-insertcolumnbefore")).setAttribute("title",r.xK.get("insertColumnBefore")),(e=t.addItem("",null,r.vJ.bind(this,(function(){try{i.insertTableColumn(n,!1)}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-insertcolumnafter")).setAttribute("title",r.xK.get("insertColumnAfter")),(e=t.addItem("Delete column",null,r.vJ.bind(this,(function(){if(null!=n)try{i.deleteTableColumn(n)}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-deletecolumn")).setAttribute("title",r.xK.get("deleteColumn")),(e=t.addItem("",null,r.vJ.bind(this,(function(){try{i.insertTableRow(n,!0)}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-insertrowbefore")).setAttribute("title",r.xK.get("insertRowBefore")),(e=t.addItem("",null,r.vJ.bind(this,(function(){try{i.insertTableRow(n,!1)}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-insertrowafter")).setAttribute("title",r.xK.get("insertRowAfter")),(e=t.addItem("",null,r.vJ.bind(this,(function(){try{i.deleteTableRow(n)}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-deleterow")).setAttribute("title",r.xK.get("deleteRow"))):this.editorUi.menus.addInsertTableCellItem(t)})));return e.style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,e.style.width=r.HY.IS_QUIRKS?"50px":"30px",h.fI.COMPAT_UI&&(e.getElementsByTagName("img")[0].style.left="22px",e.getElementsByTagName("img")[0].style.top="5px"),e},T.prototype.addDropDownArrow=function(e,t,i,n,l,o,a,s){a=null!=a?a:32,l=h.fI.COMPAT_UI?l:s,e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.position="relative",e.innerHTML='<div class="geSprite '+t+'" style="margin-left:'+l+"px;margin-top:"+o+'px;"></div>'+this.dropdownImageHtml,e.style.width=r.HY.IS_QUIRKS?n+"px":n-a+"px",r.HY.IS_QUIRKS&&(e.style.height=h.fI.COMPAT_UI?"24px":"26px"),h.fI.COMPAT_UI&&(e.getElementsByTagName("img")[0].style.left="24px",e.getElementsByTagName("img")[0].style.top="5px",e.style.width=r.HY.IS_QUIRKS?i+"px":i-10+"px")},T.prototype.setFontName=function(e){null!=this.fontMenu&&(this.fontMenu.innerHTML='<div style="width:60px;overflow:hidden;display:inline-block;">'+r.vJ.htmlEntities(e)+"</div>"+this.dropdownImageHtml)},T.prototype.setFontSize=function(e){null!=this.sizeMenu&&(this.sizeMenu.innerHTML='<div style="width:24px;overflow:hidden;display:inline-block;">'+e+"</div>"+this.dropdownImageHtml)},T.prototype.createTextToolbar=function(){var e=this.editorUi.editor.graph,t=this.addMenu("",r.xK.get("style"),!0,"formatBlock");t.style.position="relative",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.innerHTML=r.xK.get("style")+this.dropdownImageHtml,h.fI.COMPAT_UI&&(t.style.paddingRight="18px",t.getElementsByTagName("img")[0].style.right="1px",t.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.fontMenu=this.addMenu("",r.xK.get("fontFamily"),!0,"fontFamily"),this.fontMenu.style.position="relative",this.fontMenu.style.whiteSpace="nowrap",this.fontMenu.style.overflow="hidden",this.fontMenu.style.width=r.HY.IS_QUIRKS?"80px":"60px",this.setFontName(x.fQ.prototype.defaultFont),h.fI.COMPAT_UI&&(this.fontMenu.style.paddingRight="18px",this.fontMenu.getElementsByTagName("img")[0].style.right="1px",this.fontMenu.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.sizeMenu=this.addMenu(x.fQ.prototype.defaultFontSize,r.xK.get("fontSize"),!0,"fontSize"),this.sizeMenu.style.position="relative",this.sizeMenu.style.whiteSpace="nowrap",this.sizeMenu.style.overflow="hidden",this.sizeMenu.style.width=r.HY.IS_QUIRKS?"44px":"24px",this.setFontSize(x.fQ.prototype.defaultFontSize),h.fI.COMPAT_UI&&(this.sizeMenu.style.paddingRight="18px",this.sizeMenu.getElementsByTagName("img")[0].style.right="1px",this.sizeMenu.getElementsByTagName("img")[0].style.top="5px");var i=this.addItems(["-","undo","redo","-","bold","italic","underline"]);i[1].setAttribute("title",r.xK.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),i[2].setAttribute("title",r.xK.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),i[4].setAttribute("title",r.xK.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),i[5].setAttribute("title",r.xK.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),i[6].setAttribute("title",r.xK.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")");var n=this.addMenuFunction("",r.xK.get("align"),!1,r.vJ.bind(this,(function(t){(o=t.addItem("",null,r.vJ.bind(this,(function(t){e.cellEditor.alignText(r.fV.ALIGN_LEFT,t)})),null,"geIcon geSprite geSprite-left")).setAttribute("title",r.xK.get("left")),(o=t.addItem("",null,r.vJ.bind(this,(function(t){e.cellEditor.alignText(r.fV.ALIGN_CENTER,t)})),null,"geIcon geSprite geSprite-center")).setAttribute("title",r.xK.get("center")),(o=t.addItem("",null,r.vJ.bind(this,(function(t){e.cellEditor.alignText(r.fV.ALIGN_RIGHT,t)})),null,"geIcon geSprite geSprite-right")).setAttribute("title",r.xK.get("right")),(o=t.addItem("",null,r.vJ.bind(this,(function(){document.execCommand("justifyfull",!1,null)})),null,"geIcon geSprite geSprite-justifyfull")).setAttribute("title",r.xK.get("justifyfull")),(o=t.addItem("",null,r.vJ.bind(this,(function(){document.execCommand("insertorderedlist",!1,null)})),null,"geIcon geSprite geSprite-orderedlist")).setAttribute("title",r.xK.get("numberedList")),(o=t.addItem("",null,r.vJ.bind(this,(function(){document.execCommand("insertunorderedlist",!1,null)})),null,"geIcon geSprite geSprite-unorderedlist")).setAttribute("title",r.xK.get("bulletedList")),(o=t.addItem("",null,r.vJ.bind(this,(function(){document.execCommand("outdent",!1,null)})),null,"geIcon geSprite geSprite-outdent")).setAttribute("title",r.xK.get("decreaseIndent")),(o=t.addItem("",null,r.vJ.bind(this,(function(){document.execCommand("indent",!1,null)})),null,"geIcon geSprite geSprite-indent")).setAttribute("title",r.xK.get("increaseIndent"))})));n.style.position="relative",n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.innerHTML='<div class="geSprite geSprite-left" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,n.style.width=r.HY.IS_QUIRKS?"50px":"30px",h.fI.COMPAT_UI&&(n.getElementsByTagName("img")[0].style.left="22px",n.getElementsByTagName("img")[0].style.top="5px");var l=this.addMenuFunction("",r.xK.get("format"),!1,r.vJ.bind(this,(function(e){(o=e.addItem("",null,this.editorUi.actions.get("subscript").funct,null,"geIcon geSprite geSprite-subscript")).setAttribute("title",r.xK.get("subscript")+" ("+h.qS.CTRL_KEY+"+,)"),(o=e.addItem("",null,this.editorUi.actions.get("superscript").funct,null,"geIcon geSprite geSprite-superscript")).setAttribute("title",r.xK.get("superscript")+" ("+h.qS.CTRL_KEY+"+.)"),(o=e.addItem("",null,this.editorUi.actions.get("fontColor").funct,null,"geIcon geSprite geSprite-fontcolor")).setAttribute("title",r.xK.get("fontColor")),(o=e.addItem("",null,this.editorUi.actions.get("backgroundColor").funct,null,"geIcon geSprite geSprite-fontbackground")).setAttribute("title",r.xK.get("backgroundColor")),(o=e.addItem("",null,r.vJ.bind(this,(function(){document.execCommand("removeformat",!1,null)})),null,"geIcon geSprite geSprite-removeformat")).setAttribute("title",r.xK.get("removeFormat"))})));l.style.position="relative",l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.innerHTML='<div class="geSprite geSprite-dots" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,l.style.width=r.HY.IS_QUIRKS?"50px":"30px",h.fI.COMPAT_UI&&(l.getElementsByTagName("img")[0].style.left="22px",l.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.addButton("geIcon geSprite geSprite-code",r.xK.get("html"),(function(){e.cellEditor.toggleViewMode(),e.cellEditor.textarea.innerHTML.length>0&&("&nbsp;"!=e.cellEditor.textarea.innerHTML||!e.cellEditor.clearOnChange)&&window.setTimeout((function(){document.execCommand("selectAll",!1,null)}))})),this.addSeparator();var o=this.addMenuFunction("geIcon geSprite geSprite-table",r.xK.get("table"),!1,r.vJ.bind(this,(function(t){var i=e.getSelectedElement(),n=e.getParentByNames(i,["TD","TH"],e.cellEditor.text2),l=e.getParentByName(i,"TR",e.cellEditor.text2);if(null==l)this.editorUi.menus.addInsertTableItem(t);else{var o=e.getParentByName(l,"TABLE",e.cellEditor.text2);(i=t.addItem("",null,r.vJ.bind(this,(function(){try{e.selectNode(e.insertColumn(o,null!=n?n.cellIndex:0))}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-insertcolumnbefore")).setAttribute("title",r.xK.get("insertColumnBefore")),(i=t.addItem("",null,r.vJ.bind(this,(function(){try{e.selectNode(e.insertColumn(o,null!=n?n.cellIndex+1:-1))}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-insertcolumnafter")).setAttribute("title",r.xK.get("insertColumnAfter")),(i=t.addItem("Delete column",null,r.vJ.bind(this,(function(){if(null!=n)try{e.deleteColumn(o,n.cellIndex)}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-deletecolumn")).setAttribute("title",r.xK.get("deleteColumn")),(i=t.addItem("",null,r.vJ.bind(this,(function(){try{e.selectNode(e.insertRow(o,l.sectionRowIndex))}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-insertrowbefore")).setAttribute("title",r.xK.get("insertRowBefore")),(i=t.addItem("",null,r.vJ.bind(this,(function(){try{e.selectNode(e.insertRow(o,l.sectionRowIndex+1))}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-insertrowafter")).setAttribute("title",r.xK.get("insertRowAfter")),(i=t.addItem("",null,r.vJ.bind(this,(function(){try{e.deleteRow(o,l.sectionRowIndex)}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-deleterow")).setAttribute("title",r.xK.get("deleteRow")),(i=t.addItem("",null,r.vJ.bind(this,(function(){var e=o.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,(function(e,t,i,n){return"#"+("0"+Number(t).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)}));this.editorUi.pickColor(e,(function(e){null==e||e==r.fV.NONE?(o.removeAttribute("border"),o.style.border="",o.style.borderCollapse=""):(o.setAttribute("border","1"),o.style.border="1px solid "+e,o.style.borderCollapse="collapse")}))})),null,"geIcon geSprite geSprite-strokecolor")).setAttribute("title",r.xK.get("borderColor")),(i=t.addItem("",null,r.vJ.bind(this,(function(){var e=o.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,(function(e,t,i,n){return"#"+("0"+Number(t).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)}));this.editorUi.pickColor(e,(function(e){null==e||e==r.fV.NONE?o.style.backgroundColor="":o.style.backgroundColor=e}))})),null,"geIcon geSprite geSprite-fillcolor")).setAttribute("title",r.xK.get("backgroundColor")),(i=t.addItem("",null,r.vJ.bind(this,(function(){var e=o.getAttribute("cellPadding")||0,t=new d.kn(this.editorUi,e,r.xK.get("apply"),r.vJ.bind(this,(function(e){null!=e&&e.length>0?o.setAttribute("cellPadding",e):o.removeAttribute("cellPadding")})),r.xK.get("spacing"));this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()})),null,"geIcon geSprite geSprite-fit")).setAttribute("title",r.xK.get("spacing")),(i=t.addItem("",null,r.vJ.bind(this,(function(){o.setAttribute("align","left")})),null,"geIcon geSprite geSprite-left")).setAttribute("title",r.xK.get("left")),(i=t.addItem("",null,r.vJ.bind(this,(function(){o.setAttribute("align","center")})),null,"geIcon geSprite geSprite-center")).setAttribute("title",r.xK.get("center")),(i=t.addItem("",null,r.vJ.bind(this,(function(){o.setAttribute("align","right")})),null,"geIcon geSprite geSprite-right")).setAttribute("title",r.xK.get("right"))}})));o.style.position="relative",o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,o.style.width=r.HY.IS_QUIRKS?"50px":"30px",h.fI.COMPAT_UI&&(o.getElementsByTagName("img")[0].style.left="22px",o.getElementsByTagName("img")[0].style.top="5px")},T.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()},T.prototype.addMenu=function(e,t,i,n,l,r,o){var a=this.editorUi.menus.get(n),s=this.addMenuFunction(e,t,i,(function(){a.funct.apply(a,arguments)}),l,r);return o||a.addListener("stateChanged",(function(){s.setEnabled(a.enabled)})),s},T.prototype.addMenuFunction=function(e,t,i,n,l,r){return this.addMenuFunctionInContainer(null!=l?l:this.container,e,t,i,n,r)},T.prototype.addMenuFunctionInContainer=function(e,t,i,n,l,r){var o=n?this.createLabel(t):this.createButton(t);return this.initElement(o,i),this.addMenuHandler(o,n,l,r),e.appendChild(o),o},T.prototype.addSeparator=function(e){e=null!=e?e:this.container;var t=document.createElement("div");return t.className="geSeparator",e.appendChild(t),t},T.prototype.addItems=function(e,t,i){for(var n=[],l=0;l<e.length;l++){var r=e[l];"-"==r?n.push(this.addSeparator(t)):n.push(this.addItem("geSprite-"+r.toLowerCase(),r,t,i))}return n},T.prototype.addItem=function(e,t,i,n){var l=this.editorUi.actions.get(t),r=null;if(null!=l){var o=l.label;null!=l.shortcut&&(o+=" ("+l.shortcut+")"),r=this.addButton(e,o,l.funct,i),n||(r.setEnabled(l.enabled),l.addListener("stateChanged",(function(){r.setEnabled(l.enabled)})))}return r},T.prototype.addButton=function(e,t,i,n){var l=this.createButton(e);return n=null!=n?n:this.container,this.initElement(l,t),this.addClickHandler(l,i),n.appendChild(l),l},T.prototype.initElement=function(e,t){null!=t&&e.setAttribute("title",t),this.addEnabledState(e)},T.prototype.addEnabledState=function(e){var t=e.className;e.setEnabled=function(i){e.enabled=i,e.className=i?t:t+" mxDisabled"},e.setEnabled(!0)},T.prototype.addClickHandler=function(e,t){null!=t&&(r.G8.addListener(e,"click",(function(i){e.enabled&&t(i),r.G8.consume(i)})),r.G8.addListener(e,r.HY.IS_POINTER?"pointerdown":"mousedown",r.vJ.bind(this,(function(e){e.preventDefault()}))))},T.prototype.createButton=function(e){var t=document.createElement("a");t.className="geButton";var i=document.createElement("div");return null!=e&&(i.className="geSprite "+e),t.appendChild(i),t},T.prototype.createLabel=function(e){var t=document.createElement("a");return t.className="geLabel",r.vJ.write(t,e),t},T.prototype.addMenuHandler=function(e,t,i,n){if(null!=i){var l=this.editorUi.editor.graph,o=null,a=!0;r.G8.addListener(e,"click",r.vJ.bind(this,(function(s){if(a&&(null==e.enabled||e.enabled)){l.popupMenuHandler.hideMenu(),(o=new r.jH(i)).div.className+=" geToolbarMenu",o.showDisabled=n,o.labels=t,o.autoExpand=!0;var d=r.vJ.getOffset(e);o.popup(d.x,d.y+e.offsetHeight,null,s),this.editorUi.setCurrentMenu(o,e),!t&&o.div.scrollHeight>o.div.clientHeight&&(o.div.style.width="40px"),o.hideMenu=r.vJ.bind(this,(function(){r.jH.prototype.hideMenu.apply(o,arguments),this.editorUi.resetCurrentMenu(),o.destroy()})),o.addListener(r.G8.EVENT_HIDE,r.vJ.bind(this,(function(){this.currentElt=null})))}a=!0,r.G8.consume(s)}))),r.G8.addListener(e,r.HY.IS_POINTER?"pointerdown":"mousedown",r.vJ.bind(this,(function(t){a=this.currentElt!=e,t.preventDefault()})))}},T.prototype.destroy=function(){null!=this.gestureHandler&&(r.G8.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null)};var I=i(1619);function L(e,t,i,n){r.tM.call(this),this.destroyFunctions=[],this.editor=e||new a.KE,this.container=t||document.body;var l=this.editor.graph;if(l.lightbox=i,l.useCssTransforms&&(this.lazyZoomDelay=0),r.jH.prototype.submenuImage=m.rI,r.jH.prototype.showMenu=function(){t.appendChild(this.div),r.vJ.fit(this.div)},r.jH.prototype.showSubmenu=function(e,i){if(null!=i.div){i.div.style.left=e.div.offsetLeft+i.offsetLeft+i.offsetWidth-1+"px",i.div.style.top=e.div.offsetTop+i.offsetTop+"px",t.appendChild(i.div);var n=parseInt(i.div.offsetLeft),l=parseInt(i.div.offsetWidth),o=r.vJ.getDocumentScrollOrigin(document),a=document.body,s=document.documentElement;n+l>o.x+(a.clientWidth||s.clientWidth)&&(i.div.style.left=Math.max(0,e.div.offsetLeft-l+(r.HY.IS_IE?6:-6))+"px"),r.vJ.fit(i.div)}},this.editor.chromeless&&!this.editor.editable&&(this.footerHeight=0,l.isEnabled=function(){return!1},l.panningHandler.isForcePanningEvent=function(e){return!r.G8.isPopupTrigger(e.getEvent())}),this.actions=new c(this),this.menus=this.createMenus(),!l.standalone){this.createDivs(),this.createUi(),this.refresh();var o=document.createElement("div");o.className="diagram-exit-btn",o.innerText=r.xK.get("exit"),o.onclick=n,this.exitButton.appendChild(o);var s=r.vJ.bind(this,(function(e){return null==e&&(e=window.event),l.isEditing()||null!=e&&this.isSelectionAllowed(e)}));if(this.container==document.body&&(this.menubarContainer.onselectstart=s,this.menubarContainer.onmousedown=s,this.toolbarContainer.onselectstart=s,this.toolbarContainer.onmousedown=s,this.diagramContainer.onselectstart=s,this.diagramContainer.onmousedown=s,this.sidebarContainer.onselectstart=s,this.sidebarContainer.onmousedown=s,this.formatContainer.onselectstart=s,this.formatContainer.onmousedown=s,this.footerContainer.onselectstart=s,this.footerContainer.onmousedown=s,null!=this.tabContainer&&(this.tabContainer.onselectstart=s)),!this.editor.chromeless||this.editor.editable){var d=function(e){if(null!=e){var t=r.G8.getSource(e);if("A"==t.nodeName)for(;null!=t;){if("geHint"==t.className)return!0;t=t.parentNode}}return s(e)};r.HY.IS_IE&&("undefined"===typeof document.documentMode||document.documentMode<9)?r.G8.addListener(this.diagramContainer,"contextmenu",d):this.diagramContainer.oncontextmenu=d}else l.panningHandler.usePopupTrigger=!1;if(l.init(this.diagramContainer),null!=l.view.getDrawPane()){var h=l.view.getDrawPane().ownerSVGElement;null!=h&&(h.style.position="absolute")}if(this.hoverIcons=this.createHoverIcons(),null!=l.graphHandler){var u=l.graphHandler.start;l.graphHandler.start=function(){null!=C.hoverIcons&&C.hoverIcons.reset(),u.apply(this,arguments)}}r.G8.addListener(this.diagramContainer,"mousemove",r.vJ.bind(this,(function(e){var t=r.vJ.getOffset(this.diagramContainer);r.G8.getClientX(e)-t.x-this.diagramContainer.clientWidth>0||r.G8.getClientY(e)-t.y-this.diagramContainer.clientHeight>0?this.diagramContainer.setAttribute("title",r.xK.get("panTooltip")):this.diagramContainer.removeAttribute("title")})));var p=!1,g=this.hoverIcons.isResetEvent;this.hoverIcons.isResetEvent=function(){return p||g.apply(this,arguments)},this.keydownHandler=r.vJ.bind(this,(function(e){32!=e.which||l.isEditing()?r.G8.isConsumed(e)||27!=e.keyCode||this.hideDialog(null,!0):(p=!0,this.hoverIcons.reset(),l.container.style.cursor="move",l.isEditing()||r.G8.getSource(e)!=l.container||r.G8.consume(e))})),r.G8.addListener(document,"keydown",this.keydownHandler),this.keyupHandler=r.vJ.bind(this,(function(){l.container.style.cursor="",p=!1})),r.G8.addListener(document,"keyup",this.keyupHandler);var A=l.panningHandler.isForcePanningEvent;l.panningHandler.isForcePanningEvent=function(e){return A.apply(this,arguments)||p||r.G8.isMouseEvent(e.getEvent())&&(this.usePopupTrigger||!r.G8.isPopupTrigger(e.getEvent()))&&(!r.G8.isControlDown(e.getEvent())&&r.G8.isRightMouseButton(e.getEvent())||r.G8.isMiddleMouseButton(e.getEvent()))};var f=l.cellEditor.isStopEditingEvent;l.cellEditor.isStopEditingEvent=function(e){return f.apply(this,arguments)||13==e.keyCode&&(!r.HY.IS_SF&&r.G8.isControlDown(e)||r.HY.IS_MAC&&r.G8.isMetaDown(e)||r.HY.IS_SF&&r.G8.isShiftDown(e))};var y=l.isZoomWheelEvent;l.isZoomWheelEvent=function(){return p||y.apply(this,arguments)};var v=!1,w=null,b=null,S=null,E=r.vJ.bind(this,(function(){if(null!=this.toolbar&&v!=l.cellEditor.isContentEditing()){for(var e=this.toolbar.container.firstChild,t=[];null!=e;){var i=e.nextSibling;r.vJ.indexOf(this.toolbar.staticElements,e)<0&&(e.parentNode.removeChild(e),t.push(e)),e=i}var n=this.toolbar.fontMenu,o=this.toolbar.sizeMenu;if(null==S)this.toolbar.createTextToolbar();else{for(var a=0;a<S.length;a++)this.toolbar.container.appendChild(S[a]);this.toolbar.fontMenu=w,this.toolbar.sizeMenu=b}v=l.cellEditor.isContentEditing(),w=n,b=o,S=t}})),C=this,T=l.cellEditor.startEditing;l.cellEditor.startEditing=function(){if(T.apply(this,arguments),E(),l.cellEditor.isContentEditing()){var e=!1,t=function(){e||(e=!0,window.setTimeout((function(){for(var t=l.getSelectedElement();null!=t&&t.nodeType!=r.fV.NODETYPE_ELEMENT;)t=t.parentNode;if(null!=t){var i=r.vJ.getCurrentStyle(t);if(null!=i&&null!=C.toolbar){var n=i.fontFamily;"'"==n.charAt(0)&&(n=n.substring(1)),"'"==n.charAt(n.length-1)&&(n=n.substring(0,n.length-1)),C.toolbar.setFontName(n),C.toolbar.setFontSize(parseInt(i.fontSize))}}e=!1}),0))};r.G8.addListener(l.cellEditor.textarea,"input",t),r.G8.addListener(l.cellEditor.textarea,"touchend",t),r.G8.addListener(l.cellEditor.textarea,"mouseup",t),r.G8.addListener(l.cellEditor.textarea,"keyup",t),t()}};var I=l.cellEditor.stopEditing;if(l.cellEditor.stopEditing=function(){try{I.apply(this,arguments),E()}catch(e){C.handleError(e)}},l.container.setAttribute("tabindex","0"),l.container.style.cursor="default",window.self===window.top&&null!=l.container.parentNode)try{l.container.focus()}catch(G){}var L=l.fireMouseEvent;l.fireMouseEvent=function(e){e==r.G8.MOUSE_DOWN&&this.container.focus(),L.apply(this,arguments)},l.popupMenuHandler.autoExpand=!0,null!=this.menus&&(l.popupMenuHandler.factoryMethod=r.vJ.bind(this,(function(e,t,i){this.menus.createPopupMenu(e,t,i)}))),r.G8.addGestureListeners(document,r.vJ.bind(this,(function(){l.popupMenuHandler.hideMenu()}))),this.keyHandler=this.createKeyHandler(e),this.getKeyHandler=function(){return this.keyHandler};var V=["rounded","shadow","glass","dashed","dashPattern","comic","labelBackgroundColor"],M=["shape","edgeStyle","curved","rounded","elbow","comic","jumpStyle","jumpSize"];this.setDefaultStyle=function(e){try{var t=l.view.getState(e);if(null!=t){var i=e.clone();i.style="";var n=l.getCellStyle(i),o=[],a=[];for(var s in t.style)n[s]!=t.style[s]&&(o.push(t.style[s]),a.push(s));for(var d=l.getModel().getStyle(t.cell),h=null!=d?d.split(";"):[],c=0;c<h.length;c++){var u=h[c],p=u.indexOf("=");if(p>=0){s=u.substring(0,p);var g=u.substring(p+1);null!=n[s]&&"none"==g&&(o.push(g),a.push(s))}}l.getModel().isEdge(t.cell)?l.currentEdgeStyle={}:l.currentVertexStyle={},this.fireEvent(new r.vC("styleChanged","keys",a,"values",o,"cells",[t.cell]))}}catch(G){this.handleError(G)}},this.clearDefaultStyle=function(){l.currentEdgeStyle=r.vJ.clone(l.defaultEdgeStyle),l.currentVertexStyle=r.vJ.clone(l.defaultVertexStyle),this.fireEvent(new r.vC("styleChanged","keys",[],"values",[],"cells",[]))};for(var D=["fontFamily","fontSize","fontColor"],k=["edgeStyle","startArrow","startFill","startSize","endArrow","endFill","endSize"],P=[["startArrow","startFill","startSize","sourcePerimeterSpacing","endArrow","endFill","endSize","targetPerimeterSpacing"],["strokeColor","strokeWidth"],["fillColor","gradientColor"],D,["opacity"],["align"],["html"]],F=0;F<P.length;F++)for(var O=0;O<P[F].length;O++)V.push(P[F][O]);for(F=0;F<M.length;F++)r.vJ.indexOf(V,M[F])<0&&V.push(M[F]);var H=function(e,t){var i=l.getModel();i.beginUpdate();try{for(var n=0;n<e.length;n++){var o,a=e[n];if(t)o=["fontSize","fontFamily","fontColor"];else{var s=i.getStyle(a),d=null!=s?s.split(";"):[];o=V.slice();for(var h=0;h<d.length;h++){var c=d[h],u=c.indexOf("=");if(u>=0){var p=c.substring(0,u),g=r.vJ.indexOf(o,p);g>=0&&o.splice(g,1);for(var A=0;A<P.length;A++){var m=P[A];if(r.vJ.indexOf(m,p)>=0)for(var f=0;f<m.length;f++){var y=r.vJ.indexOf(o,m[f]);y>=0&&o.splice(y,1)}}}}}var v=i.isEdge(a),w=v?l.currentEdgeStyle:l.currentVertexStyle,b=i.getStyle(a);for(h=0;h<o.length;h++){var S=w[p=o[h]];null==S||"shape"==p&&!v||(!v||r.vJ.indexOf(M,p)<0)&&(b=r.vJ.setStyle(b,p,S))}i.setStyle(a,b)}}finally{i.endUpdate()}};if(l.addListener("cellsInserted",(function(e,t){H(t.getProperty("cells"))})),l.addListener("textInserted",(function(e,t){H(t.getProperty("cells"),!0)})),l.connectionHandler.addListener(r.G8.CONNECT,(function(e,t){var i=[t.getProperty("cell")];t.getProperty("terminalInserted")&&i.push(t.getProperty("terminal")),H(i)})),this.addListener("styleChanged",r.vJ.bind(this,(function(e,t){var i=t.getProperty("cells"),n=!1,o=!1;if(i.length>0)for(var a=0;a<i.length&&(n=l.getModel().isVertex(i[a])||n,!(o=l.getModel().isEdge(i[a])||o)||!n);a++);else n=!0,o=!0;var s=t.getProperty("keys"),d=t.getProperty("values");for(a=0;a<s.length;a++){var h=r.vJ.indexOf(D,s[a])>=0;("strokeColor"!=s[a]||null!=d[a]&&"none"!=d[a])&&(r.vJ.indexOf(M,s[a])>=0?o||r.vJ.indexOf(k,s[a])>=0?null==d[a]?delete l.currentEdgeStyle[s[a]]:l.currentEdgeStyle[s[a]]=d[a]:n&&r.vJ.indexOf(V,s[a])>=0&&(null==d[a]?delete l.currentVertexStyle[s[a]]:l.currentVertexStyle[s[a]]=d[a]):r.vJ.indexOf(V,s[a])>=0&&((n||h)&&(null==d[a]?delete l.currentVertexStyle[s[a]]:l.currentVertexStyle[s[a]]=d[a]),(o||h||r.vJ.indexOf(k,s[a])>=0)&&(null==d[a]?delete l.currentEdgeStyle[s[a]]:l.currentEdgeStyle[s[a]]=d[a])))}if(null!=this.toolbar){if(this.toolbar.setFontName(l.currentVertexStyle.fontFamily||x.fQ.prototype.defaultFont),this.toolbar.setFontSize(l.currentVertexStyle.fontSize||x.fQ.prototype.defaultFontSize),null!=this.toolbar.edgeStyleMenu){var c=this.toolbar.edgeStyleMenu.getElementsByTagName("div")[0];"orthogonalEdgeStyle"==l.currentEdgeStyle.edgeStyle&&"1"==l.currentEdgeStyle.curved?c.className="geSprite geSprite-curved":"straight"==l.currentEdgeStyle.edgeStyle||"none"==l.currentEdgeStyle.edgeStyle||null==l.currentEdgeStyle.edgeStyle?c.className="geSprite geSprite-straight":"entityRelationEdgeStyle"==l.currentEdgeStyle.edgeStyle?c.className="geSprite geSprite-entity":"elbowEdgeStyle"==l.currentEdgeStyle.edgeStyle?c.className="geSprite geSprite-"+("vertical"==l.currentEdgeStyle.elbow?"verticalelbow":"horizontalelbow"):"isometricEdgeStyle"==l.currentEdgeStyle.edgeStyle?c.className="geSprite geSprite-"+("vertical"==l.currentEdgeStyle.elbow?"verticalisometric":"horizontalisometric"):c.className="geSprite geSprite-orthogonal"}if(null!=this.toolbar.edgeShapeMenu){var u=this.toolbar.edgeShapeMenu.getElementsByTagName("div")[0];"link"==l.currentEdgeStyle.shape?u.className="geSprite geSprite-linkedge":"flexArrow"==l.currentEdgeStyle.shape?u.className="geSprite geSprite-arrow":"arrow"==l.currentEdgeStyle.shape?u.className="geSprite geSprite-simplearrow":u.className="geSprite geSprite-connection"}if(null!=this.toolbar.lineStartMenu)this.toolbar.lineStartMenu.getElementsByTagName("div")[0].className=this.getCssClassForMarker("start",l.currentEdgeStyle.shape,l.currentEdgeStyle[r.fV.STYLE_STARTARROW],r.vJ.getValue(l.currentEdgeStyle,"startFill","1"));if(null!=this.toolbar.lineEndMenu)this.toolbar.lineEndMenu.getElementsByTagName("div")[0].className=this.getCssClassForMarker("end",l.currentEdgeStyle.shape,l.currentEdgeStyle[r.fV.STYLE_ENDARROW],r.vJ.getValue(l.currentEdgeStyle,"endFill","1"))}}))),null!=this.toolbar){var R=r.vJ.bind(this,(function(){var e=l.currentVertexStyle.fontFamily||"Helvetica",t=String(l.currentVertexStyle.fontSize||"12"),i=l.getView().getState(l.getSelectionCell());null!=i&&(e=i.style[r.fV.STYLE_FONTFAMILY]||e,t=i.style[r.fV.STYLE_FONTSIZE]||t,e.length>10&&(e=e.substring(0,8)+"...")),this.toolbar.setFontName(e),this.toolbar.setFontSize(t)}));l.getSelectionModel().addListener(r.G8.CHANGE,R),l.getModel().addListener(r.G8.CHANGE,R)}l.addListener(r.G8.CELLS_ADDED,(function(e,t){var i=t.getProperty("cells"),n=t.getProperty("parent");l.getModel().isLayer(n)&&!l.isCellVisible(n)&&null!=i&&i.length>0&&l.getModel().setVisible(n,!0)})),this.gestureHandler=r.vJ.bind(this,(function(e){null!=this.currentMenu&&r.G8.getSource(e)!=this.currentMenu.div&&this.hideCurrentMenu()})),r.G8.addGestureListeners(document,this.gestureHandler),this.resizeHandler=r.vJ.bind(this,(function(){window.setTimeout(r.vJ.bind(this,(function(){null!=this.editor.graph&&this.refresh()})),0)})),r.G8.addListener(window,"resize",this.resizeHandler),this.orientationChangeHandler=r.vJ.bind(this,(function(){this.refresh()})),r.G8.addListener(window,"orientationchange",this.orientationChangeHandler),r.HY.IS_IOS&&!window.navigator.standalone&&(this.scrollHandler=r.vJ.bind(this,(function(){window.scrollTo(0,0)})),r.G8.addListener(window,"scroll",this.scrollHandler)),this.editor.addListener("resetGraphView",r.vJ.bind(this,(function(){this.resetScrollbars()}))),this.addListener("gridEnabledChanged",r.vJ.bind(this,(function(){l.view.validateBackground()}))),this.addListener("backgroundColorChanged",r.vJ.bind(this,(function(){l.view.validateBackground()}))),l.addListener("gridSizeChanged",r.vJ.bind(this,(function(){l.isGridEnabled()&&l.view.validateBackground()}))),this.editor.resetGraph()}this.init(),l.standalone||this.open()}r.vJ.extend(L,r.tM),L.compactUi=!0,L.prototype.splitSize=r.HY.IS_TOUCH||r.HY.IS_POINTER?12:8,L.prototype.menubarHeight=30,L.prototype.formatEnabled=!0,L.prototype.formatWidth=240,L.prototype.toolbarHeight=38,L.prototype.footerHeight=28,L.prototype.sidebarFooterHeight=34,L.prototype.hsplitPosition=screen.width<=640?118:240,L.prototype.allowAnimation=!0,L.prototype.lightboxMaxFitScale=2,L.prototype.lightboxVerticalDivider=4,L.prototype.hsplitClickEnabled=!1,L.prototype.init=function(){var e=this.editor.graph;if(!e.standalone){r.G8.addListener(e.container,"scroll",r.vJ.bind(this,(function(){e.tooltipHandler.hide(),null!=e.connectionHandler&&null!=e.connectionHandler.constraintHandler&&e.connectionHandler.constraintHandler.reset()}))),e.addListener(r.G8.ESCAPE,r.vJ.bind(this,(function(){e.tooltipHandler.hide();var t=e.getRubberband();null!=t&&t.cancel()}))),r.G8.addListener(e.container,"keydown",r.vJ.bind(this,(function(e){this.onKeyDown(e)}))),r.G8.addListener(e.container,"keypress",r.vJ.bind(this,(function(e){this.onKeyPress(e)}))),this.addUndoListener(),this.addBeforeUnloadListener(),e.getSelectionModel().addListener(r.G8.CHANGE,r.vJ.bind(this,(function(){this.updateActionStates()}))),e.getModel().addListener(r.G8.CHANGE,r.vJ.bind(this,(function(){this.updateActionStates()})));var t=e.setDefaultParent,i=this;this.editor.graph.setDefaultParent=function(){t.apply(this,arguments),i.updateActionStates()},this.updateActionStates(),this.initClipboard(),this.initCanvas(),null!=this.format&&this.format.init()}},L.prototype.onKeyDown=function(e){var t=this.editor.graph;9!=e.which||!t.isEnabled()||r.G8.isAltDown(e)||t.isEditing()&&r.G8.isShiftDown(e)||(t.isEditing()?t.stopEditing(!1):t.selectCell(!r.G8.isShiftDown(e)),r.G8.consume(e))},L.prototype.onKeyPress=function(e){var t=this.editor.graph;if(this.isImmediateEditingEvent(e)&&!t.isEditing()&&!t.isSelectionEmpty()&&0!==e.which&&27!==e.which&&!r.G8.isAltDown(e)&&!r.G8.isControlDown(e)&&!r.G8.isMetaDown(e)&&(t.escape(),t.startEditing(),r.HY.IS_FF)){var i=t.cellEditor;if(null!=i.textarea){i.textarea.innerHTML=String.fromCharCode(e.which);var n=document.createRange();n.selectNodeContents(i.textarea),n.collapse(!1);var l=window.getSelection();l.removeAllRanges(),l.addRange(n)}}},L.prototype.isImmediateEditingEvent=function(){return!0},L.prototype.getCssClassForMarker=function(e,t,i,n){return"flexArrow"==t?null!=i&&i!=r.fV.NONE?"geSprite geSprite-"+e+"blocktrans":"geSprite geSprite-noarrow":"box"==i||"halfCircle"==i?"geSprite geSvgSprite geSprite-"+i+("end"==e?" geFlipSprite":""):i==r.fV.ARROW_CLASSIC?"1"==n?"geSprite geSprite-"+e+"classic":"geSprite geSprite-"+e+"classictrans":i==r.fV.ARROW_CLASSIC_THIN?"1"==n?"geSprite geSprite-"+e+"classicthin":"geSprite geSprite-"+e+"classicthintrans":i==r.fV.ARROW_OPEN?"geSprite geSprite-"+e+"open":i==r.fV.ARROW_OPEN_THIN?"geSprite geSprite-"+e+"openthin":i==r.fV.ARROW_BLOCK?"1"==n?"geSprite geSprite-"+e+"block":"geSprite geSprite-"+e+"blocktrans":i==r.fV.ARROW_BLOCK_THIN?"1"==n?"geSprite geSprite-"+e+"blockthin":"geSprite geSprite-"+e+"blockthintrans":i==r.fV.ARROW_OVAL?"1"==n?"geSprite geSprite-"+e+"oval":"geSprite geSprite-"+e+"ovaltrans":i==r.fV.ARROW_DIAMOND?"1"==n?"geSprite geSprite-"+e+"diamond":"geSprite geSprite-"+e+"diamondtrans":i==r.fV.ARROW_DIAMOND_THIN?"1"==n?"geSprite geSprite-"+e+"thindiamond":"geSprite geSprite-"+e+"thindiamondtrans":"openAsync"==i?"geSprite geSprite-"+e+"openasync":"dash"==i?"geSprite geSprite-"+e+"dash":"cross"==i?"geSprite geSprite-"+e+"cross":"async"==i?"1"==n?"geSprite geSprite-"+e+"async":"geSprite geSprite-"+e+"asynctrans":"circle"==i||"circlePlus"==i?"1"==n||"circle"==i?"geSprite geSprite-"+e+"circle":"geSprite geSprite-"+e+"circleplus":"ERone"==i?"geSprite geSprite-"+e+"erone":"ERmandOne"==i?"geSprite geSprite-"+e+"eronetoone":"ERmany"==i?"geSprite geSprite-"+e+"ermany":"ERoneToMany"==i?"geSprite geSprite-"+e+"eronetomany":"ERzeroToOne"==i?"geSprite geSprite-"+e+"eroneopt":"ERzeroToMany"==i?"geSprite geSprite-"+e+"ermanyopt":"geSprite geSprite-noarrow"},L.prototype.createMenus=function(){return new x.fQ(this)},L.prototype.updatePasteActionStates=function(){var e=this.editor.graph,t=this.actions.get("paste"),i=this.actions.get("pasteHere");t.setEnabled(this.editor.graph.cellEditor.isContentEditing()||!r.cC.isEmpty()&&e.isEnabled()&&!e.isCellLocked(e.getDefaultParent())),i.setEnabled(t.isEnabled())},L.prototype.initClipboard=function(){var e=this,t=r.cC.cut;r.cC.cut=function(i){i.cellEditor.isContentEditing()?document.execCommand("cut",!1,null):t.apply(this,arguments),e.updatePasteActionStates()},r.cC.copy=function(t){var i=null;if(t.cellEditor.isContentEditing())document.execCommand("copy",!1,null);else{i=i||t.getSelectionCells(),i=t.getExportableCells(t.model.getTopmostCells(i));for(var n=new Object,l=t.createCellLookup(i),o=t.cloneCells(i,null,n),a=new r.DX,s=a.getChildAt(a.getRoot(),0),d=0;d<o.length;d++){a.add(s,o[d]);var h=t.view.getState(i[d]);if(null!=h){var c=t.getCellGeometry(o[d]);null!=c&&c.relative&&!a.isEdge(i[d])&&null==l[r.fb.get(a.getParent(i[d]))]&&(c.offset=null,c.relative=!1,c.x=h.x/h.view.scale-h.view.translate.x,c.y=h.y/h.view.scale-h.view.translate.y)}}t.updateCustomLinks(t.createCellMapping(n,l),o),r.cC.insertCount=1,r.cC.setCells(o)}return e.updatePasteActionStates(),i};var i=r.cC.paste;r.cC.paste=function(t){var n=null;return t.cellEditor.isContentEditing()?document.execCommand("paste",!1,null):n=i.apply(this,arguments),e.updatePasteActionStates(),n};var n=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){n.apply(this,arguments),e.updatePasteActionStates()};var l=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(){l.apply(this,arguments),e.updatePasteActionStates()},this.updatePasteActionStates()},L.prototype.lazyZoomDelay=20,L.prototype.wheelZoomDelay=400,L.prototype.buttonZoomDelay=600,L.prototype.initCanvas=function(){var e=this.editor.graph;e.timerAutoScroll=!0,e.getPagePadding=function(){return new r.IO(Math.max(0,Math.round((e.container.offsetWidth-34)/e.view.scale)),Math.max(0,Math.round((e.container.offsetHeight-34)/e.view.scale)))},e.view.getBackgroundPageBounds=function(){var e=this.graph.getPageLayout(),t=this.graph.getPageSize();return new r.P5(this.scale*(this.translate.x+e.x*t.width),this.scale*(this.translate.y+e.y*t.height),this.scale*e.width*t.width,this.scale*e.height*t.height)},e.getPreferredPageSize=function(){var e=this.getPageLayout(),t=this.getPageSize();return new r.P5(0,0,e.width*t.width,e.height*t.height)};var t=null,i=this;if(this.editor.isChromelessView()){t=r.vJ.bind(this,(function(t,i,n,l){if(null!=e.container&&!e.isViewer()){n=null!=n?n:0,l=null!=l?l:0;var o=e.pageVisible?e.view.getBackgroundPageBounds():e.getGraphBounds(),a=r.vJ.hasScrollbars(e.container),s=e.view.translate,d=e.view.scale,h=r.P5.fromRectangle(o);h.x=h.x/d-s.x,h.y=h.y/d-s.y,h.width/=d,h.height/=d;var c=e.container.scrollTop,u=e.container.scrollLeft,p=r.HY.IS_QUIRKS||document.documentMode>=8?20:14;8!=document.documentMode&&9!=document.documentMode||(p+=3);var g=e.container.offsetWidth-p,A=e.container.offsetHeight-p,m=t?Math.max(.3,Math.min(i||1,g/h.width)):d,f=(g-m*h.width)/2/m,y=0==this.lightboxVerticalDivider?0:(A-m*h.height)/this.lightboxVerticalDivider/m;if(a&&(f=Math.max(f,0),y=Math.max(y,0)),a||o.width<g||o.height<A)e.view.scaleAndTranslate(m,Math.floor(f-h.x),Math.floor(y-h.y)),e.container.scrollTop=c*m/d,e.container.scrollLeft=u*m/d;else if(0!=n||0!=l){var v=e.view.translate;e.view.setTranslate(Math.floor(v.x+n/d),Math.floor(v.y+l/d))}}})),this.chromelessResize=t,this.chromelessWindowResize=r.vJ.bind(this,(function(){this.chromelessResize(!1)}));var n=r.vJ.bind(this,(function(){this.chromelessWindowResize(!1)}));r.G8.addListener(window,"resize",n),this.destroyFunctions.push((function(){r.G8.removeListener(window,"resize",n)})),this.editor.addListener("resetGraphView",r.vJ.bind(this,(function(){this.chromelessResize(!0)}))),this.actions.get("zoomIn").funct=r.vJ.bind(this,(function(){e.zoomIn(),this.chromelessResize(!1)})),this.actions.get("zoomOut").funct=r.vJ.bind(this,(function(){e.zoomOut(),this.chromelessResize(!1)})),this.chromelessToolbar=document.createElement("div"),this.chromelessToolbar.style.position="fixed",this.chromelessToolbar.style.overflow="hidden",this.chromelessToolbar.style.boxSizing="border-box",this.chromelessToolbar.style.whiteSpace="nowrap",this.chromelessToolbar.style.backgroundColor="#000000",this.chromelessToolbar.style.padding="10px 10px 8px 10px",this.chromelessToolbar.style.left=e.isViewer()?"0":"50%",r.HY.IS_VML||(r.vJ.setPrefixedStyle(this.chromelessToolbar.style,"borderRadius","20px"),r.vJ.setPrefixedStyle(this.chromelessToolbar.style,"transition","opacity 600ms ease-in-out"));var l=r.vJ.bind(this,(function(){var t=r.vJ.getCurrentStyle(e.container);e.isViewer()?this.chromelessToolbar.style.top="0":this.chromelessToolbar.style.bottom=(null!=t?parseInt(t["margin-bottom"]||0):0)+(null!=this.tabContainer?20+parseInt(this.tabContainer.style.height):20)+"px"}));this.editor.addListener("resetGraphView",l),l();var o=r.vJ.bind(this,(function(e,t,i){var n=document.createElement("span");n.style.paddingLeft="8px",n.style.paddingRight="8px",n.style.cursor="pointer",r.G8.addListener(n,"click",e),null!=i&&n.setAttribute("title",i);var l=document.createElement("img");return l.setAttribute("border","0"),l.setAttribute("src",t),n.appendChild(l),this.chromelessToolbar.appendChild(n),n})),s=o(r.vJ.bind(this,(function(e){this.actions.get("previousPage").funct(),r.G8.consume(e)})),a.KE.previousLargeImage,r.xK.get("previousPage")),d=document.createElement("div");d.style.display="inline-block",d.style.verticalAlign="top",d.style.fontFamily="Helvetica,Arial",d.style.marginTop="8px",d.style.fontSize="14px",d.style.color="#ffffff",this.chromelessToolbar.appendChild(d);var h=o(r.vJ.bind(this,(function(e){this.actions.get("nextPage").funct(),r.G8.consume(e)})),a.KE.nextLargeImage,r.xK.get("nextPage")),c=r.vJ.bind(this,(function(){null!=this.pages&&this.pages.length>1&&null!=this.currentPage&&(d.innerHTML="",r.vJ.write(d,r.vJ.indexOf(this.pages,this.currentPage)+1+" / "+this.pages.length))}));s.style.paddingLeft="0px",s.style.paddingRight="4px",h.style.paddingLeft="4px",h.style.paddingRight="0px";var u=r.vJ.bind(this,(function(){null!=this.pages&&this.pages.length>1&&null!=this.currentPage?(h.style.display="",s.style.display="",d.style.display="inline-block"):(h.style.display="none",s.style.display="none",d.style.display="none"),c()}));this.editor.addListener("resetGraphView",u),this.editor.addListener("pageSelected",c),o(r.vJ.bind(this,(function(e){this.actions.get("zoomOut").funct(),r.G8.consume(e)})),a.KE.zoomOutLargeImage,r.xK.get("zoomOut")+" (Alt+Mousewheel)"),o(r.vJ.bind(this,(function(e){this.actions.get("zoomIn").funct(),r.G8.consume(e)})),a.KE.zoomInLargeImage,r.xK.get("zoomIn")+" (Alt+Mousewheel)"),o(r.vJ.bind(this,(function(t){e.isLightboxView()?(1==e.view.scale?this.lightboxFit():e.zoomTo(1),this.chromelessResize(!1)):this.chromelessResize(!0),r.G8.consume(t)})),a.KE.actualSizeLargeImage,r.xK.get("fit"));var p=null,g=null,A=r.vJ.bind(this,(function(e){null!=p&&(window.clearTimeout(p),p=null),null!=g&&(window.clearTimeout(g),g=null),p=window.setTimeout(r.vJ.bind(this,(function(){r.vJ.setOpacity(this.chromelessToolbar,0),p=null,g=window.setTimeout(r.vJ.bind(this,(function(){this.chromelessToolbar.style.display="none",g=null})),600)})),e||200)})),m=r.vJ.bind(this,(function(e){null!=p&&(window.clearTimeout(p),p=null),null!=g&&(window.clearTimeout(g),g=null),this.chromelessToolbar.style.display="",r.vJ.setOpacity(this.chromelessToolbar,e||30)}));if(this.addChromelessToolbarItems(o),null==this.editor.editButtonLink&&null==this.editor.editButtonFunc||o(r.vJ.bind(this,(function(t){null!=this.editor.editButtonFunc?this.editor.editButtonFunc():"_blank"==this.editor.editButtonLink?this.editor.editAsNew(this.getEditBlankXml()):e.openLink(this.editor.editButtonLink,"editWindow"),r.G8.consume(t)})),a.KE.editLargeImage,r.xK.get("edit")),null!=this.lightboxToolbarActions)for(var f=0;f<this.lightboxToolbarActions.length;f++){var y=this.lightboxToolbarActions[f];o(y.fn,y.icon,y.tooltip)}this.chromelessToolbar.style.display="none",e.isViewer()||r.vJ.setPrefixedStyle(this.chromelessToolbar.style,"transform","translate(-50%,0)"),e.container.appendChild(this.chromelessToolbar),r.G8.addListener(e.container,r.HY.IS_POINTER?"pointermove":"mousemove",r.vJ.bind(this,(function(e){r.G8.isTouchEvent(e)||(r.G8.isShiftDown(e)||m(30),A())}))),r.G8.addListener(this.chromelessToolbar,r.HY.IS_POINTER?"pointermove":"mousemove",(function(e){r.G8.consume(e)})),r.G8.addListener(this.chromelessToolbar,"mouseenter",r.vJ.bind(this,(function(e){r.G8.isShiftDown(e)?A():m(100)}))),r.G8.addListener(this.chromelessToolbar,"mousemove",r.vJ.bind(this,(function(e){r.G8.isShiftDown(e)?A():m(100),r.G8.consume(e)}))),r.G8.addListener(this.chromelessToolbar,"mouseleave",r.vJ.bind(this,(function(e){r.G8.isTouchEvent(e)||m(30)})));var v=e.getTolerance();e.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(t,i){this.startX=i.getGraphX(),this.startY=i.getGraphY(),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop},mouseMove:function(){},mouseUp:function(t,n){r.G8.isTouchEvent(n.getEvent())&&Math.abs(this.scrollLeft-e.container.scrollLeft)<v&&Math.abs(this.scrollTop-e.container.scrollTop)<v&&Math.abs(this.startX-n.getGraphX())<v&&Math.abs(this.startY-n.getGraphY())<v&&(parseFloat(i.chromelessToolbar.style.opacity||0)>0?A():m(30))}})}else if(this.editor.extendCanvas){var w=e.view.validate;if(e.view.validate=function(){if(null!=this.graph.container&&r.vJ.hasScrollbars(this.graph.container)){var e=this.graph.getPagePadding(),t=this.graph.getPageSize();this.translate.x=e.x-(this.x0||0)*t.width,this.translate.y=e.y-(this.y0||0)*t.height}w.apply(this,arguments)},!e.isViewer()){var b=e.sizeDidChange;e.sizeDidChange=function(){if(null!=this.container&&r.vJ.hasScrollbars(this.container)){var t=this.getPageLayout(),i=this.getPagePadding(),n=this.getPageSize(),l=Math.ceil(2*i.x+t.width*n.width),o=Math.ceil(2*i.y+t.height*n.height),a=e.minimumGraphSize;null!=a&&a.width==l&&a.height==o||(e.minimumGraphSize=new r.P5(0,0,l,o));var s=i.x-t.x*n.width,d=i.y-t.y*n.height;if(!this.autoTranslate&&(this.view.translate.x!=s||this.view.translate.y!=d)){this.autoTranslate=!0,this.view.x0=t.x,this.view.y0=t.y;var h=e.view.translate.x,c=e.view.translate.y;return e.view.setTranslate(s,d),e.container.scrollLeft+=Math.round((s-h)*e.view.scale),e.container.scrollTop+=Math.round((d-c)*e.view.scale),void(this.autoTranslate=!1)}b.apply(this,arguments)}else this.fireEvent(new r.vC(r.G8.SIZE,"bounds",this.getGraphBounds()))}}}var S=e.view.getBackgroundPane(),E=e.view.getDrawPane();e.cumulativeZoomFactor=1;var C=null,x=null,T=null,I=null,L=function(n){null!=C&&window.clearTimeout(C),window.setTimeout((function(){e.isMouseDown||(C=window.setTimeout(r.vJ.bind(this,(function(){e.isFastZoomEnabled()&&(null!=e.view.backgroundPageShape&&null!=e.view.backgroundPageShape.node&&(r.vJ.setPrefixedStyle(e.view.backgroundPageShape.node.style,"transform-origin",null),r.vJ.setPrefixedStyle(e.view.backgroundPageShape.node.style,"transform",null)),E.style.transformOrigin="",S.style.transformOrigin="",r.HY.IS_SF?(E.style.transform="scale(1)",S.style.transform="scale(1)",window.setTimeout((function(){E.style.transform="",S.style.transform=""}),0)):(E.style.transform="",S.style.transform=""),e.view.getDecoratorPane().style.opacity="",e.view.getOverlayPane().style.opacity="");var n=new r.IO(e.container.scrollLeft,e.container.scrollTop),l=r.vJ.getOffset(e.container),o=e.view.scale,a=0,s=0;null!=x&&(a=e.container.offsetWidth/2-x.x+l.x,s=e.container.offsetHeight/2-x.y+l.y),e.zoom(e.cumulativeZoomFactor),e.view.scale!=o&&(null!=T&&(a+=n.x-T.x,s+=n.y-T.y),null!=t&&i.chromelessResize(!1,null,a*(e.cumulativeZoomFactor-1),s*(e.cumulativeZoomFactor-1)),!r.vJ.hasScrollbars(e.container)||0==a&&0==s||(e.container.scrollLeft-=a*(e.cumulativeZoomFactor-1),e.container.scrollTop-=s*(e.cumulativeZoomFactor-1))),null!=I&&E.setAttribute("filter",I),e.cumulativeZoomFactor=1,C=null,T=null,x=null,I=null})),null!=n?n:e.isFastZoomEnabled()?i.wheelZoomDelay:i.lazyZoomDelay))}),0)};e.lazyZoom=function(t,n,l){if((n=n||!e.scrollbars)&&(x=new r.IO(e.container.offsetLeft+e.container.clientWidth/2,e.container.offsetTop+e.container.clientHeight/2)),t?this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale+.05)/this.view.scale:(this.cumulativeZoomFactor*=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale):this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale-.05)/this.view.scale:(this.cumulativeZoomFactor/=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale),this.cumulativeZoomFactor=Math.max(.05,Math.min(this.view.scale*this.cumulativeZoomFactor,160))/this.view.scale,e.isFastZoomEnabled()){null==I&&""!=E.getAttribute("filter")&&(I=E.getAttribute("filter"),E.removeAttribute("filter")),T=new r.IO(e.container.scrollLeft,e.container.scrollTop);var o=n?e.container.scrollLeft+e.container.clientWidth/2:x.x+e.container.scrollLeft-e.container.offsetLeft,a=n?e.container.scrollTop+e.container.clientHeight/2:x.y+e.container.scrollTop-e.container.offsetTop;if(E.style.transformOrigin=o+"px "+a+"px",E.style.transform="scale("+this.cumulativeZoomFactor+")",S.style.transformOrigin=o+"px "+a+"px",S.style.transform="scale("+this.cumulativeZoomFactor+")",null!=e.view.backgroundPageShape&&null!=e.view.backgroundPageShape.node){var s=e.view.backgroundPageShape.node;r.vJ.setPrefixedStyle(s.style,"transform-origin",(n?e.container.clientWidth/2+e.container.scrollLeft-s.offsetLeft+"px":x.x+e.container.scrollLeft-s.offsetLeft-e.container.offsetLeft+"px")+" "+(n?e.container.clientHeight/2+e.container.scrollTop-s.offsetTop+"px":x.y+e.container.scrollTop-s.offsetTop-e.container.offsetTop+"px")),r.vJ.setPrefixedStyle(s.style,"transform","scale("+this.cumulativeZoomFactor+")")}e.view.getDecoratorPane().style.opacity="0",e.view.getOverlayPane().style.opacity="0",null!=i.hoverIcons&&i.hoverIcons.reset()}L(l)},r.G8.addGestureListeners(e.container,(function(){null!=C&&window.clearTimeout(C)}),null,(function(){1!=e.cumulativeZoomFactor&&L(0)})),r.G8.addListener(e.container,"scroll",(function(){C&&!e.isMouseDown&&1!=e.cumulativeZoomFactor&&L(0)})),r.G8.addMouseWheelListener(r.vJ.bind(this,(function(t,i,n){if(null==this.dialogs||0==this.dialogs.length)if(!e.scrollbars&&e.isScrollWheelEvent(t)){var l=e.view.getTranslate(),o=40/e.view.scale;r.G8.isShiftDown(t)?e.view.setTranslate(l.x+(i?-o:o),l.y):e.view.setTranslate(l.x,l.y+(i?o:-o))}else if(n||e.isZoomWheelEvent(t))for(var a=r.G8.getSource(t);null!=a;){if(a==e.container)return e.tooltipHandler.hideTooltip(),x=new r.IO(r.G8.getClientX(t),r.G8.getClientY(t)),e.lazyZoom(i),r.G8.consume(t),!1;a=a.parentNode}})),e.container),e.panningHandler.zoomGraph=function(t){e.cumulativeZoomFactor=t.scale,e.lazyZoom(t.scale>0,!0),r.G8.consume(t)}},L.prototype.addChromelessToolbarItems=function(e){e(r.vJ.bind(this,(function(e){this.actions.get("print").funct(),r.G8.consume(e)})),a.KE.printLargeImage,r.xK.get("print"))},L.prototype.createTemporaryGraph=function(e){var t=new p.TS(document.createElement("div"),null,null,e);return t.resetViewOnRootChange=!1,t.setConnectable(!1),t.gridEnabled=!1,t.autoScroll=!1,t.setTooltips(!1),t.setEnabled(!1),t.container.style.visibility="hidden",t.container.style.position="absolute",t.container.style.overflow="hidden",t.container.style.height="1px",t.container.style.width="1px",t},L.prototype.toggleFormatPanel=function(e){e=null!=e?e:0==this.formatWidth,null!=this.format&&(this.formatWidth=e?240:0,this.formatContainer.style.display=e?"":"none",this.refresh(),this.format.refresh(),this.fireEvent(new r.vC("formatWidthChanged")))},L.prototype.lightboxFit=function(e){if(this.isDiagramEmpty())this.editor.graph.view.setScale(1);else{this.editor.graph.maxFitScale=this.lightboxMaxFitScale,this.editor.graph.fit(60,null,null,null,null,null,e),this.editor.graph.maxFitScale=null}},L.prototype.isDiagramEmpty=function(){var e=this.editor.graph.getModel();return 1==e.getChildCount(e.root)&&0==e.getChildCount(e.getChildAt(e.root,0))},L.prototype.isSelectionAllowed=function(e){return"SELECT"==r.G8.getSource(e).nodeName||"INPUT"==r.G8.getSource(e).nodeName&&r.vJ.isAncestorNode(this.formatContainer,r.G8.getSource(e))},L.prototype.addBeforeUnloadListener=function(){window.onbeforeunload=r.vJ.bind(this,(function(){if(!this.editor.isChromelessView())return this.onBeforeUnload()}))},L.prototype.onBeforeUnload=function(){if(this.editor.modified)return r.xK.get("allChangesLost")},L.prototype.open=function(){try{null!=window.opener&&null!=window.opener.openFile&&window.opener.openFile.setConsumer(r.vJ.bind(this,(function(e,t){try{var i=r.vJ.parseXml(e);return this.editor.setGraphXml(i.documentElement),this.editor.setModified(!1),this.editor.undoManager.clear(),void(null!=t&&(this.editor.setFilename(t),this.updateDocumentTitle()))}catch(n){r.vJ.alert(r.xK.get("invalidOrMissingFile")+": "+n.message)}})))}catch(e){}this.editor.graph.view.validate(),this.editor.graph.sizeDidChange(),this.editor.fireEvent(new r.vC("resetGraphView"))},L.prototype.setCurrentMenu=function(e,t){this.currentMenuElt=t,this.currentMenu=e},L.prototype.resetCurrentMenu=function(){this.currentMenuElt=null,this.currentMenu=null},L.prototype.hideCurrentMenu=function(){null!=this.currentMenu&&(this.currentMenu.hideMenu(),this.resetCurrentMenu())},L.prototype.updateDocumentTitle=function(){var e=this.editor.getOrCreateFilename();null!=this.editor.appName&&(e+=" - "+this.editor.appName),document.title=e},L.prototype.createHoverIcons=function(){return new p.Ln(this.editor.graph)},L.prototype.redo=function(){try{this.editor.graph.isEditing()?document.execCommand("redo",!1,null):this.editor.undoManager.redo()}catch(e){}},L.prototype.undo=function(){try{var e=this.editor.graph;if(e.isEditing()){var t=e.cellEditor.textarea.innerHTML;document.execCommand("undo",!1,null),t==e.cellEditor.textarea.innerHTML&&(e.stopEditing(!0),this.editor.undoManager.undo())}else this.editor.undoManager.undo()}catch(i){}},L.prototype.canRedo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canRedo()},L.prototype.canUndo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canUndo()},L.prototype.getEditBlankXml=function(){return r.vJ.getXml(this.editor.getGraphXml())},L.prototype.getUrl=function(e){return null!=e?e:window.location.pathname},L.prototype.setScrollbars=function(e){var t=this.editor.graph,i=t.container.style.overflow;t.scrollbars=e,this.editor.updateGraphComponents(),i!=t.container.style.overflow&&(t.container.scrollTop=0,t.container.scrollLeft=0,t.view.scaleAndTranslate(1,0,0),this.resetScrollbars()),this.fireEvent(new r.vC("scrollbarsChanged"))},L.prototype.hasScrollbars=function(){return this.editor.graph.scrollbars},L.prototype.resetScrollbars=function(){var e=this.editor.graph;if(this.editor.extendCanvas){if(!this.editor.isChromelessView())if(r.vJ.hasScrollbars(e.container))if(e.pageVisible){var t=e.getPagePadding();e.container.scrollTop=Math.floor(t.y-this.editor.initialTopSpacing)-1,e.container.scrollLeft=Math.floor(Math.min(t.x,(e.container.scrollWidth-e.container.clientWidth)/2))-1,(i=e.getGraphBounds()).width>0&&i.height>0&&(i.x>e.container.scrollLeft+.9*e.container.clientWidth&&(e.container.scrollLeft=Math.min(i.x+i.width-e.container.clientWidth,i.x-10)),i.y>e.container.scrollTop+.9*e.container.clientHeight&&(e.container.scrollTop=Math.min(i.y+i.height-e.container.clientHeight,i.y-10)))}else{var i=e.getGraphBounds(),n=Math.max(i.width,e.scrollTileSize.width*e.view.scale),l=Math.max(i.height,e.scrollTileSize.height*e.view.scale);e.container.scrollTop=Math.floor(Math.max(0,i.y-Math.max(20,(e.container.clientHeight-l)/4))),e.container.scrollLeft=Math.floor(Math.max(0,i.x-Math.max(0,(e.container.clientWidth-n)/2)))}else{var o=r.P5.fromRectangle(e.pageVisible?e.view.getBackgroundPageBounds():e.getGraphBounds()),a=e.view.translate,s=e.view.scale;o.x=o.x/s-a.x,o.y=o.y/s-a.y,o.width/=s,o.height/=s;var d=e.pageVisible?0:Math.max(0,(e.container.clientHeight-o.height)/4);e.view.setTranslate(Math.floor(Math.max(0,(e.container.clientWidth-o.width)/2)-o.x+2),Math.floor(d-o.y+1))}}else e.container.scrollTop=0,e.container.scrollLeft=0,r.vJ.hasScrollbars(e.container)||e.view.setTranslate(0,0)},L.prototype.setPageVisible=function(e){var t=this.editor.graph,i=r.vJ.hasScrollbars(t.container),n=0,l=0;if(i&&(n=t.view.translate.x*t.view.scale-t.container.scrollLeft,l=t.view.translate.y*t.view.scale-t.container.scrollTop),t.pageVisible=e,t.pageBreaksVisible=e,t.preferPageSize=e,t.view.validateBackground(),i){var o=t.getSelectionCells();t.clearSelection(),t.setSelectionCells(o)}t.sizeDidChange(),i&&(t.container.scrollLeft=t.view.translate.x*t.view.scale-n,t.container.scrollTop=t.view.translate.y*t.view.scale-l),this.fireEvent(new r.vC("pageViewChanged"))},function(){var e=new r.XA(new s.f,["ui","previousColor","previousImage","previousFormat","previousPageScale"]);e.afterDecode=function(e,t,i){return i.previousColor=i.color,i.previousImage=i.image,i.previousFormat=i.format,i.previousPageScale=i.pageScale,null!=i.foldingEnabled&&(i.foldingEnabled=!i.foldingEnabled),i},r.pA.register(e)}(),L.prototype.setBackgroundColor=function(e){this.editor.graph.background=e,this.editor.graph.view.validateBackground(),this.fireEvent(new r.vC("backgroundColorChanged"))},L.prototype.setFoldingEnabled=function(e){this.editor.graph.foldingEnabled=e,this.editor.graph.view.revalidate(),this.fireEvent(new r.vC("foldingEnabledChanged"))},L.prototype.setPageFormat=function(e){this.editor.graph.pageFormat=e,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new r.vC("pageFormatChanged"))},L.prototype.setPageScale=function(e){this.editor.graph.pageScale=e,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new r.vC("pageScaleChanged"))},L.prototype.setGridColor=function(e){this.editor.graph.view.gridColor=e,this.editor.graph.view.validateBackground(),this.fireEvent(new r.vC("gridColorChanged"))},L.prototype.addUndoListener=function(){var e=this.actions.get("undo"),t=this.actions.get("redo"),i=this.editor.undoManager,n=r.vJ.bind(this,(function(){e.setEnabled(this.canUndo()),t.setEnabled(this.canRedo())}));i.addListener(r.G8.ADD,n),i.addListener(r.G8.UNDO,n),i.addListener(r.G8.REDO,n),i.addListener(r.G8.CLEAR,n);var l=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){l.apply(this,arguments),n()};var o=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(){o.apply(this,arguments),n()},n()},L.prototype.updateActionStates=function(){var e=this.editor.graph,t=!e.isSelectionEmpty(),i=!1,n=!1,l=e.getSelectionCells();if(null!=l)for(var r=0;r<l.length;r++){var o=l[r];if(e.getModel().isEdge(o)&&(n=!0),e.getModel().isVertex(o)&&(i=!0),n&&i)break}var a=["cut","copy","bold","italic","underline","delete","duplicate","backgroundColor","borderColor","edit","toFront","toBack","lockUnlock","solid","dashed","pasteSize","dotted","fillColor","gradientColor","shadow","fontColor","formattedText","rounded","toggleRounded","sharp","strokeColor"];for(r=0;r<a.length;r++)this.actions.get(a[r]).setEnabled(t);this.actions.get("setAsDefaultStyle").setEnabled(1==e.getSelectionCount()),this.actions.get("clearWaypoints").setEnabled(!e.isSelectionEmpty()),this.actions.get("copySize").setEnabled(1==e.getSelectionCount()),this.actions.get("turn").setEnabled(!e.isSelectionEmpty()),this.actions.get("curved").setEnabled(n),this.actions.get("rotation").setEnabled(i),this.actions.get("wordWrap").setEnabled(i),this.actions.get("autosize").setEnabled(i);var s=i&&1==e.getSelectionCount();this.actions.get("group").setEnabled(e.getSelectionCount()>1||s&&!e.isContainer(e.getSelectionCell())),this.actions.get("ungroup").setEnabled(1==e.getSelectionCount()&&(e.getModel().getChildCount(e.getSelectionCell())>0||s&&e.isContainer(e.getSelectionCell()))),this.actions.get("removeFromGroup").setEnabled(s&&e.getModel().isVertex(e.getModel().getParent(e.getSelectionCell()))),this.menus.get("navigation").setEnabled(t||null!=e.view.currentRoot),this.actions.get("collapsible").setEnabled(i&&(e.isContainer(e.getSelectionCell())||e.model.getChildCount(e.getSelectionCell())>0)),this.actions.get("home").setEnabled(null!=e.view.currentRoot),this.actions.get("exitGroup").setEnabled(null!=e.view.currentRoot),this.actions.get("enterGroup").setEnabled(1==e.getSelectionCount()&&e.isValidRoot(e.getSelectionCell()));var d=1==e.getSelectionCount()&&e.isCellFoldable(e.getSelectionCell());this.actions.get("expand").setEnabled(d),this.actions.get("collapse").setEnabled(d),this.actions.get("guides").setEnabled(e.isEnabled()),this.actions.get("grid").setEnabled(!this.editor.chromeless||this.editor.editable);var h=e.isEnabled()&&!e.isCellLocked(e.getDefaultParent());this.menus.get("layout").setEnabled(h),this.menus.get("direction").setEnabled(h&&i),this.menus.get("align").setEnabled(h&&i&&e.getSelectionCount()>1),this.menus.get("distribute").setEnabled(h&&i&&e.getSelectionCount()>1),this.actions.get("selectVertices").setEnabled(h),this.actions.get("selectEdges").setEnabled(h),this.actions.get("selectAll").setEnabled(h),this.actions.get("selectNone").setEnabled(h),this.updatePasteActionStates()},L.prototype.zeroOffset=new r.IO(0,0),L.prototype.getDiagramContainerOffset=function(){return this.zeroOffset},L.prototype.refresh=function(e){e=null==e||e;var t=r.HY.IS_IE&&(null==document.documentMode||5==document.documentMode),i=this.container.clientWidth,n=this.container.clientHeight;this.container==document.body&&(i=document.body.clientWidth||document.documentElement.clientWidth,n=t&&document.body.clientHeight||document.documentElement.clientHeight);var l=0;r.HY.IS_IOS&&!window.navigator.standalone&&window.innerHeight!=document.documentElement.clientHeight&&(l=document.documentElement.clientHeight-window.innerHeight,window.scrollTo(0,0));var o=Math.max(0,Math.min(this.hsplitPosition,i-this.splitSize-20)),a=0;null!=this.menubar&&(this.menubarContainer.style.height=this.menubarHeight+"px",a+=this.menubarHeight),null!=this.toolbar&&(this.toolbarContainer.style.top=this.menubarHeight+"px",this.toolbarContainer.style.height=this.toolbarHeight+"px",a+=this.toolbarHeight),a>0&&!r.HY.IS_QUIRKS&&(a+=1);var s=0;if(null!=this.sidebarFooterContainer){var d=this.footerHeight+l;s=Math.max(0,Math.min(n-a-d,this.sidebarFooterHeight)),this.sidebarFooterContainer.style.width=o+"px",this.sidebarFooterContainer.style.height=s+"px",this.sidebarFooterContainer.style.bottom=d+"px"}var h=null!=this.format?this.formatWidth:0;this.sidebarContainer.style.top=a+"px",this.sidebarContainer.style.width=o+"px",this.formatContainer.style.top=a+"px",this.formatContainer.style.width=h+"px",this.formatContainer.style.display=null!=this.format?"":"none";var c=this.getDiagramContainerOffset(),u=null!=this.hsplit.parentNode?o+this.splitSize:0;if(this.diagramContainer.style.left=u+c.x+"px",this.diagramContainer.style.top=a+c.y+"px",this.footerContainer.style.height=this.footerHeight+"px",this.hsplit.style.top=this.sidebarContainer.style.top,this.hsplit.style.bottom=this.footerHeight+l+"px",this.hsplit.style.left=o+"px",this.footerContainer.style.display=0==this.footerHeight?"none":"",null!=this.tabContainer&&(this.tabContainer.style.left=u+"px"),t){this.menubarContainer.style.width=i+"px",this.toolbarContainer.style.width=this.menubarContainer.style.width;var p=Math.max(0,n-this.footerHeight-this.menubarHeight-this.toolbarHeight);this.sidebarContainer.style.height=p-s+"px",this.formatContainer.style.height=p+"px",this.diagramContainer.style.width=null!=this.hsplit.parentNode?Math.max(0,i-o-this.splitSize-h)+"px":i+"px",this.footerContainer.style.width=this.menubarContainer.style.width;var g=Math.max(0,n-this.footerHeight-this.menubarHeight-this.toolbarHeight);null!=this.tabContainer&&(this.tabContainer.style.width=this.diagramContainer.style.width,this.tabContainer.style.bottom=this.footerHeight+l+"px",g-=this.tabContainer.clientHeight),this.diagramContainer.style.height=g+"px",this.hsplit.style.height=g+"px"}else{this.footerHeight>0&&(this.footerContainer.style.bottom=l+"px"),this.diagramContainer.style.right=h+"px";var A=0;null!=this.tabContainer&&(this.tabContainer.style.bottom=this.footerHeight+l+"px",this.tabContainer.style.right=this.diagramContainer.style.right,A=this.tabContainer.clientHeight),this.sidebarContainer.style.bottom=this.footerHeight+s+l+"px",this.formatContainer.style.bottom=this.footerHeight+l+"px",this.diagramContainer.style.bottom=this.footerHeight+l+A+"px"}e&&this.editor.graph.sizeDidChange()},L.prototype.createTabContainer=function(){return null},L.prototype.createDivs=function(){this.menubarContainer=this.createDiv("geMenubarContainer"),this.toolbarContainer=this.createDiv("geToolbarContainer"),this.sidebarContainer=this.createDiv("geSidebarContainer"),this.formatContainer=this.createDiv("geSidebarContainer geFormatContainer"),this.diagramContainer=this.createDiv("geDiagramContainer"),this.footerContainer=this.createDiv("geFooterContainer"),this.hsplit=this.createDiv("geHsplit"),this.hsplit.setAttribute("title",r.xK.get("collapseExpand")),this.menubarContainer.style.top="0px",this.menubarContainer.style.left="0px",this.menubarContainer.style.right="0px",this.toolbarContainer.style.left="0px",this.toolbarContainer.style.right="0px",this.sidebarContainer.style.left="0px",this.formatContainer.style.right="0px",this.formatContainer.style.zIndex="1",this.diagramContainer.style.right=(null!=this.format?this.formatWidth:0)+"px",this.footerContainer.style.left="0px",this.footerContainer.style.right="0px",this.footerContainer.style.bottom="0px",this.footerContainer.style.zIndex=r.jH.prototype.zIndex-2,this.hsplit.style.width=this.splitSize+"px",this.sidebarFooterContainer=this.createSidebarFooterContainer(),this.sidebarFooterContainer&&(this.sidebarFooterContainer.style.left="0px"),this.editor.chromeless?this.diagramContainer.style.border="none":this.tabContainer=this.createTabContainer()},L.prototype.createSidebarFooterContainer=function(){return null},L.prototype.createUi=function(){this.menubar=this.editor.chromeless?null:this.menus.createMenubar(this.createDiv("geMenubar")),null!=this.menubar&&(this.exitButton=this.createDiv("diagram-exit"),this.menubarContainer.appendChild(this.menubar.container),this.menubarContainer.appendChild(this.exitButton)),null!=this.menubar&&(this.statusContainer=this.createStatusContainer(),this.editor.addListener("statusChanged",r.vJ.bind(this,(function(){this.setStatusText(this.editor.getStatus())}))),this.setStatusText(this.editor.getStatus()),this.menubar.container.appendChild(this.statusContainer),this.container.appendChild(this.menubarContainer)),this.sidebar=this.editor.chromeless?null:this.createSidebar(this.sidebarContainer),null!=this.sidebar&&this.container.appendChild(this.sidebarContainer),this.format=this.editor.chromeless||!this.formatEnabled?null:this.createFormat(this.formatContainer),null!=this.format&&this.container.appendChild(this.formatContainer);var e=this.editor.chromeless?null:this.createFooter();null!=e&&(this.footerContainer.appendChild(e),this.container.appendChild(this.footerContainer)),null!=this.sidebar&&this.sidebarFooterContainer&&this.container.appendChild(this.sidebarFooterContainer),this.container.appendChild(this.diagramContainer),null!=this.container&&null!=this.tabContainer&&this.container.appendChild(this.tabContainer),this.toolbar=this.editor.chromeless?null:this.createToolbar(this.createDiv("geToolbar")),null!=this.toolbar&&(this.toolbarContainer.appendChild(this.toolbar.container),this.container.appendChild(this.toolbarContainer)),null!=this.sidebar&&(this.container.appendChild(this.hsplit),this.addSplitHandler(this.hsplit,!0,0,r.vJ.bind(this,(function(e){this.hsplitPosition=e,this.refresh()}))))},L.prototype.createStatusContainer=function(){var e=document.createElement("a");return e.className="geItem geStatus",screen.width<420&&(e.style.maxWidth=Math.max(20,screen.width-320)+"px",e.style.overflow="hidden"),e},L.prototype.setStatusText=function(e){this.statusContainer.innerHTML=e},L.prototype.createToolbar=function(e){return new T(this,e)},L.prototype.createSidebar=function(e){return new C(this,e)},L.prototype.createFormat=function(e){return new I.yL(this,e)},L.prototype.createFooter=function(){return this.createDiv("geFooter")},L.prototype.createDiv=function(e){var t=document.createElement("div");return t.className=e,t},L.prototype.addSplitHandler=function(e,t,i,n){var l=null,o=null,a=!0,s=null;r.HY.IS_POINTER&&(e.style.touchAction="none");var d=r.vJ.bind(this,(function(){var n=parseInt(t?e.style.left:e.style.bottom);return t||(n=n+i-this.footerHeight),n}));function h(e){if(null!=l){var h=new r.IO(r.G8.getClientX(e),r.G8.getClientY(e));n(Math.max(0,o+(t?h.x-l.x:l.y-h.y)-i)),r.G8.consume(e),o!=d()&&(a=!0,s=null)}}function c(e){h(e),o=null,l=null}r.G8.addGestureListeners(e,(function(e){l=new r.IO(r.G8.getClientX(e),r.G8.getClientY(e)),o=d(),a=!1,r.G8.consume(e)})),r.G8.addListener(e,"click",r.vJ.bind(this,(function(e){if(!a&&this.hsplitClickEnabled){var t=null!=s?s-i:0;s=d(),n(t),r.G8.consume(e)}}))),r.G8.addGestureListeners(document,null,h,c),this.destroyFunctions.push((function(){r.G8.removeGestureListeners(document,null,h,c)}))},L.prototype.handleError=function(e,t,i,n){var l=null!=e&&null!=e.error?e.error:e;if(null!=l||null!=t){var o=r.vJ.htmlEntities(r.xK.get("unknownError")),a=r.xK.get("ok");t=null!=t?t:r.xK.get("error"),null!=l&&null!=l.message&&(o=r.vJ.htmlEntities(l.message)),this.showError(t,o,a,i,null,null,null,null,null,null,null,null,n?i:null)}else null!=i&&i()},L.prototype.showError=function(e,t,i,n,l,o,s,d,h,c,u,p,g){var A=new a.xC(this,e,t,i||r.xK.get("ok"),n,l,o,s,p,d,h),m=Math.ceil(null!=t?t.length/50:1);this.showDialog(A.container,c||340,u||100+20*m,!0,!1,g),A.init()},L.prototype.showDialog=function(e,t,i,n,l,r,o,s,d,h){this.editor.graph.tooltipHandler.hideTooltip(),null==this.dialogs&&(this.dialogs=[]),this.dialog=new a.lG(this,e,t,i,n,l,r,o,s,d,h),this.dialogs.push(this.dialog)},L.prototype.hideDialog=function(e,t){if(null!=this.dialogs&&this.dialogs.length>0){var i=this.dialogs.pop();if(0==i.close(e,t))return void this.dialogs.push(i);this.dialog=this.dialogs.length>0?this.dialogs[this.dialogs.length-1]:null,this.editor.fireEvent(new r.vC("hideDialog")),null==this.dialog&&"hidden"!=this.editor.graph.container.style.visibility&&window.setTimeout(r.vJ.bind(this,(function(){this.editor.graph.isEditing()&&null!=this.editor.graph.cellEditor.textarea?this.editor.graph.cellEditor.textarea.focus():(r.vJ.clearSelection(),this.editor.graph.container.focus())})),0)}},L.prototype.ctrlEnter=function(){var e=this.editor.graph;if(e.isEnabled())try{for(var t=e.getSelectionCells(),i=new r.kB,n=[],l=0;l<t.length;l++){var o=e.isTableCell(t[l])?e.model.getParent(t[l]):t[l];null==o||i.get(o)||(i.put(o,!0),n.push(o))}e.setSelectionCells(e.duplicateCells(n,!1))}catch(a){this.handleError(a)}},L.prototype.pickColor=function(e,t){var i=this.editor.graph,n=i.cellEditor.saveSelection(),l=226+17*(Math.ceil(d.wt.prototype.presetColors.length/12)+Math.ceil(d.wt.prototype.defaultColors.length/12)),r=new d.wt(this,e||"none",(function(e){i.cellEditor.restoreSelection(n),t(e)}),(function(){i.cellEditor.restoreSelection(n)}));this.showDialog(r.container,230,l,!0,!1),r.init()},L.prototype.extractGraphModelFromHtml=function(e){var t=null;try{var i=e.indexOf("&lt;mxGraphModel ");if(i>=0){var n=e.lastIndexOf("&lt;/mxGraphModel&gt;");n>i&&(t=e.substring(i,n+21).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}}catch(l){}return t},L.prototype.extractGraphModelFromEvent=function(e){var t=null,i=null;if(null!=e){var n=null!=e.dataTransfer?e.dataTransfer:e.clipboardData;if(null!=n&&(10==document.documentMode||11==document.documentMode?i=n.getData("Text"):(i=r.vJ.indexOf(n.types,"text/html")>=0?n.getData("text/html"):null,r.vJ.indexOf(n.types,null==i||0==i.length)&&(i=n.getData("text/plain"))),null!=i)){i=p.TS.zapGremlins(r.vJ.trim(i));var l=this.extractGraphModelFromHtml(i);null!=l&&(i=l)}}return null!=i&&this.isCompatibleString(i)&&(t=i),t},L.prototype.isCompatibleString=function(){return!1},L.prototype.executeLayout=function(e,t,i){var n=this.editor.graph;if(n.isEnabled()){n.getModel().beginUpdate();try{e()}catch(o){throw o}finally{if(this.allowAnimation&&t&&(null==navigator.userAgent||navigator.userAgent.indexOf("Camino")<0)){var l=new r.Wv(n);l.addListener(r.G8.DONE,r.vJ.bind(this,(function(){n.getModel().endUpdate(),null!=i&&i()}))),l.startAnimation()}else n.getModel().endUpdate(),null!=i&&i()}}},L.prototype.showImageDialog=function(e,t,i){var n=this.editor.graph.cellEditor,l=n.saveSelection(),o=r.vJ.prompt(e,t);if(n.restoreSelection(l),null!=o&&o.length>0){var a=new Image;a.onload=function(){i(o,a.width,a.height)},a.onerror=function(){i(null),r.vJ.alert(r.xK.get("fileNotFound"))},a.src=o}else i(null)},L.prototype.showLinkDialog=function(){},L.prototype.showBackgroundImageDialog=function(e,t){e=null!=e?e:r.vJ.bind(this,(function(e){var t=new s.f(this,null,e);t.ignoreColor=!0,this.editor.graph.model.execute(t)}));var i=r.vJ.prompt(r.xK.get("backgroundImage"),null!=t?t.src:"");null!=i&&i.length>0?((t=new Image).onload=function(){e(new r.xq(i,t.width,t.height),!1)},t.onerror=function(){e(null,!0),r.vJ.alert(r.xK.get("fileNotFound"))},t.src=i):e(null)},L.prototype.setBackgroundImage=function(e){this.editor.graph.setBackgroundImage(e),this.editor.graph.view.validateBackgroundImage(),this.fireEvent(new r.vC("backgroundImageChanged"))},L.prototype.confirm=function(e,t,i){r.vJ.confirm(e)?null!=t&&t():null!=i&&i()},L.prototype.createOutline=function(){var e=new r.Mc(this.editor.graph);return e.border=20,r.G8.addListener(window,"resize",(function(){e.update()})),this.addListener("pageFormatChanged",(function(){e.update()})),e},L.prototype.altShiftActions={67:"clearWaypoints",65:"connectionArrows",80:"connectionPoints",84:"editTooltip",86:"pasteSize",88:"copySize"},L.prototype.createKeyHandler=function(){var e=this,t=this.editor.graph,i=new r.rx(t),n=i.isEventIgnored;i.isEventIgnored=function(e){return!(r.G8.isShiftDown(e)&&9==e.keyCode)&&(!this.isControlDown(e)||r.G8.isShiftDown(e)||90!=e.keyCode&&89!=e.keyCode&&188!=e.keyCode&&190!=e.keyCode&&85!=e.keyCode)&&(66!=e.keyCode&&73!=e.keyCode||!this.isControlDown(e)||this.graph.cellEditor.isContentEditing()&&!r.HY.IS_FF&&!r.HY.IS_SF)&&n.apply(this,arguments)},i.isEnabledForEvent=function(t){return!r.G8.isConsumed(t)&&this.isGraphEvent(t)&&this.isEnabled()&&(null==e.dialogs||0==e.dialogs.length)},i.isControlDown=function(e){return r.G8.isControlDown(e)||r.HY.IS_MAC&&e.metaKey};var l=[],o=null;function a(e,i,n){l.push((function(){if(!t.isSelectionEmpty()&&t.isEnabled())if(i=null!=i?i:1,n){t.getModel().beginUpdate();try{for(var l=t.getSelectionCells(),o=0;o<l.length;o++)if(t.getModel().isVertex(l[o])&&t.isCellResizable(l[o])){var a=t.getCellGeometry(l[o]);null!=a&&(a=a.clone(),37==e?a.width=Math.max(0,a.width-i):38==e?a.height=Math.max(0,a.height-i):39==e?a.width+=i:40==e&&(a.height+=i),t.getModel().setGeometry(l[o],a))}}finally{t.getModel().endUpdate()}}else{var s=t.getSelectionCell(),d=t.model.getParent(s),h=null;if(1==t.getSelectionCount()&&t.model.isVertex(s)&&null!=t.layoutManager&&!t.isCellLocked(s)&&(h=t.layoutManager.getLayout(d)),null!=h&&h.constructor==r.KX){var c=d.getIndex(s);37==e||38==e?t.model.add(d,s,Math.max(0,c-1)):39!=e&&40!=e||t.model.add(d,s,Math.min(t.model.getChildCount(d),c+1))}else{l=t.getMovableCells(t.getSelectionCells());var u=[];for(o=0;o<l.length;o++){var p=t.getCurrentCellStyle(l[o]);if("1"==r.vJ.getValue(p,"part","0")){d=t.model.getParent(l[o]);t.model.isVertex(d)&&r.vJ.indexOf(l,d)<0&&u.push(d)}else u.push(l[o])}if(u.length>0){l=u;var g=0,A=0;37==e?g=-i:38==e?A=-i:39==e?g=i:40==e&&(A=i),t.moveCells(l,g,A)}}}})),null!=o&&window.clearTimeout(o),o=window.setTimeout((function(){if(l.length>0){t.getModel().beginUpdate();try{for(var e=0;e<l.length;e++)l[e]();l=[]}finally{t.getModel().endUpdate()}}}),200)}var s={37:r.fV.DIRECTION_WEST,38:r.fV.DIRECTION_NORTH,39:r.fV.DIRECTION_EAST,40:r.fV.DIRECTION_SOUTH},d=i.getFunction;r.rx.prototype.getFunction=function(i){if(t.isEnabled()){if(r.G8.isShiftDown(i)&&r.G8.isAltDown(i)){var n=e.actions.get(e.altShiftActions[i.keyCode]);if(null!=n)return n.funct}if(9==i.keyCode&&r.G8.isAltDown(i))return t.cellEditor.isContentEditing()?function(){document.execCommand("outdent",!1,null)}:r.G8.isShiftDown(i)?function(){t.selectParentCell()}:function(){t.selectChildCell()};if(null!=s[i.keyCode]&&!t.isSelectionEmpty()){if(this.isControlDown(i)||!r.G8.isShiftDown(i)||!r.G8.isAltDown(i))return this.isControlDown(i)?function(){a(i.keyCode,r.G8.isShiftDown(i)?t.gridSize:null,!0)}:function(){a(i.keyCode,r.G8.isShiftDown(i)?t.gridSize:null)};if(t.model.isVertex(t.getSelectionCell()))return function(){var n=t.connectVertex(t.getSelectionCell(),s[i.keyCode],t.defaultEdgeLength,i,!0);null!=n&&n.length>0&&(1==n.length&&t.model.isEdge(n[0])?t.setSelectionCell(t.model.getTerminal(n[0],!1)):t.setSelectionCell(n[n.length-1]),t.scrollCellToVisible(t.getSelectionCell()),null!=e.hoverIcons&&e.hoverIcons.update(t.view.getState(t.getSelectionCell())))}}}return d.apply(this,arguments)},i.bindAction=r.vJ.bind(this,(function(e,t,n,l){var r=this.actions.get(n);if(null!=r){var o=function(){r.isEnabled()&&r.funct()};t?l?i.bindControlShiftKey(e,o):i.bindControlKey(e,o):l?i.bindShiftKey(e,o):i.bindKey(e,o)}}));var h=this,c=i.escape;return i.escape=function(){c.apply(this,arguments)},i.enter=function(){},i.bindControlShiftKey(36,(function(){t.exitGroup()})),i.bindControlShiftKey(35,(function(){t.enterGroup()})),i.bindShiftKey(36,(function(){t.home()})),i.bindKey(35,(function(){t.refresh()})),i.bindAction(107,!0,"zoomIn"),i.bindAction(109,!0,"zoomOut"),i.bindAction(80,!0,"print"),i.bindAction(79,!0,"outline",!0),this.editor.chromeless&&!this.editor.editable||(i.bindControlKey(36,(function(){t.isEnabled()&&t.foldCells(!0)})),i.bindControlKey(35,(function(){t.isEnabled()&&t.foldCells(!1)})),i.bindControlKey(13,(function(){h.ctrlEnter()})),i.bindAction(8,!1,"delete"),i.bindAction(8,!0,"deleteAll"),i.bindAction(46,!1,"delete"),i.bindAction(46,!0,"deleteAll"),i.bindAction(36,!1,"resetView"),i.bindAction(72,!0,"fitWindow",!0),i.bindAction(74,!0,"fitPage"),i.bindAction(74,!0,"fitTwoPages",!0),i.bindAction(48,!0,"customZoom"),i.bindAction(82,!0,"turn"),i.bindAction(82,!0,"clearDefaultStyle",!0),i.bindAction(65,!0,"selectAll"),i.bindAction(65,!0,"selectNone",!0),i.bindAction(73,!0,"selectVertices",!0),i.bindAction(69,!0,"selectEdges",!0),i.bindAction(69,!0,"editStyle"),i.bindAction(66,!0,"bold"),i.bindAction(66,!0,"toBack",!0),i.bindAction(70,!0,"toFront",!0),i.bindAction(68,!0,"duplicate"),i.bindAction(68,!0,"setAsDefaultStyle",!0),i.bindAction(90,!0,"undo"),i.bindAction(89,!0,"autosize",!0),i.bindAction(88,!0,"cut"),i.bindAction(67,!0,"copy"),i.bindAction(86,!0,"paste"),i.bindAction(71,!0,"group"),i.bindAction(77,!0,"editData"),i.bindAction(71,!0,"grid",!0),i.bindAction(73,!0,"italic"),i.bindAction(76,!0,"lockUnlock"),i.bindAction(76,!0,"layers",!0),i.bindAction(80,!0,"formatPanel",!0),i.bindAction(85,!0,"underline"),i.bindAction(85,!0,"ungroup",!0),i.bindAction(190,!0,"superscript"),i.bindAction(188,!0,"subscript"),i.bindAction(9,!1,"indent",!0),i.bindKey(13,(function(){t.isEnabled()&&t.startEditingAtCell()})),i.bindKey(113,(function(){t.isEnabled()&&t.startEditingAtCell()}))),r.HY.IS_WIN?i.bindAction(89,!0,"redo"):i.bindAction(90,!0,"redo",!0),i},L.prototype.destroy=function(){if(null!=this.editor&&(this.editor.destroy(),this.editor=null),null!=this.menubar&&(this.menubar.destroy(),this.menubar=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null),null!=this.sidebar&&(this.sidebar.destroy(),this.sidebar=null),null!=this.keyHandler&&(this.keyHandler.destroy(),this.keyHandler=null),null!=this.keydownHandler&&(r.G8.removeListener(document,"keydown",this.keydownHandler),this.keydownHandler=null),null!=this.keyupHandler&&(r.G8.removeListener(document,"keyup",this.keyupHandler),this.keyupHandler=null),null!=this.resizeHandler&&(r.G8.removeListener(window,"resize",this.resizeHandler),this.resizeHandler=null),null!=this.gestureHandler&&(r.G8.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null),null!=this.orientationChangeHandler&&(r.G8.removeListener(window,"orientationchange",this.orientationChangeHandler),this.orientationChangeHandler=null),null!=this.scrollHandler&&(r.G8.removeListener(window,"scroll",this.scrollHandler),this.scrollHandler=null),null!=this.destroyFunctions){for(var e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions=null}var t=[this.menubarContainer,this.toolbarContainer,this.sidebarContainer,this.formatContainer,this.diagramContainer,this.footerContainer,this.chromelessToolbar,this.hsplit,this.sidebarFooterContainer,this.layersDialog];for(e=0;e<t.length;e++)null!=t[e]&&null!=t[e].parentNode&&t[e].parentNode.removeChild(t[e])},r.ys.prototype.closeImage=o,r.ys.prototype.normalizeImage="data:image/gif;base64,R0lGODlhDAAMAPcAAP///0RERAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAADAAMAAAIMgADCBxIcCCAgwgTCkRYMACAhQcbPnQYUeHEiQQfXmy4sKPFiA4pVgSJ0SDJhCg5NgwIADs=",r.ys.prototype.maximizeImage="data:image/gif;base64,R0lGODlhDAAMAPcAAP///0RERAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAADAAMAAAIMAADCBxIcCCAgwgTCgRQ0ODChg8DMEx4UOJDihMvUrRoESPHiRsZcmwoEqNCiAUDAgA7",r.ys.prototype.minimizeImage="data:image/gif;base64,R0lGODlhDAAMAIAAAERERP///yH5BAAAAAAALAAAAAAMAAwAAAIXhI8Xy20Nw4tsUgnuspTHlyhgmHkQGRYAOw==",r.ys.prototype.resizeImage=o;var V=i(8533),M={};M[p.TS.prototype.defaultThemeName]=(0,n.o)(l.I).documentElement;var D=function(){function e(e,t){var i=this;this.container=e,this.onExit=t,this.start=function(e,t,n){i.container.appendChild(i.diagramContainer),i.container.style.overflow="hidden",r.xK.parse(e),i.editor=new a.KE(!1,M),i.editorUi=new L(i.editor,i.diagramContainer,null,i.onExit),t&&i.editorUi.editor.setGraphXml(t.documentElement),i.editor.graph.getModel().addListener(r.G8.CHANGE,(function(e,t){if(n){var l=[];t&&t.properties&&t.properties.changes&&(l=t.properties.changes),n(i.editorUi&&i.editorUi.editor.getGraphXml(),l)}}))},this.getXML=function(){return i.editorUi&&i.editorUi.editor.getGraphXml()},this.exit=function(){i.container.style.overflow="",r.G8.removeAllListeners(window),r.G8.removeAllListeners(document),i.editor&&i.editor.destroy(),i.editorUi&&i.editorUi.destroy(),i.container.removeChild(i.diagramContainer)},this.editor=null,this.editorUi=null,this.diagramContainer=document.createElement("div"),this.diagramContainer.className="diagram-container geEditor"}return e.getLang=function(e){return(0,V.Z)(e)},e}()}}]);